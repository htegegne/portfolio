<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>jest-mock | portfolio</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="jest-mock" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/myportfolio.client/node_modules/jest-mock/" />
<meta property="og:url" content="http://localhost:4000/myportfolio.client/node_modules/jest-mock/" />
<meta property="og:site_name" content="portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="jest-mock" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"jest-mock","url":"http://localhost:4000/myportfolio.client/node_modules/jest-mock/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=059dd2210d8f0fb8d42af0cbb5c1b29e59b98886">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">portfolio</a></h1>
      

      <h1 id="jest-mock">jest-mock</h1>

<h2 id="api">API</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">ModuleMocker</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">jest-mock</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="constructorglobal"><code class="language-plaintext highlighter-rouge">constructor(global)</code></h3>

<p>Creates a new module mocker that generates mocks as if they were created in an environment with the given global object.</p>

<h3 id="generatefrommetadatametadata"><code class="language-plaintext highlighter-rouge">generateFromMetadata(metadata)</code></h3>

<p>Generates a mock based on the given metadata (Metadata for the mock in the schema returned by the getMetadata method of this module). Mocks treat functions specially, and all mock functions have additional members, described in the documentation for <code class="language-plaintext highlighter-rouge">fn</code> in this module.</p>

<p>One important note: function prototypes are handled specially by this mocking framework. For functions with prototypes, when called as a constructor, the mock will install mocked function members on the instance. This allows different instances of the same constructor to have different values for its mocks member and its return values.</p>

<h3 id="getmetadatacomponent"><code class="language-plaintext highlighter-rouge">getMetadata(component)</code></h3>

<p>Inspects the argument and returns its schema in the following recursive format:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  type: ...
  members: {}
}
</code></pre></div></div>

<p>Where type is one of <code class="language-plaintext highlighter-rouge">array</code>, <code class="language-plaintext highlighter-rouge">object</code>, <code class="language-plaintext highlighter-rouge">function</code>, or <code class="language-plaintext highlighter-rouge">ref</code>, and members is an optional dictionary where the keys are member names and the values are metadata objects. Function prototypes are defined by defining metadata for the <code class="language-plaintext highlighter-rouge">member.prototype</code> of the function. The type of a function prototype should always be <code class="language-plaintext highlighter-rouge">object</code>. For instance, a class might be defined like this:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">classDef</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">function</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">members</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">staticMethod</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">function</span><span class="dl">'</span><span class="p">},</span>
    <span class="na">prototype</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">members</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">instanceMethod</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">function</span><span class="dl">'</span><span class="p">},</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Metadata may also contain references to other objects defined within the same metadata object. The metadata for the referent must be marked with <code class="language-plaintext highlighter-rouge">refID</code> key and an arbitrary value. The referrer must be marked with a <code class="language-plaintext highlighter-rouge">ref</code> key that has the same value as object with refID that it refers to. For instance, this metadata blob:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">refID</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">refID</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">members</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">self</span><span class="p">:</span> <span class="p">{</span><span class="na">ref</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<p>defines an object with a slot named <code class="language-plaintext highlighter-rouge">self</code> that refers back to the object.</p>

<h3 id="fn"><code class="language-plaintext highlighter-rouge">fn</code></h3>

<p>Generates a stand-alone function with members that help drive unit tests or confirm expectations. Specifically, functions returned by this method have the following members:</p>

<h5 id="mock"><code class="language-plaintext highlighter-rouge">.mock</code></h5>

<p>An object with three members, <code class="language-plaintext highlighter-rouge">calls</code>, <code class="language-plaintext highlighter-rouge">instances</code> and <code class="language-plaintext highlighter-rouge">invocationCallOrder</code>, which are all lists. The items in the <code class="language-plaintext highlighter-rouge">calls</code> list are the arguments with which the function was called. The “instances” list stores the value of ‘this’ for each call to the function. This is useful for retrieving instances from a constructor. The <code class="language-plaintext highlighter-rouge">invocationCallOrder</code> lists the order in which the mock was called in relation to all mock calls, starting at 1.</p>

<h5 id="mockreturnvalueoncevalue"><code class="language-plaintext highlighter-rouge">.mockReturnValueOnce(value)</code></h5>

<p>Pushes the given value onto a FIFO queue of return values for the function.</p>

<h5 id="mockreturnvaluevalue"><code class="language-plaintext highlighter-rouge">.mockReturnValue(value)</code></h5>

<p>Sets the default return value for the function.</p>

<h5 id="mockimplementationoncefunction"><code class="language-plaintext highlighter-rouge">.mockImplementationOnce(function)</code></h5>

<p>Pushes the given mock implementation onto a FIFO queue of mock implementations for the function.</p>

<h5 id="mockimplementationfunction"><code class="language-plaintext highlighter-rouge">.mockImplementation(function)</code></h5>

<p>Sets the default mock implementation for the function.</p>

<h5 id="mockreturnthis"><code class="language-plaintext highlighter-rouge">.mockReturnThis()</code></h5>

<p>Syntactic sugar for .mockImplementation(function() {return this;})</p>

<p>In case both <code class="language-plaintext highlighter-rouge">mockImplementationOnce()/mockImplementation()</code> and <code class="language-plaintext highlighter-rouge">mockReturnValueOnce()/mockReturnValue()</code> are called. The priority of which to use is based on what is the last call:</p>

<ul>
  <li>if the last call is mockReturnValueOnce() or mockReturnValue(), use the specific return value or default return value. If specific return values are used up or no default return value is set, fall back to try mockImplementation();</li>
  <li>if the last call is mockImplementationOnce() or mockImplementation(), run the specific implementation and return the result or run default implementation and return the result.</li>
</ul>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
