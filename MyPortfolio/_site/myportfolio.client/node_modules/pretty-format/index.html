<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>pretty-format | portfolio</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="pretty-format" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/myportfolio.client/node_modules/pretty-format/" />
<meta property="og:url" content="http://localhost:4000/myportfolio.client/node_modules/pretty-format/" />
<meta property="og:site_name" content="portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="pretty-format" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"pretty-format","url":"http://localhost:4000/myportfolio.client/node_modules/pretty-format/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=00c08f3bd19ad2390c706d50e4f8968f8b47944c">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">portfolio</a></h1>
      

      <h1 id="pretty-format">pretty-format</h1>

<p>Stringify any JavaScript value.</p>

<ul>
  <li>Serialize built-in JavaScript types.</li>
  <li>Serialize application-specific data types with built-in or user-defined plugins.</li>
</ul>

<h2 id="installation">Installation</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>yarn add pretty-format
</code></pre></div></div>

<h2 id="usage">Usage</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span><span class="na">format</span><span class="p">:</span> <span class="nx">prettyFormat</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">pretty-format</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// CommonJS</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">format</span> <span class="k">as</span> <span class="nx">prettyFormat</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">pretty-format</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// ES2015 modules</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">val</span> <span class="o">=</span> <span class="p">{</span><span class="na">object</span><span class="p">:</span> <span class="p">{}};</span>
<span class="nx">val</span><span class="p">.</span><span class="nx">circularReference</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
<span class="nx">val</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">(</span><span class="dl">'</span><span class="s1">foo</span><span class="dl">'</span><span class="p">)]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">foo</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">val</span><span class="p">.</span><span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">([[</span><span class="dl">'</span><span class="s1">prop</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">value</span><span class="dl">'</span><span class="p">]]);</span>
<span class="nx">val</span><span class="p">.</span><span class="nx">array</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">0</span><span class="p">,</span> <span class="kc">Infinity</span><span class="p">,</span> <span class="kc">NaN</span><span class="p">];</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">prettyFormat</span><span class="p">(</span><span class="nx">val</span><span class="p">));</span>
<span class="cm">/*
Object {
  "array": Array [
    -0,
    Infinity,
    NaN,
  ],
  "circularReference": [Circular],
  "map": Map {
    "prop" =&gt; "value",
  },
  "object": Object {},
  Symbol(foo): "foo",
}
*/</span>
</code></pre></div></div>

<h2 id="usage-with-options">Usage with options</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">onClick</span><span class="p">()</span> <span class="p">{}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">prettyFormat</span><span class="p">(</span><span class="nx">onClick</span><span class="p">));</span>
<span class="cm">/*
[Function onClick]
*/</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">printFunctionName</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">};</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">prettyFormat</span><span class="p">(</span><span class="nx">onClick</span><span class="p">,</span> <span class="nx">options</span><span class="p">));</span>
<span class="cm">/*
[Function]
*/</span>
</code></pre></div></div>

<!-- prettier-ignore -->
<p>| key                   | type      | default    | description                                             |
| :——————– | :——– | :——— | :—————————————————— |
| <code class="language-plaintext highlighter-rouge">callToJSON</code>          | <code class="language-plaintext highlighter-rouge">boolean</code> | <code class="language-plaintext highlighter-rouge">true</code>     | call <code class="language-plaintext highlighter-rouge">toJSON</code> method (if it exists) on objects          |
| <code class="language-plaintext highlighter-rouge">compareKeys</code>         | <code class="language-plaintext highlighter-rouge">function</code>| <code class="language-plaintext highlighter-rouge">undefined</code>| compare function used when sorting object keys          |
| <code class="language-plaintext highlighter-rouge">escapeRegex</code>         | <code class="language-plaintext highlighter-rouge">boolean</code> | <code class="language-plaintext highlighter-rouge">false</code>    | escape special characters in regular expressions        |
| <code class="language-plaintext highlighter-rouge">escapeString</code>        | <code class="language-plaintext highlighter-rouge">boolean</code> | <code class="language-plaintext highlighter-rouge">true</code>     | escape special characters in strings                    |
| <code class="language-plaintext highlighter-rouge">highlight</code>           | <code class="language-plaintext highlighter-rouge">boolean</code> | <code class="language-plaintext highlighter-rouge">false</code>    | highlight syntax with colors in terminal (some plugins) |
| <code class="language-plaintext highlighter-rouge">indent</code>              | <code class="language-plaintext highlighter-rouge">number</code>  | <code class="language-plaintext highlighter-rouge">2</code>        | spaces in each level of indentation                     |
| <code class="language-plaintext highlighter-rouge">maxDepth</code>            | <code class="language-plaintext highlighter-rouge">number</code>  | <code class="language-plaintext highlighter-rouge">Infinity</code> | levels to print in arrays, objects, elements, and so on |
| <code class="language-plaintext highlighter-rouge">min</code>                 | <code class="language-plaintext highlighter-rouge">boolean</code> | <code class="language-plaintext highlighter-rouge">false</code>    | minimize added space: no indentation nor line breaks    |
| <code class="language-plaintext highlighter-rouge">plugins</code>             | <code class="language-plaintext highlighter-rouge">array</code>   | <code class="language-plaintext highlighter-rouge">[]</code>       | plugins to serialize application-specific data types    |
| <code class="language-plaintext highlighter-rouge">printBasicPrototype</code> | <code class="language-plaintext highlighter-rouge">boolean</code> | <code class="language-plaintext highlighter-rouge">false</code>    | print the prototype for plain objects and arrays        |
| <code class="language-plaintext highlighter-rouge">printFunctionName</code>   | <code class="language-plaintext highlighter-rouge">boolean</code> | <code class="language-plaintext highlighter-rouge">true</code>     | include or omit the name of a function                  |
| <code class="language-plaintext highlighter-rouge">theme</code>               | <code class="language-plaintext highlighter-rouge">object</code>  |            | colors to highlight syntax in terminal                  |</p>

<p>Property values of <code class="language-plaintext highlighter-rouge">theme</code> are from <a href="https://github.com/chalk/ansi-styles#colors">ansi-styles colors</a></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">DEFAULT_THEME</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">comment</span><span class="p">:</span> <span class="dl">'</span><span class="s1">gray</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">content</span><span class="p">:</span> <span class="dl">'</span><span class="s1">reset</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">prop</span><span class="p">:</span> <span class="dl">'</span><span class="s1">yellow</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">tag</span><span class="p">:</span> <span class="dl">'</span><span class="s1">cyan</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">value</span><span class="p">:</span> <span class="dl">'</span><span class="s1">green</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="usage-with-plugins">Usage with plugins</h2>

<p>The <code class="language-plaintext highlighter-rouge">pretty-format</code> package provides some built-in plugins, including:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ReactElement</code> for elements from <code class="language-plaintext highlighter-rouge">react</code></li>
  <li><code class="language-plaintext highlighter-rouge">ReactTestComponent</code> for test objects from <code class="language-plaintext highlighter-rouge">react-test-renderer</code></li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// CommonJS</span>
<span class="kd">const</span> <span class="nx">React</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">renderer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">react-test-renderer</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="p">{</span><span class="na">format</span><span class="p">:</span> <span class="nx">prettyFormat</span><span class="p">,</span> <span class="nx">plugins</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">pretty-format</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="p">{</span><span class="nx">ReactElement</span><span class="p">,</span> <span class="nx">ReactTestComponent</span><span class="p">}</span> <span class="o">=</span> <span class="nx">plugins</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ES2015 modules and destructuring assignment</span>
<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">renderer</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-test-renderer</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">plugins</span><span class="p">,</span> <span class="nx">format</span> <span class="k">as</span> <span class="nx">prettyFormat</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">pretty-format</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="p">{</span><span class="nx">ReactElement</span><span class="p">,</span> <span class="nx">ReactTestComponent</span><span class="p">}</span> <span class="o">=</span> <span class="nx">plugins</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">onClick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{};</span>
<span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">button</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span><span class="nx">onClick</span><span class="p">},</span> <span class="dl">'</span><span class="s1">Hello World</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">formatted1</span> <span class="o">=</span> <span class="nx">prettyFormat</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span><span class="nx">ReactElement</span><span class="p">],</span>
  <span class="na">printFunctionName</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">});</span>
<span class="kd">const</span> <span class="nx">formatted2</span> <span class="o">=</span> <span class="nx">prettyFormat</span><span class="p">(</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">element</span><span class="p">).</span><span class="nx">toJSON</span><span class="p">(),</span> <span class="p">{</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span><span class="nx">ReactTestComponent</span><span class="p">],</span>
  <span class="na">printFunctionName</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">});</span>
<span class="cm">/*
&lt;button
  onClick=[Function]
&gt;
  Hello World
&lt;/button&gt;
*/</span>
</code></pre></div></div>

<h2 id="usage-in-jest">Usage in Jest</h2>

<p>For snapshot tests, Jest uses <code class="language-plaintext highlighter-rouge">pretty-format</code> with options that include some of its built-in plugins. For this purpose, plugins are also known as <strong>snapshot serializers</strong>.</p>

<p>To serialize application-specific data types, you can add modules to <code class="language-plaintext highlighter-rouge">devDependencies</code> of a project, and then:</p>

<p>In an <strong>individual</strong> test file, you can add a module as follows. It precedes any modules from Jest configuration.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">serializer</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">my-serializer-module</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">expect</span><span class="p">.</span><span class="nx">addSnapshotSerializer</span><span class="p">(</span><span class="nx">serializer</span><span class="p">);</span>

<span class="c1">// tests which have `expect(value).toMatchSnapshot()` assertions</span>
</code></pre></div></div>

<p>For <strong>all</strong> test files, you can specify modules in Jest configuration. They precede built-in plugins for React, HTML, and Immutable.js data types. For example, in a <code class="language-plaintext highlighter-rouge">package.json</code> file:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jest"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"snapshotSerializers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"my-serializer-module"</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="writing-plugins">Writing plugins</h2>

<p>A plugin is a JavaScript object.</p>

<p>If <code class="language-plaintext highlighter-rouge">options</code> has a <code class="language-plaintext highlighter-rouge">plugins</code> array: for the first plugin whose <code class="language-plaintext highlighter-rouge">test(val)</code> method returns a truthy value, then <code class="language-plaintext highlighter-rouge">prettyFormat(val, options)</code> returns the result from either:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">serialize(val, …)</code> method of the <strong>improved</strong> interface (available in <strong>version 21</strong> or later)</li>
  <li><code class="language-plaintext highlighter-rouge">print(val, …)</code> method of the <strong>original</strong> interface (if plugin does not have <code class="language-plaintext highlighter-rouge">serialize</code> method)</li>
</ul>

<h3 id="test">test</h3>

<p>Write <code class="language-plaintext highlighter-rouge">test</code> so it can receive <code class="language-plaintext highlighter-rouge">val</code> argument of any type. To serialize <strong>objects</strong> which have certain properties, then a guarded expression like <code class="language-plaintext highlighter-rouge">val != null &amp;&amp; …</code> or more concise <code class="language-plaintext highlighter-rouge">val &amp;&amp; …</code> prevents the following errors:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">TypeError: Cannot read property 'whatever' of null</code></li>
  <li><code class="language-plaintext highlighter-rouge">TypeError: Cannot read property 'whatever' of undefined</code></li>
</ul>

<p>For example, <code class="language-plaintext highlighter-rouge">test</code> method of built-in <code class="language-plaintext highlighter-rouge">ReactElement</code> plugin:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">elementSymbol</span> <span class="o">=</span> <span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">'</span><span class="s1">react.element</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">test</span> <span class="o">=</span> <span class="nx">val</span> <span class="o">=&gt;</span> <span class="nx">val</span> <span class="o">&amp;&amp;</span> <span class="nx">val</span><span class="p">.</span><span class="nx">$$typeof</span> <span class="o">===</span> <span class="nx">elementSymbol</span><span class="p">;</span>
</code></pre></div></div>

<p>Pay attention to efficiency in <code class="language-plaintext highlighter-rouge">test</code> because <code class="language-plaintext highlighter-rouge">pretty-format</code> calls it often.</p>

<h3 id="serialize">serialize</h3>

<p>The <strong>improved</strong> interface is available in <strong>version 21</strong> or later.</p>

<p>Write <code class="language-plaintext highlighter-rouge">serialize</code> to return a string, given the arguments:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">val</code> which “passed the test”</li>
  <li>unchanging <code class="language-plaintext highlighter-rouge">config</code> object: derived from <code class="language-plaintext highlighter-rouge">options</code></li>
  <li>current <code class="language-plaintext highlighter-rouge">indentation</code> string: concatenate to <code class="language-plaintext highlighter-rouge">indent</code> from <code class="language-plaintext highlighter-rouge">config</code></li>
  <li>current <code class="language-plaintext highlighter-rouge">depth</code> number: compare to <code class="language-plaintext highlighter-rouge">maxDepth</code> from <code class="language-plaintext highlighter-rouge">config</code></li>
  <li>current <code class="language-plaintext highlighter-rouge">refs</code> array: find circular references in objects</li>
  <li><code class="language-plaintext highlighter-rouge">printer</code> callback function: serialize children</li>
</ul>

<h3 id="config">config</h3>

<!-- prettier-ignore -->
<p>| key                 | type      | description                                             |
| :—————— | :——– | :—————————————————— |
| <code class="language-plaintext highlighter-rouge">callToJSON</code>        | <code class="language-plaintext highlighter-rouge">boolean</code> | call <code class="language-plaintext highlighter-rouge">toJSON</code> method (if it exists) on objects          |
| <code class="language-plaintext highlighter-rouge">compareKeys</code>       | <code class="language-plaintext highlighter-rouge">function</code>| compare function used when sorting object keys          |
| <code class="language-plaintext highlighter-rouge">colors</code>            | <code class="language-plaintext highlighter-rouge">Object</code>  | escape codes for colors to highlight syntax             |
| <code class="language-plaintext highlighter-rouge">escapeRegex</code>       | <code class="language-plaintext highlighter-rouge">boolean</code> | escape special characters in regular expressions        |
| <code class="language-plaintext highlighter-rouge">escapeString</code>      | <code class="language-plaintext highlighter-rouge">boolean</code> | escape special characters in strings                    |
| <code class="language-plaintext highlighter-rouge">indent</code>            | <code class="language-plaintext highlighter-rouge">string</code>  | spaces in each level of indentation                     |
| <code class="language-plaintext highlighter-rouge">maxDepth</code>          | <code class="language-plaintext highlighter-rouge">number</code>  | levels to print in arrays, objects, elements, and so on |
| <code class="language-plaintext highlighter-rouge">min</code>               | <code class="language-plaintext highlighter-rouge">boolean</code> | minimize added space: no indentation nor line breaks    |
| <code class="language-plaintext highlighter-rouge">plugins</code>           | <code class="language-plaintext highlighter-rouge">array</code>   | plugins to serialize application-specific data types    |
| <code class="language-plaintext highlighter-rouge">printFunctionName</code> | <code class="language-plaintext highlighter-rouge">boolean</code> | include or omit the name of a function                  |
| <code class="language-plaintext highlighter-rouge">spacingInner</code>      | <code class="language-plaintext highlighter-rouge">strong</code>  | spacing to separate items in a list                     |
| <code class="language-plaintext highlighter-rouge">spacingOuter</code>      | <code class="language-plaintext highlighter-rouge">strong</code>  | spacing to enclose a list of items                      |</p>

<p>Each property of <code class="language-plaintext highlighter-rouge">colors</code> in <code class="language-plaintext highlighter-rouge">config</code> corresponds to a property of <code class="language-plaintext highlighter-rouge">theme</code> in <code class="language-plaintext highlighter-rouge">options</code>:</p>

<ul>
  <li>the key is the same (for example, <code class="language-plaintext highlighter-rouge">tag</code>)</li>
  <li>the value in <code class="language-plaintext highlighter-rouge">colors</code> is a object with <code class="language-plaintext highlighter-rouge">open</code> and <code class="language-plaintext highlighter-rouge">close</code> properties whose values are escape codes from <a href="https://github.com/chalk/ansi-styles">ansi-styles</a> for the color value in <code class="language-plaintext highlighter-rouge">theme</code> (for example, <code class="language-plaintext highlighter-rouge">'cyan'</code>)</li>
</ul>

<p>Some properties in <code class="language-plaintext highlighter-rouge">config</code> are derived from <code class="language-plaintext highlighter-rouge">min</code> in <code class="language-plaintext highlighter-rouge">options</code>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">spacingInner</code> and <code class="language-plaintext highlighter-rouge">spacingOuter</code> are <strong>newline</strong> if <code class="language-plaintext highlighter-rouge">min</code> is <code class="language-plaintext highlighter-rouge">false</code></li>
  <li><code class="language-plaintext highlighter-rouge">spacingInner</code> is <strong>space</strong> and <code class="language-plaintext highlighter-rouge">spacingOuter</code> is <strong>empty string</strong> if <code class="language-plaintext highlighter-rouge">min</code> is <code class="language-plaintext highlighter-rouge">true</code></li>
</ul>

<h3 id="example-of-serialize-and-test">Example of serialize and test</h3>

<p>This plugin is a pattern you can apply to serialize composite data types. Side note: <code class="language-plaintext highlighter-rouge">pretty-format</code> does not need a plugin to serialize arrays.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// We reused more code when we factored out a function for child items</span>
<span class="c1">// that is independent of depth, name, and enclosing punctuation (see below).</span>
<span class="kd">const</span> <span class="nx">SEPARATOR</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">,</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">serializeItems</span><span class="p">(</span><span class="nx">items</span><span class="p">,</span> <span class="nx">config</span><span class="p">,</span> <span class="nx">indentation</span><span class="p">,</span> <span class="nx">depth</span><span class="p">,</span> <span class="nx">refs</span><span class="p">,</span> <span class="nx">printer</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="dl">''</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">const</span> <span class="nx">indentationItems</span> <span class="o">=</span> <span class="nx">indentation</span> <span class="o">+</span> <span class="nx">config</span><span class="p">.</span><span class="nx">indent</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="nx">config</span><span class="p">.</span><span class="nx">spacingOuter</span> <span class="o">+</span>
    <span class="nx">items</span>
      <span class="p">.</span><span class="nx">map</span><span class="p">(</span>
        <span class="nx">item</span> <span class="o">=&gt;</span>
          <span class="nx">indentationItems</span> <span class="o">+</span>
          <span class="nx">printer</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">config</span><span class="p">,</span> <span class="nx">indentationItems</span><span class="p">,</span> <span class="nx">depth</span><span class="p">,</span> <span class="nx">refs</span><span class="p">),</span> <span class="c1">// callback</span>
      <span class="p">)</span>
      <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">SEPARATOR</span> <span class="o">+</span> <span class="nx">config</span><span class="p">.</span><span class="nx">spacingInner</span><span class="p">)</span> <span class="o">+</span>
    <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">min</span> <span class="p">?</span> <span class="dl">''</span> <span class="p">:</span> <span class="nx">SEPARATOR</span><span class="p">)</span> <span class="o">+</span> <span class="c1">// following the last item</span>
    <span class="nx">config</span><span class="p">.</span><span class="nx">spacingOuter</span> <span class="o">+</span>
    <span class="nx">indentation</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">plugin</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">test</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">serialize</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">config</span><span class="p">,</span> <span class="nx">indentation</span><span class="p">,</span> <span class="nx">depth</span><span class="p">,</span> <span class="nx">refs</span><span class="p">,</span> <span class="nx">printer</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="kd">constructor</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
    <span class="k">return</span> <span class="o">++</span><span class="nx">depth</span> <span class="o">&gt;</span> <span class="nx">config</span><span class="p">.</span><span class="nx">maxDepth</span>
      <span class="p">?</span> <span class="dl">'</span><span class="s1">[</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">]</span><span class="dl">'</span>
      <span class="p">:</span> <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">min</span> <span class="p">?</span> <span class="dl">''</span> <span class="p">:</span> <span class="nx">name</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">)</span> <span class="o">+</span>
          <span class="dl">'</span><span class="s1">[</span><span class="dl">'</span> <span class="o">+</span>
          <span class="nx">serializeItems</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">config</span><span class="p">,</span> <span class="nx">indentation</span><span class="p">,</span> <span class="nx">depth</span><span class="p">,</span> <span class="nx">refs</span><span class="p">,</span> <span class="nx">printer</span><span class="p">)</span> <span class="o">+</span>
          <span class="dl">'</span><span class="s1">]</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">val</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">filter</span><span class="p">:</span> <span class="dl">'</span><span class="s1">completed</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">items</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Write test</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">completed</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Write serialize</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">completed</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">};</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
  <span class="nx">prettyFormat</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span><span class="nx">plugin</span><span class="p">],</span>
  <span class="p">}),</span>
<span class="p">);</span>
<span class="cm">/*
Object {
  "filter": "completed",
  "items": Array [
    Object {
      "completed": true,
      "text": "Write test",
    },
    Object {
      "completed": true,
      "text": "Write serialize",
    },
  ],
}
*/</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
  <span class="nx">prettyFormat</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">indent</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span><span class="nx">plugin</span><span class="p">],</span>
  <span class="p">}),</span>
<span class="p">);</span>
<span class="cm">/*
Object {
    "filter": "completed",
    "items": Array [
        Object {
            "completed": true,
            "text": "Write test",
        },
        Object {
            "completed": true,
            "text": "Write serialize",
        },
    ],
}
*/</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
  <span class="nx">prettyFormat</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">maxDepth</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span><span class="nx">plugin</span><span class="p">],</span>
  <span class="p">}),</span>
<span class="p">);</span>
<span class="cm">/*
Object {
  "filter": "completed",
  "items": [Array],
}
*/</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
  <span class="nx">prettyFormat</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">min</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span><span class="nx">plugin</span><span class="p">],</span>
  <span class="p">}),</span>
<span class="p">);</span>
<span class="cm">/*
{"filter": "completed", "items": [{"completed": true, "text": "Write test"}, {"completed": true, "text": "Write serialize"}]}
*/</span>
</code></pre></div></div>

<h3 id="print">print</h3>

<p>The <strong>original</strong> interface is adequate for plugins:</p>

<ul>
  <li>that <strong>do not</strong> depend on options other than <code class="language-plaintext highlighter-rouge">highlight</code> or <code class="language-plaintext highlighter-rouge">min</code></li>
  <li>that <strong>do not</strong> depend on <code class="language-plaintext highlighter-rouge">depth</code> or <code class="language-plaintext highlighter-rouge">refs</code> in recursive traversal, and</li>
  <li>if values either
    <ul>
      <li>do <strong>not</strong> require indentation, or</li>
      <li>do <strong>not</strong> occur as children of JavaScript data structures (for example, array)</li>
    </ul>
  </li>
</ul>

<p>Write <code class="language-plaintext highlighter-rouge">print</code> to return a string, given the arguments:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">val</code> which “passed the test”</li>
  <li>current <code class="language-plaintext highlighter-rouge">printer(valChild)</code> callback function: serialize children</li>
  <li>current <code class="language-plaintext highlighter-rouge">indenter(lines)</code> callback function: indent lines at the next level</li>
  <li>unchanging <code class="language-plaintext highlighter-rouge">config</code> object: derived from <code class="language-plaintext highlighter-rouge">options</code></li>
  <li>unchanging <code class="language-plaintext highlighter-rouge">colors</code> object: derived from <code class="language-plaintext highlighter-rouge">options</code></li>
</ul>

<p>The 3 properties of <code class="language-plaintext highlighter-rouge">config</code> are <code class="language-plaintext highlighter-rouge">min</code> in <code class="language-plaintext highlighter-rouge">options</code> and:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">spacing</code> and <code class="language-plaintext highlighter-rouge">edgeSpacing</code> are <strong>newline</strong> if <code class="language-plaintext highlighter-rouge">min</code> is <code class="language-plaintext highlighter-rouge">false</code></li>
  <li><code class="language-plaintext highlighter-rouge">spacing</code> is <strong>space</strong> and <code class="language-plaintext highlighter-rouge">edgeSpacing</code> is <strong>empty string</strong> if <code class="language-plaintext highlighter-rouge">min</code> is <code class="language-plaintext highlighter-rouge">true</code></li>
</ul>

<p>Each property of <code class="language-plaintext highlighter-rouge">colors</code> corresponds to a property of <code class="language-plaintext highlighter-rouge">theme</code> in <code class="language-plaintext highlighter-rouge">options</code>:</p>

<ul>
  <li>the key is the same (for example, <code class="language-plaintext highlighter-rouge">tag</code>)</li>
  <li>the value in <code class="language-plaintext highlighter-rouge">colors</code> is a object with <code class="language-plaintext highlighter-rouge">open</code> and <code class="language-plaintext highlighter-rouge">close</code> properties whose values are escape codes from <a href="https://github.com/chalk/ansi-styles">ansi-styles</a> for the color value in <code class="language-plaintext highlighter-rouge">theme</code> (for example, <code class="language-plaintext highlighter-rouge">'cyan'</code>)</li>
</ul>

<h3 id="example-of-print-and-test">Example of print and test</h3>

<p>This plugin prints functions with the <strong>number of named arguments</strong> excluding rest argument.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">plugin</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">print</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">`[Function </span><span class="p">${</span><span class="nx">val</span><span class="p">.</span><span class="nx">name</span> <span class="o">||</span> <span class="dl">'</span><span class="s1">anonymous</span><span class="dl">'</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">val</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="s2">]`</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">test</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">typeof</span> <span class="nx">val</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">function</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">val</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">onClick</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{},</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{},</span>
<span class="p">};</span>

<span class="nx">prettyFormat</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span><span class="nx">plugin</span><span class="p">],</span>
<span class="p">});</span>
<span class="cm">/*
Object {
  "onClick": [Function onClick 1],
  "render": [Function render 0],
}
*/</span>

<span class="nx">prettyFormat</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
<span class="cm">/*
Object {
  "onClick": [Function onClick],
  "render": [Function render],
}
*/</span>
</code></pre></div></div>

<p>This plugin <strong>ignores</strong> the <code class="language-plaintext highlighter-rouge">printFunctionName</code> option. That limitation of the original <code class="language-plaintext highlighter-rouge">print</code> interface is a reason to use the improved <code class="language-plaintext highlighter-rouge">serialize</code> interface, described above.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">prettyFormat</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span><span class="nx">pluginOld</span><span class="p">],</span>
  <span class="na">printFunctionName</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">});</span>
<span class="cm">/*
Object {
  "onClick": [Function onClick 1],
  "render": [Function render 0],
}
*/</span>

<span class="nx">prettyFormat</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">printFunctionName</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">});</span>
<span class="cm">/*
Object {
  "onClick": [Function],
  "render": [Function],
}
*/</span>
</code></pre></div></div>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
