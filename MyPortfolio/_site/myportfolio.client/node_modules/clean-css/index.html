<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>portfolio</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="portfolio" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/myportfolio.client/node_modules/clean-css/" />
<meta property="og:url" content="http://localhost:4000/myportfolio.client/node_modules/clean-css/" />
<meta property="og:site_name" content="portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="portfolio" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"portfolio","url":"http://localhost:4000/myportfolio.client/node_modules/clean-css/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=059dd2210d8f0fb8d42af0cbb5c1b29e59b98886">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">portfolio</a></h1>
      

      <h1 align="center">
  <br />
  <img src="./logo.v2.svg" alt="clean-css logo" width="525px" />
  <br />
  <br />
</h1>

<p><a href="https://www.npmjs.com/package/clean-css"><img src="https://img.shields.io/npm/v/clean-css.svg?style=flat" alt="npm version" /></a>
<a href="https://github.com/clean-css/clean-css/actions?query=workflow%3ATests+branch%3Amaster"><img src="https://img.shields.io/github/workflow/status/clean-css/clean-css/Tests/master" alt="Build Status" /></a>
<a href="https://travis-ci.org/clean-css/clean-css"><img src="https://img.shields.io/travis/clean-css/clean-css/master.svg?style=flat&amp;label=PPC%20Linux%20build" alt="PPC Linux Build Status" /></a>
<a href="https://david-dm.org/clean-css/clean-css"><img src="https://img.shields.io/david/clean-css/clean-css.svg?style=flat" alt="Dependency Status" /></a>
<a href="https://npmcharts.com/compare/clean-css?minimal=true"><img src="https://img.shields.io/npm/dm/clean-css.svg" alt="npm Downloads" /></a></p>

<p>clean-css is a fast and efficient CSS optimizer for <a href="http://nodejs.org/">Node.js</a> platform and <a href="https://clean-css.github.io/">any modern browser</a>.</p>

<p>According to <a href="http://goalsmashers.github.io/css-minification-benchmark/">tests</a> it is one of the best available.</p>

<p><strong>Table of Contents</strong></p>

<ul>
  <li><a href="#nodejs-version-support">Node.js version support</a></li>
  <li><a href="#install">Install</a></li>
  <li><a href="#use">Use</a>
    <ul>
      <li><a href="#whats-new-in-version-53">What’s new in version 5.3</a></li>
      <li><a href="#whats-new-in-version-50">What’s new in version 5.0</a></li>
      <li><a href="#whats-new-in-version-42">What’s new in version 4.2</a></li>
      <li><a href="#whats-new-in-version-41">What’s new in version 4.1</a></li>
      <li><a href="#important-40-breaking-changes">Important: 4.0 breaking changes</a></li>
      <li><a href="#constructor-options">Constructor options</a></li>
      <li><a href="#compatibility-modes">Compatibility modes</a></li>
      <li><a href="#fetch-option">Fetch option</a></li>
      <li><a href="#formatting-options">Formatting options</a></li>
      <li><a href="#inlining-options">Inlining options</a></li>
      <li><a href="#optimization-levels">Optimization levels</a>
        <ul>
          <li><a href="#level-0-optimizations">Level 0 optimizations</a></li>
          <li><a href="#level-1-optimizations">Level 1 optimizations</a></li>
          <li><a href="#level-2-optimizations">Level 2 optimizations</a></li>
        </ul>
      </li>
      <li><a href="#plugins">Plugins</a></li>
      <li><a href="#minify-method">Minify method</a></li>
      <li><a href="#promise-interface">Promise interface</a></li>
      <li><a href="#cli-utility">CLI utility</a></li>
    </ul>
  </li>
  <li><a href="#faq">FAQ</a>
    <ul>
      <li><a href="#how-to-optimize-multiple-files">How to optimize multiple files?</a></li>
      <li><a href="#how-to-process-multiple-files-without-concatenating-them-into-one-output-file">How to process multiple files without concatenating them into one output file?</a></li>
      <li><a href="#how-to-process-remote-imports-correctly">How to process remote <code class="language-plaintext highlighter-rouge">@import</code>s correctly?</a></li>
      <li><a href="#how-to-apply-arbitrary-transformations-to-css-properties">How to apply arbitrary transformations to CSS properties?</a></li>
      <li><a href="#how-to-specify-a-custom-rounding-precision">How to specify a custom rounding precision?</a></li>
      <li><a href="#how-to-keep-a-css-fragment-intact">How to keep a CSS fragment intact?</a></li>
      <li><a href="#how-to-preserve-a-comment-block">How to preserve a comment block?</a></li>
      <li><a href="#how-to-rebase-relative-image-urls">How to rebase relative image URLs?</a></li>
      <li><a href="#how-to-work-with-source-maps">How to work with source maps?</a></li>
      <li><a href="#how-to-apply-level-1--2-optimizations-at-the-same-time">How to apply level 1 &amp; 2 optimizations at the same time?</a></li>
      <li><a href="#what-level-2-optimizations-do">What level 2 optimizations do?</a></li>
      <li><a href="#what-errors-and-warnings-are">What errors and warnings are?</a></li>
      <li><a href="#how-to-use-clean-css-with-build-tools">How to use clean-css with build tools?</a></li>
      <li><a href="#how-to-use-clean-css-from-web-browser">How to use clean-css from web browser?</a></li>
    </ul>
  </li>
  <li><a href="#contributing">Contributing</a>
    <ul>
      <li><a href="#how-to-get-started">How to get started?</a></li>
    </ul>
  </li>
  <li><a href="#acknowledgments">Acknowledgments</a></li>
  <li><a href="#license">License</a></li>
</ul>

<h1 id="nodejs-version-support">Node.js version support</h1>

<p>clean-css requires Node.js 10.0+ (tested on Linux, OS X, and Windows)</p>

<h1 id="install">Install</h1>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install --save-dev clean-css
</code></pre></div></div>

<h1 id="use">Use</h1>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">CleanCSS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">clean-css</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">a{font-weight:bold;}</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="cm">/* options */</span> <span class="p">};</span>
<span class="kd">var</span> <span class="nx">output</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">(</span><span class="nx">options</span><span class="p">).</span><span class="nx">minify</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="whats-new-in-version-53">What’s new in version 5.3</h2>

<p>clean-css 5.3 introduces one new feature:</p>

<ul>
  <li>variables can be optimized using level 1’s <code class="language-plaintext highlighter-rouge">variableValueOptimizers</code> option, which accepts a list of <a href="https://github.com/clean-css/clean-css/blob/master/lib/optimizer/level-1/value-optimizers.js">value optimizers</a> or a list of their names, e.g. <code class="language-plaintext highlighter-rouge">variableValueOptimizers: ['color', 'fraction']</code>.</li>
</ul>

<h2 id="whats-new-in-version-50">What’s new in version 5.0</h2>

<p>clean-css 5.0 introduced some breaking changes:</p>

<ul>
  <li>Node.js 6.x and 8.x are officially no longer supported;</li>
  <li><code class="language-plaintext highlighter-rouge">transform</code> callback in level-1 optimizations is removed in favor of new <a href="#plugins">plugins</a> interface;</li>
  <li>changes default Internet Explorer compatibility from 10+ to &gt;11, to revert the old default use <code class="language-plaintext highlighter-rouge">{ compatibility: 'ie10' }</code> flag;</li>
  <li>changes default <code class="language-plaintext highlighter-rouge">rebase</code> option from <code class="language-plaintext highlighter-rouge">true</code> to <code class="language-plaintext highlighter-rouge">false</code> so URLs are not rebased by default. Please note that if you set <code class="language-plaintext highlighter-rouge">rebaseTo</code> option it still counts as setting <code class="language-plaintext highlighter-rouge">rebase: true</code> to preserve some of the backward compatibility.</li>
</ul>

<p>And on the new features side of things:</p>

<ul>
  <li>format options now accepts numerical values for all breaks, which will allow you to have more control over output formatting, e.g. <code class="language-plaintext highlighter-rouge">format: {breaks: {afterComment: 2}}</code> means clean-css will add two line breaks after each comment</li>
  <li>a new <code class="language-plaintext highlighter-rouge">batch</code> option (defaults to <code class="language-plaintext highlighter-rouge">false</code>) is added, when set to <code class="language-plaintext highlighter-rouge">true</code> it will process all inputs, given either as an array or a hash, without concatenating them.</li>
</ul>

<h2 id="whats-new-in-version-42">What’s new in version 4.2</h2>

<p>clean-css 4.2 introduces the following changes / features:</p>

<ul>
  <li>Adds <code class="language-plaintext highlighter-rouge">process</code> method for compatibility with optimize-css-assets-webpack-plugin;</li>
  <li>new <code class="language-plaintext highlighter-rouge">transition</code> property optimizer;</li>
  <li>preserves any CSS content between <code class="language-plaintext highlighter-rouge">/* clean-css ignore:start */</code> and <code class="language-plaintext highlighter-rouge">/* clean-css ignore:end */</code> comments;</li>
  <li>allows filtering based on selector in <code class="language-plaintext highlighter-rouge">transform</code> callback, see <a href="#how-to-apply-arbitrary-transformations-to-css-properties">example</a>;</li>
  <li>adds configurable line breaks via <code class="language-plaintext highlighter-rouge">format: { breakWith: 'lf' }</code> option.</li>
</ul>

<h2 id="whats-new-in-version-41">What’s new in version 4.1</h2>

<p>clean-css 4.1 introduces the following changes / features:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">inline: false</code> as an alias to <code class="language-plaintext highlighter-rouge">inline: ['none']</code>;</li>
  <li><code class="language-plaintext highlighter-rouge">multiplePseudoMerging</code> compatibility flag controlling merging of rules with multiple pseudo classes / elements;</li>
  <li><code class="language-plaintext highlighter-rouge">removeEmpty</code> flag in level 1 optimizations controlling removal of rules and nested blocks;</li>
  <li><code class="language-plaintext highlighter-rouge">removeEmpty</code> flag in level 2 optimizations controlling removal of rules and nested blocks;</li>
  <li><code class="language-plaintext highlighter-rouge">compatibility: { selectors: { mergeLimit: &lt;number&gt; } }</code> flag in compatibility settings controlling maximum number of selectors in a single rule;</li>
  <li><code class="language-plaintext highlighter-rouge">minify</code> method improved signature accepting a list of hashes for a predictable traversal;</li>
  <li><code class="language-plaintext highlighter-rouge">selectorsSortingMethod</code> level 1 optimization allows <code class="language-plaintext highlighter-rouge">false</code> or <code class="language-plaintext highlighter-rouge">'none'</code> for disabling selector sorting;</li>
  <li><code class="language-plaintext highlighter-rouge">fetch</code> option controlling a function for handling remote requests;</li>
  <li>new <code class="language-plaintext highlighter-rouge">font</code> shorthand and <code class="language-plaintext highlighter-rouge">font-*</code> longhand optimizers;</li>
  <li>removal of <code class="language-plaintext highlighter-rouge">optimizeFont</code> flag in level 1 optimizations due to new <code class="language-plaintext highlighter-rouge">font</code> shorthand optimizer;</li>
  <li><code class="language-plaintext highlighter-rouge">skipProperties</code> flag in level 2 optimizations controlling which properties won’t be optimized;</li>
  <li>new <code class="language-plaintext highlighter-rouge">animation</code> shorthand and <code class="language-plaintext highlighter-rouge">animation-*</code> longhand optimizers;</li>
  <li><code class="language-plaintext highlighter-rouge">removeUnusedAtRules</code> level 2 optimization controlling removal of unused <code class="language-plaintext highlighter-rouge">@counter-style</code>, <code class="language-plaintext highlighter-rouge">@font-face</code>, <code class="language-plaintext highlighter-rouge">@keyframes</code>, and <code class="language-plaintext highlighter-rouge">@namespace</code> at rules;</li>
  <li>the <a href="https://clean-css.github.io/">web interface</a> gets an improved settings panel with “reset to defaults”, instant option changes, and settings being persisted across sessions.</li>
</ul>

<h2 id="important-40-breaking-changes">Important: 4.0 breaking changes</h2>

<p>clean-css 4.0 introduces some breaking changes:</p>

<ul>
  <li>API and CLI interfaces are split, so API stays in this repository while CLI moves to <a href="https://github.com/clean-css/clean-css-cli">clean-css-cli</a>;</li>
  <li><code class="language-plaintext highlighter-rouge">root</code>, <code class="language-plaintext highlighter-rouge">relativeTo</code>, and <code class="language-plaintext highlighter-rouge">target</code> options are replaced by a single <code class="language-plaintext highlighter-rouge">rebaseTo</code> option - this means that rebasing URLs and import inlining is much simpler but may not be (YMMV) as powerful as in 3.x;</li>
  <li><code class="language-plaintext highlighter-rouge">debug</code> option is gone as stats are always provided in output object under <code class="language-plaintext highlighter-rouge">stats</code> property;</li>
  <li><code class="language-plaintext highlighter-rouge">roundingPrecision</code> is disabled by default;</li>
  <li><code class="language-plaintext highlighter-rouge">roundingPrecision</code> applies to <strong>all</strong> units now, not only <code class="language-plaintext highlighter-rouge">px</code> as in 3.x;</li>
  <li><code class="language-plaintext highlighter-rouge">processImport</code> and <code class="language-plaintext highlighter-rouge">processImportFrom</code> are merged into <code class="language-plaintext highlighter-rouge">inline</code> option which defaults to <code class="language-plaintext highlighter-rouge">local</code>. Remote <code class="language-plaintext highlighter-rouge">@import</code> rules are <strong>NOT</strong> inlined by default anymore;</li>
  <li>splits <code class="language-plaintext highlighter-rouge">inliner: { request: ..., timeout: ... }</code> option into <code class="language-plaintext highlighter-rouge">inlineRequest</code> and <code class="language-plaintext highlighter-rouge">inlineTimeout</code> options;</li>
  <li>remote resources without a protocol, e.g. <code class="language-plaintext highlighter-rouge">//fonts.googleapis.com/css?family=Domine:700</code>, are not inlined anymore;</li>
  <li>changes default Internet Explorer compatibility from 9+ to 10+, to revert the old default use <code class="language-plaintext highlighter-rouge">{ compatibility: 'ie9' }</code> flag;</li>
  <li>renames <code class="language-plaintext highlighter-rouge">keepSpecialComments</code> to <code class="language-plaintext highlighter-rouge">specialComments</code>;</li>
  <li>moves <code class="language-plaintext highlighter-rouge">roundingPrecision</code> and <code class="language-plaintext highlighter-rouge">specialComments</code> to level 1 optimizations options, see examples;</li>
  <li>moves <code class="language-plaintext highlighter-rouge">mediaMerging</code>, <code class="language-plaintext highlighter-rouge">restructuring</code>, <code class="language-plaintext highlighter-rouge">semanticMerging</code>, and <code class="language-plaintext highlighter-rouge">shorthandCompacting</code> to level 2 optimizations options, see examples below;</li>
  <li>renames <code class="language-plaintext highlighter-rouge">shorthandCompacting</code> option to <code class="language-plaintext highlighter-rouge">mergeIntoShorthands</code>;</li>
  <li>level 1 optimizations are the new default, up to 3.x it was level 2;</li>
  <li><code class="language-plaintext highlighter-rouge">keepBreaks</code> option is replaced with <code class="language-plaintext highlighter-rouge">{ format: 'keep-breaks' }</code> to ease transition;</li>
  <li><code class="language-plaintext highlighter-rouge">sourceMap</code> option has to be a boolean from now on - to specify an input source map pass it a 2nd argument to <code class="language-plaintext highlighter-rouge">minify</code> method or via a hash instead;</li>
  <li><code class="language-plaintext highlighter-rouge">aggressiveMerging</code> option is removed as aggressive merging is replaced by smarter override merging.</li>
</ul>

<h2 id="constructor-options">Constructor options</h2>

<p>clean-css constructor accepts a hash as a parameter with the following options available:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">compatibility</code> - controls compatibility mode used; defaults to <code class="language-plaintext highlighter-rouge">ie10+</code>; see <a href="#compatibility-modes">compatibility modes</a> for examples;</li>
  <li><code class="language-plaintext highlighter-rouge">fetch</code> - controls a function for handling remote requests; see <a href="#fetch-option">fetch option</a> for examples (since 4.1.0);</li>
  <li><code class="language-plaintext highlighter-rouge">format</code> - controls output CSS formatting; defaults to <code class="language-plaintext highlighter-rouge">false</code>; see <a href="#formatting-options">formatting options</a> for examples;</li>
  <li><code class="language-plaintext highlighter-rouge">inline</code> - controls <code class="language-plaintext highlighter-rouge">@import</code> inlining rules; defaults to <code class="language-plaintext highlighter-rouge">'local'</code>; see <a href="#inlining-options">inlining options</a> for examples;</li>
  <li><code class="language-plaintext highlighter-rouge">inlineRequest</code> - controls extra options for inlining remote <code class="language-plaintext highlighter-rouge">@import</code> rules, can be any of <a href="https://nodejs.org/api/http.html#http_http_request_options_callback">HTTP(S) request options</a>;</li>
  <li><code class="language-plaintext highlighter-rouge">inlineTimeout</code> - controls number of milliseconds after which inlining a remote <code class="language-plaintext highlighter-rouge">@import</code> fails; defaults to 5000;</li>
  <li><code class="language-plaintext highlighter-rouge">level</code> - controls optimization level used; defaults to <code class="language-plaintext highlighter-rouge">1</code>; see <a href="#optimization-levels">optimization levels</a> for examples;</li>
  <li><code class="language-plaintext highlighter-rouge">rebase</code> - controls URL rebasing; defaults to <code class="language-plaintext highlighter-rouge">false</code>;</li>
  <li><code class="language-plaintext highlighter-rouge">rebaseTo</code> - controls a directory to which all URLs are rebased, most likely the directory under which the output file will live; defaults to the current directory;</li>
  <li><code class="language-plaintext highlighter-rouge">returnPromise</code> - controls whether <code class="language-plaintext highlighter-rouge">minify</code> method returns a Promise object or not; defaults to <code class="language-plaintext highlighter-rouge">false</code>; see <a href="#promise-interface">promise interface</a> for examples;</li>
  <li><code class="language-plaintext highlighter-rouge">sourceMap</code> - controls whether an output source map is built; defaults to <code class="language-plaintext highlighter-rouge">false</code>;</li>
  <li><code class="language-plaintext highlighter-rouge">sourceMapInlineSources</code> - controls embedding sources inside a source map’s <code class="language-plaintext highlighter-rouge">sourcesContent</code> field; defaults to false.</li>
</ul>

<h2 id="compatibility-modes">Compatibility modes</h2>

<p>There is a certain number of compatibility mode shortcuts, namely:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">new CleanCSS({ compatibility: '*' })</code> (default) - Internet Explorer 10+ compatibility mode</li>
  <li><code class="language-plaintext highlighter-rouge">new CleanCSS({ compatibility: 'ie9' })</code> - Internet Explorer 9+ compatibility mode</li>
  <li><code class="language-plaintext highlighter-rouge">new CleanCSS({ compatibility: 'ie8' })</code> - Internet Explorer 8+ compatibility mode</li>
  <li><code class="language-plaintext highlighter-rouge">new CleanCSS({ compatibility: 'ie7' })</code> - Internet Explorer 7+ compatibility mode</li>
</ul>

<p>Each of these modes is an alias to a <a href="https://github.com/clean-css/clean-css/blob/master/lib/options/compatibility.js">fine grained configuration</a>, with the following options available:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">compatibility</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">colors</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">hexAlpha</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls 4- and 8-character hex color support</span>
      <span class="na">opacity</span><span class="p">:</span> <span class="kc">true</span> <span class="c1">// controls `rgba()` / `hsla()` color support</span>
    <span class="p">},</span>
    <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">backgroundClipMerging</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls background-clip merging into shorthand</span>
      <span class="na">backgroundOriginMerging</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls background-origin merging into shorthand</span>
      <span class="na">backgroundSizeMerging</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls background-size merging into shorthand</span>
      <span class="na">colors</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls color optimizations</span>
      <span class="na">ieBangHack</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls keeping IE bang hack</span>
      <span class="na">ieFilters</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls keeping IE `filter` / `-ms-filter`</span>
      <span class="na">iePrefixHack</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls keeping IE prefix hack</span>
      <span class="na">ieSuffixHack</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls keeping IE suffix hack</span>
      <span class="na">merging</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls property merging based on understandability</span>
      <span class="na">shorterLengthUnits</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls shortening pixel units into `pc`, `pt`, or `in` units</span>
      <span class="na">spaceAfterClosingBrace</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls keeping space after closing brace - `url() no-repeat` into `url()no-repeat`</span>
      <span class="na">urlQuotes</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls keeping quoting inside `url()`</span>
      <span class="na">zeroUnits</span><span class="p">:</span> <span class="kc">true</span> <span class="c1">// controls removal of units `0` value</span>
    <span class="p">},</span>
    <span class="na">selectors</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">adjacentSpace</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls extra space before `nav` element</span>
      <span class="na">ie7Hack</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls removal of IE7 selector hacks, e.g. `*+html...`</span>
      <span class="na">mergeablePseudoClasses</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">:active</span><span class="dl">'</span><span class="p">,</span> <span class="p">...],</span> <span class="c1">// controls a whitelist of mergeable pseudo classes</span>
      <span class="na">mergeablePseudoElements</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">::after</span><span class="dl">'</span><span class="p">,</span> <span class="p">...],</span> <span class="c1">// controls a whitelist of mergeable pseudo elements</span>
      <span class="na">mergeLimit</span><span class="p">:</span> <span class="mi">8191</span><span class="p">,</span> <span class="c1">// controls maximum number of selectors in a single rule (since 4.1.0)</span>
      <span class="na">multiplePseudoMerging</span><span class="p">:</span> <span class="kc">true</span> <span class="c1">// controls merging of rules with multiple pseudo classes / elements (since 4.1.0)</span>
    <span class="p">},</span>
    <span class="na">units</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">ch</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls treating `ch` as a supported unit</span>
      <span class="na">in</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls treating `in` as a supported unit</span>
      <span class="na">pc</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls treating `pc` as a supported unit</span>
      <span class="na">pt</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls treating `pt` as a supported unit</span>
      <span class="na">rem</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls treating `rem` as a supported unit</span>
      <span class="na">vh</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls treating `vh` as a supported unit</span>
      <span class="na">vm</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls treating `vm` as a supported unit</span>
      <span class="na">vmax</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls treating `vmax` as a supported unit</span>
      <span class="na">vmin</span><span class="p">:</span> <span class="kc">true</span> <span class="c1">// controls treating `vmin` as a supported unit</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div>

<p>You can also use a string when setting a compatibility mode, e.g.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">compatibility</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ie9,-properties.merging</span><span class="dl">'</span> <span class="c1">// sets compatibility to IE9 mode with disabled property merging</span>
<span class="p">})</span>
</code></pre></div></div>

<h2 id="fetch-option">Fetch option</h2>

<p>The <code class="language-plaintext highlighter-rouge">fetch</code> option accepts a function which handles remote resource fetching, e.g.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">@import url(http://example.com/path/to/stylesheet.css);</span><span class="dl">'</span><span class="p">;</span>
<span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">fetch</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">uri</span><span class="p">,</span> <span class="nx">inlineRequest</span><span class="p">,</span> <span class="nx">inlineTimeout</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">request</span><span class="p">(</span><span class="nx">uri</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">callback</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">response</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">callback</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">body</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}).</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">);</span>
</code></pre></div></div>

<p>This option provides a convenient way of overriding the default fetching logic if it doesn’t support a particular feature, say CONNECT proxies.</p>

<p>Unless given, the default <a href="https://github.com/clean-css/clean-css/blob/master/lib/reader/load-remote-resource.js">loadRemoteResource</a> logic is used.</p>

<h2 id="formatting-options">Formatting options</h2>

<p>By default output CSS is formatted without any whitespace unless a <code class="language-plaintext highlighter-rouge">format</code> option is given.
First of all there are two shorthands:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">format</span><span class="p">:</span> <span class="dl">'</span><span class="s1">beautify</span><span class="dl">'</span> <span class="c1">// formats output in a really nice way</span>
<span class="p">})</span>
</code></pre></div></div>

<p>and</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">format</span><span class="p">:</span> <span class="dl">'</span><span class="s1">keep-breaks</span><span class="dl">'</span> <span class="c1">// formats output the default way but adds line breaks for improved readability</span>
<span class="p">})</span>
</code></pre></div></div>

<p>however <code class="language-plaintext highlighter-rouge">format</code> option also accept a fine-grained set of options:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">format</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">breaks</span><span class="p">:</span> <span class="p">{</span> <span class="c1">// controls where to insert breaks</span>
      <span class="na">afterAtRule</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls if a line break comes after an at-rule; e.g. `@charset`; defaults to `false`</span>
      <span class="na">afterBlockBegins</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls if a line break comes after a block begins; e.g. `@media`; defaults to `false`</span>
      <span class="na">afterBlockEnds</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls if a line break comes after a block ends, defaults to `false`</span>
      <span class="na">afterComment</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls if a line break comes after a comment; defaults to `false`</span>
      <span class="na">afterProperty</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls if a line break comes after a property; defaults to `false`</span>
      <span class="na">afterRuleBegins</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls if a line break comes after a rule begins; defaults to `false`</span>
      <span class="na">afterRuleEnds</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls if a line break comes after a rule ends; defaults to `false`</span>
      <span class="na">beforeBlockEnds</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls if a line break comes before a block ends; defaults to `false`</span>
      <span class="na">betweenSelectors</span><span class="p">:</span> <span class="kc">false</span> <span class="c1">// controls if a line break comes between selectors; defaults to `false`</span>
    <span class="p">},</span>
    <span class="na">breakWith</span><span class="p">:</span> <span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// controls the new line character, can be `'\r\n'` or `'\n'` (aliased as `'windows'` and `'unix'` or `'crlf'` and `'lf'`); defaults to system one, so former on Windows and latter on Unix</span>
    <span class="na">indentBy</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">// controls number of characters to indent with; defaults to `0`</span>
    <span class="na">indentWith</span><span class="p">:</span> <span class="dl">'</span><span class="s1">space</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// controls a character to indent with, can be `'space'` or `'tab'`; defaults to `'space'`</span>
    <span class="na">spaces</span><span class="p">:</span> <span class="p">{</span> <span class="c1">// controls where to insert spaces</span>
      <span class="na">aroundSelectorRelation</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls if spaces come around selector relations; e.g. `div &gt; a`; defaults to `false`</span>
      <span class="na">beforeBlockBegins</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls if a space comes before a block begins; e.g. `.block {`; defaults to `false`</span>
      <span class="na">beforeValue</span><span class="p">:</span> <span class="kc">false</span> <span class="c1">// controls if a space comes before a value; e.g. `width: 1rem`; defaults to `false`</span>
    <span class="p">},</span>
    <span class="na">wrapAt</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls maximum line length; defaults to `false`</span>
    <span class="na">semicolonAfterLastProperty</span><span class="p">:</span> <span class="kc">false</span> <span class="c1">// controls removing trailing semicolons in rule; defaults to `false` - means remove</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div>

<p>Also since clean-css 5.0 you can use numerical values for all line breaks, which will repeat a line break that many times, e.g:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
    <span class="na">format</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">breaks</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">afterAtRule</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="na">afterBlockBegins</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// 1 is synonymous with `true`</span>
        <span class="na">afterBlockEnds</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="na">afterComment</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="na">afterProperty</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="na">afterRuleBegins</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="na">afterRuleEnds</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="na">beforeBlockEnds</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="na">betweenSelectors</span><span class="p">:</span> <span class="mi">0</span> <span class="c1">// 0 is synonymous with `false`</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">})</span>
</code></pre></div></div>

<p>which will add nicer spacing between at rules and blocks.</p>

<h2 id="inlining-options">Inlining options</h2>

<p><code class="language-plaintext highlighter-rouge">inline</code> option whitelists which <code class="language-plaintext highlighter-rouge">@import</code> rules will be processed, e.g.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">inline</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">local</span><span class="dl">'</span><span class="p">]</span> <span class="c1">// default; enables local inlining only</span>
<span class="p">})</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">inline</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">none</span><span class="dl">'</span><span class="p">]</span> <span class="c1">// disables all inlining</span>
<span class="p">})</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// introduced in clean-css 4.1.0</span>

<span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">inline</span><span class="p">:</span> <span class="kc">false</span> <span class="c1">// disables all inlining (alias to `['none']`)</span>
<span class="p">})</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">inline</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="p">]</span> <span class="c1">// enables all inlining, same as ['local', 'remote']</span>
<span class="p">})</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">inline</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">local</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">mydomain.example.com</span><span class="dl">'</span><span class="p">]</span> <span class="c1">// enables local inlining plus given remote source</span>
<span class="p">})</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">inline</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">local</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">remote</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">!fonts.googleapis.com</span><span class="dl">'</span><span class="p">]</span> <span class="c1">// enables all inlining but from given remote source</span>
<span class="p">})</span>
</code></pre></div></div>

<h2 id="optimization-levels">Optimization levels</h2>

<p>The <code class="language-plaintext highlighter-rouge">level</code> option can be either <code class="language-plaintext highlighter-rouge">0</code>, <code class="language-plaintext highlighter-rouge">1</code> (default), or <code class="language-plaintext highlighter-rouge">2</code>, e.g.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">level</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">})</span>
</code></pre></div></div>

<p>or a fine-grained configuration given via a hash.</p>

<p>Please note that level 1 optimization options are generally safe while level 2 optimizations should be safe for most users.</p>

<h3 id="level-0-optimizations">Level 0 optimizations</h3>

<p>Level 0 optimizations simply means “no optimizations”. Use it when you’d like to inline imports and / or rebase URLs but skip everything else.</p>

<h3 id="level-1-optimizations">Level 1 optimizations</h3>

<p>Level 1 optimizations (default) operate on single properties only, e.g. can remove units when not required, turn rgb colors to a shorter hex representation, remove comments, etc</p>

<p>Here is a full list of available options:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">level</span><span class="p">:</span> <span class="p">{</span>
    <span class="mi">1</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">cleanupCharsets</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls `@charset` moving to the front of a stylesheet; defaults to `true`</span>
      <span class="na">normalizeUrls</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls URL normalization; defaults to `true`</span>
      <span class="na">optimizeBackground</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls `background` property optimizations; defaults to `true`</span>
      <span class="na">optimizeBorderRadius</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls `border-radius` property optimizations; defaults to `true`</span>
      <span class="na">optimizeFilter</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls `filter` property optimizations; defaults to `true`</span>
      <span class="na">optimizeFont</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls `font` property optimizations; defaults to `true`</span>
      <span class="na">optimizeFontWeight</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls `font-weight` property optimizations; defaults to `true`</span>
      <span class="na">optimizeOutline</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls `outline` property optimizations; defaults to `true`</span>
      <span class="na">removeEmpty</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls removing empty rules and nested blocks; defaults to `true`</span>
      <span class="na">removeNegativePaddings</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls removing negative paddings; defaults to `true`</span>
      <span class="na">removeQuotes</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls removing quotes when unnecessary; defaults to `true`</span>
      <span class="na">removeWhitespace</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls removing unused whitespace; defaults to `true`</span>
      <span class="na">replaceMultipleZeros</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// contols removing redundant zeros; defaults to `true`</span>
      <span class="na">replaceTimeUnits</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls replacing time units with shorter values; defaults to `true`</span>
      <span class="na">replaceZeroUnits</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls replacing zero values with units; defaults to `true`</span>
      <span class="na">roundingPrecision</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// rounds pixel values to `N` decimal places; `false` disables rounding; defaults to `false`</span>
      <span class="na">selectorsSortingMethod</span><span class="p">:</span> <span class="dl">'</span><span class="s1">standard</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// denotes selector sorting method; can be `'natural'` or `'standard'`, `'none'`, or false (the last two since 4.1.0); defaults to `'standard'`</span>
      <span class="na">specialComments</span><span class="p">:</span> <span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// denotes a number of /*! ... */ comments preserved; defaults to `all`</span>
      <span class="na">tidyAtRules</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls at-rules (e.g. `@charset`, `@import`) optimizing; defaults to `true`</span>
      <span class="na">tidyBlockScopes</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls block scopes (e.g. `@media`) optimizing; defaults to `true`</span>
      <span class="na">tidySelectors</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls selectors optimizing; defaults to `true`,</span>
      <span class="na">variableValueOptimizers</span><span class="p">:</span> <span class="p">[]</span> <span class="c1">// controls value optimizers which are applied to variables</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>There is an <code class="language-plaintext highlighter-rouge">all</code> shortcut for toggling all options at the same time, e.g.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">level</span><span class="p">:</span> <span class="p">{</span>
    <span class="mi">1</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">all</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// set all values to `false`</span>
      <span class="na">tidySelectors</span><span class="p">:</span> <span class="kc">true</span> <span class="c1">// turns on optimizing selectors</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="level-2-optimizations">Level 2 optimizations</h3>

<p>Level 2 optimizations operate at rules or multiple properties level, e.g. can remove duplicate rules, remove properties redefined further down a stylesheet, or restructure rules by moving them around.</p>

<p>Please note that if level 2 optimizations are turned on then, unless explicitely disabled, level 1 optimizations are applied as well.</p>

<p>Here is a full list of available options:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">level</span><span class="p">:</span> <span class="p">{</span>
    <span class="mi">2</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">mergeAdjacentRules</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls adjacent rules merging; defaults to true</span>
      <span class="na">mergeIntoShorthands</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls merging properties into shorthands; defaults to true</span>
      <span class="na">mergeMedia</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls `@media` merging; defaults to true</span>
      <span class="na">mergeNonAdjacentRules</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls non-adjacent rule merging; defaults to true</span>
      <span class="na">mergeSemantically</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls semantic merging; defaults to false</span>
      <span class="na">overrideProperties</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls property overriding based on understandability; defaults to true</span>
      <span class="na">removeEmpty</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls removing empty rules and nested blocks; defaults to `true`</span>
      <span class="na">reduceNonAdjacentRules</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls non-adjacent rule reducing; defaults to true</span>
      <span class="na">removeDuplicateFontRules</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls duplicate `@font-face` removing; defaults to true</span>
      <span class="na">removeDuplicateMediaBlocks</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls duplicate `@media` removing; defaults to true</span>
      <span class="na">removeDuplicateRules</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// controls duplicate rules removing; defaults to true</span>
      <span class="na">removeUnusedAtRules</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls unused at rule removing; defaults to false (available since 4.1.0)</span>
      <span class="na">restructureRules</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// controls rule restructuring; defaults to false</span>
      <span class="na">skipProperties</span><span class="p">:</span> <span class="p">[]</span> <span class="c1">// controls which properties won't be optimized, defaults to `[]` which means all will be optimized (since 4.1.0)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>There is an <code class="language-plaintext highlighter-rouge">all</code> shortcut for toggling all options at the same time, e.g.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">level</span><span class="p">:</span> <span class="p">{</span>
    <span class="mi">2</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">all</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// sets all values to `false`</span>
      <span class="na">removeDuplicateRules</span><span class="p">:</span> <span class="kc">true</span> <span class="c1">// turns on removing duplicate rules</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="plugins">Plugins</h2>

<p>In clean-css version 5 and above you can define plugins which run alongside level 1 and level 2 optimizations, e.g.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">myPlugin</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">level1</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">property</span><span class="p">:</span> <span class="kd">function</span> <span class="nx">removeRepeatedBackgroundRepeat</span><span class="p">(</span><span class="nx">_rule</span><span class="p">,</span> <span class="nx">property</span><span class="p">,</span> <span class="nx">_options</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// So `background-repeat:no-repeat no-repeat` becomes `background-repeat:no-repeat`</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">property</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">background-repeat</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="nx">property</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nx">property</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="nx">property</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
        <span class="nx">property</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
        <span class="nx">property</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span><span class="na">plugins</span><span class="p">:</span> <span class="p">[</span><span class="nx">myPlugin</span><span class="p">]})</span>

</code></pre></div></div>

<p>Search <code class="language-plaintext highlighter-rouge">test\module-test.js</code> for <code class="language-plaintext highlighter-rouge">plugins</code> or check out <code class="language-plaintext highlighter-rouge">lib/optimizer/level-1/property-optimizers</code> and <code class="language-plaintext highlighter-rouge">lib/optimizer/level-1/value-optimizers</code> for more examples.</p>

<p><strong>Important</strong>: To rewrite your old <code class="language-plaintext highlighter-rouge">transform</code> as a plugin, check out <a href="https://github.com/clean-css/clean-css/commit/b6ddc523267fc42cf0f6bd1626a79cad97319e17#diff-a71ef45f934725cdb25860dc0b606bcd59e3acee9788cd6df4f9d05339e8a153">this commit</a>.</p>

<h2 id="minify-method">Minify method</h2>

<p>Once configured clean-css provides a <code class="language-plaintext highlighter-rouge">minify</code> method to optimize a given CSS, e.g.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">output</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">(</span><span class="nx">options</span><span class="p">).</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">);</span>
</code></pre></div></div>

<p>The output of the <code class="language-plaintext highlighter-rouge">minify</code> method is a hash with following fields:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">styles</span><span class="p">);</span> <span class="c1">// optimized output CSS as a string</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">sourceMap</span><span class="p">);</span> <span class="c1">// output source map if requested with `sourceMap` option</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">errors</span><span class="p">);</span> <span class="c1">// a list of errors raised</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">warnings</span><span class="p">);</span> <span class="c1">// a list of warnings raised</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">originalSize</span><span class="p">);</span> <span class="c1">// original content size after import inlining</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">minifiedSize</span><span class="p">);</span> <span class="c1">// optimized content size</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">timeSpent</span><span class="p">);</span> <span class="c1">// time spent on optimizations in milliseconds</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">efficiency</span><span class="p">);</span> <span class="c1">// `(originalSize - minifiedSize) / originalSize`, e.g. 0.25 if size is reduced from 100 bytes to 75 bytes</span>
</code></pre></div></div>
<p>Example: Minifying a CSS string:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">CleanCSS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">clean-css</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">output</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">().</span><span class="nx">minify</span><span class="p">(</span><span class="s2">`

  a {
    color: blue;
  }
  div {
    margin: 5px
  }

`</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">);</span>

<span class="c1">// Log:</span>
<span class="p">{</span>
  <span class="na">styles</span><span class="p">:</span> <span class="dl">'</span><span class="s1">a{color:#00f}div{margin:5px}</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">stats</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">efficiency</span><span class="p">:</span> <span class="mf">0.6704545454545454</span><span class="p">,</span>
    <span class="na">minifiedSize</span><span class="p">:</span> <span class="mi">29</span><span class="p">,</span>
    <span class="na">originalSize</span><span class="p">:</span> <span class="mi">88</span><span class="p">,</span>
    <span class="na">timeSpent</span><span class="p">:</span> <span class="mi">6</span>
  <span class="p">},</span>
  <span class="na">errors</span><span class="p">:</span> <span class="p">[],</span>
  <span class="na">inlinedStylesheets</span><span class="p">:</span> <span class="p">[],</span>
  <span class="na">warnings</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">minify</code> method also accepts an input source map, e.g.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">output</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">(</span><span class="nx">options</span><span class="p">).</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="nx">inputSourceMap</span><span class="p">);</span>
</code></pre></div></div>

<p>or a callback invoked when optimizations are finished, e.g.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">(</span><span class="nx">options</span><span class="p">).</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">output</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// `output` is the same as in the synchronous call above</span>
<span class="p">});</span>
</code></pre></div></div>

<p>To optimize a single file, without reading it first, pass a path to it to <code class="language-plaintext highlighter-rouge">minify</code> method as follows:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">output</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">(</span><span class="nx">options</span><span class="p">).</span><span class="nx">minify</span><span class="p">([</span><span class="dl">'</span><span class="s1">path/to/file.css</span><span class="dl">'</span><span class="p">])</span>
</code></pre></div></div>

<p>(if you won’t enclose the path in an array, it will be treated as a CSS source instead).</p>

<p>There are several ways to optimize multiple files at the same time, see <a href="#how-to-optimize-multiple-files">How to optimize multiple files?</a>.</p>

<h2 id="promise-interface">Promise interface</h2>

<p>If you prefer clean-css to return a Promise object then you need to explicitely ask for it, e.g.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span> <span class="na">returnPromise</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">output</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">styles</span><span class="p">);</span> <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// deal with errors });</span>
</code></pre></div></div>

<h2 id="cli-utility">CLI utility</h2>

<p>Clean-css has an associated command line utility that can be installed separately using <code class="language-plaintext highlighter-rouge">npm install clean-css-cli</code>. For more detailed information, please visit https://github.com/clean-css/clean-css-cli.</p>

<h1 id="faq">FAQ</h1>

<h2 id="how-to-optimize-multiple-files">How to optimize multiple files?</h2>

<p>It can be done either by passing an array of paths, or, when sources are already available, a hash or an array of hashes:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">().</span><span class="nx">minify</span><span class="p">([</span><span class="dl">'</span><span class="s1">path/to/file/one</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">path/to/file/two</span><span class="dl">'</span><span class="p">]);</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">().</span><span class="nx">minify</span><span class="p">({</span>
  <span class="dl">'</span><span class="s1">path/to/file/one</span><span class="dl">'</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">styles</span><span class="p">:</span> <span class="dl">'</span><span class="s1">contents of file one</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="dl">'</span><span class="s1">path/to/file/two</span><span class="dl">'</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">styles</span><span class="p">:</span> <span class="dl">'</span><span class="s1">contents of file two</span><span class="dl">'</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">().</span><span class="nx">minify</span><span class="p">([</span>
  <span class="p">{</span><span class="dl">'</span><span class="s1">path/to/file/one</span><span class="dl">'</span><span class="p">:</span> <span class="p">{</span><span class="na">styles</span><span class="p">:</span> <span class="dl">'</span><span class="s1">contents of file one</span><span class="dl">'</span><span class="p">}},</span>
  <span class="p">{</span><span class="dl">'</span><span class="s1">path/to/file/two</span><span class="dl">'</span><span class="p">:</span> <span class="p">{</span><span class="na">styles</span><span class="p">:</span> <span class="dl">'</span><span class="s1">contents of file two</span><span class="dl">'</span><span class="p">}}</span>
<span class="p">]);</span>
</code></pre></div></div>

<p>Passing an array of hashes allows you to explicitly specify the order in which the input files are concatenated. Whereas when you use a single hash the order is determined by the <a href="http://2ality.com/2015/10/property-traversal-order-es6.html">traversal order of object properties</a> - available since 4.1.0.</p>

<p>Important note - any <code class="language-plaintext highlighter-rouge">@import</code> rules already present in the hash will be resolved in memory.</p>

<h2 id="how-to-process-multiple-files-without-concatenating-them-into-one-output-file">How to process multiple files without concatenating them into one output file?</h2>

<p>Since clean-css 5.0 you can, when passing an array of paths, hash, or array of hashes (see above), ask clean-css not to join styles into one output, but instead return stylesheets optimized one by one, e.g.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">output</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span> <span class="na">batch</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}).</span><span class="nx">minify</span><span class="p">([</span><span class="dl">'</span><span class="s1">path/to/file/one</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">path/to/file/two</span><span class="dl">'</span><span class="p">]);</span>
<span class="kd">var</span> <span class="nx">outputOfFile1</span> <span class="o">=</span> <span class="nx">output</span><span class="p">[</span><span class="dl">'</span><span class="s1">path/to/file/one</span><span class="dl">'</span><span class="p">].</span><span class="nx">styles</span> <span class="c1">// all other fields, like errors, warnings, or stats are there too</span>
<span class="kd">var</span> <span class="nx">outputOfFile2</span> <span class="o">=</span> <span class="nx">output</span><span class="p">[</span><span class="dl">'</span><span class="s1">path/to/file/two</span><span class="dl">'</span><span class="p">].</span><span class="nx">styles</span>
</code></pre></div></div>

<h2 id="how-to-process-remote-imports-correctly">How to process remote <code class="language-plaintext highlighter-rouge">@import</code>s correctly?</h2>

<p>In order to inline remote <code class="language-plaintext highlighter-rouge">@import</code> statements you need to provide a callback to minify method as fetching remote assets is an asynchronous operation, e.g.:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">@import url(http://example.com/path/to/remote/styles);</span><span class="dl">'</span><span class="p">;</span>
<span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span> <span class="na">inline</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">remote</span><span class="dl">'</span><span class="p">]</span> <span class="p">}).</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">output</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// output.styles</span>
<span class="p">});</span>
</code></pre></div></div>

<p>If you don’t provide a callback, then remote <code class="language-plaintext highlighter-rouge">@import</code>s will be left as is.</p>

<h2 id="how-to-apply-arbitrary-transformations-to-css-properties">How to apply arbitrary transformations to CSS properties?</h2>

<p>Please see <a href="#plugins">plugins</a>.</p>

<h2 id="how-to-specify-a-custom-rounding-precision">How to specify a custom rounding precision?</h2>

<p>The level 1 <code class="language-plaintext highlighter-rouge">roundingPrecision</code> optimization option accept a string with per-unit rounding precision settings, e.g.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">level</span><span class="p">:</span> <span class="p">{</span>
    <span class="mi">1</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">roundingPrecision</span><span class="p">:</span> <span class="dl">'</span><span class="s1">all=3,px=5</span><span class="dl">'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}).</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span>
</code></pre></div></div>

<p>which sets all units rounding precision to 3 digits except <code class="language-plaintext highlighter-rouge">px</code> unit precision of 5 digits.</p>

<h2 id="how-to-optimize-a-stylesheet-with-custom-rpx-units">How to optimize a stylesheet with custom <code class="language-plaintext highlighter-rouge">rpx</code> units?</h2>

<p>Since <code class="language-plaintext highlighter-rouge">rpx</code> is a non standard unit (see <a href="https://github.com/clean-css/clean-css/issues/1074">#1074</a>), it will be dropped by default as an invalid value.</p>

<p>However you can treat <code class="language-plaintext highlighter-rouge">rpx</code> units as regular ones:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">compatibility</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">customUnits</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">rpx</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}).</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="how-to-keep-a-css-fragment-intact">How to keep a CSS fragment intact?</h2>

<p>Note: available since 4.2.0.</p>

<p>Wrap the CSS fragment in special comments which instruct clean-css to preserve it, e.g.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.block-1</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="no">red</span>
<span class="p">}</span>
<span class="c">/* clean-css ignore:start */</span>
<span class="nc">.block-special</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="nb">transparent</span>
<span class="p">}</span>
<span class="c">/* clean-css ignore:end */</span>
<span class="nc">.block-2</span> <span class="p">{</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Optimizing this CSS will result in the following output:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.block-1</span><span class="p">{</span><span class="nl">color</span><span class="p">:</span><span class="no">red</span><span class="p">}</span>
<span class="nc">.block-special</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="nb">transparent</span>
<span class="p">}</span>
<span class="nc">.block-2</span><span class="p">{</span><span class="nl">margin</span><span class="p">:</span><span class="m">0</span><span class="p">}</span>
</code></pre></div></div>

<h2 id="how-to-preserve-a-comment-block">How to preserve a comment block?</h2>

<p>Use the <code class="language-plaintext highlighter-rouge">/*!</code> notation instead of the standard one <code class="language-plaintext highlighter-rouge">/*</code>:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">/*!
  Important comments included in optimized output.
*/</span>
</code></pre></div></div>

<h2 id="how-to-rebase-relative-image-urls">How to rebase relative image URLs?</h2>

<p>clean-css will handle it automatically for you in the following cases:</p>

<ul>
  <li>when full paths to input files are passed in as options;</li>
  <li>when correct paths are passed in via a hash;</li>
  <li>when <code class="language-plaintext highlighter-rouge">rebaseTo</code> is used with any of above two.</li>
</ul>

<h2 id="how-to-work-with-source-maps">How to work with source maps?</h2>

<p>To generate a source map, use <code class="language-plaintext highlighter-rouge">sourceMap: true</code> option, e.g.:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span> <span class="na">sourceMap</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">rebaseTo</span><span class="p">:</span> <span class="nx">pathToOutputDirectory</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">output</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// access output.sourceMap for SourceMapGenerator object</span>
    <span class="c1">// see https://github.com/mozilla/source-map/#sourcemapgenerator for more details</span>
<span class="p">});</span>
</code></pre></div></div>

<p>You can also pass an input source map directly as a 2nd argument to <code class="language-plaintext highlighter-rouge">minify</code> method:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span> <span class="na">sourceMap</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">rebaseTo</span><span class="p">:</span> <span class="nx">pathToOutputDirectory</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="nx">inputSourceMap</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">output</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// access output.sourceMap to access SourceMapGenerator object</span>
    <span class="c1">// see https://github.com/mozilla/source-map/#sourcemapgenerator for more details</span>
<span class="p">});</span>
</code></pre></div></div>

<p>or even multiple input source maps at once:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span> <span class="na">sourceMap</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">rebaseTo</span><span class="p">:</span> <span class="nx">pathToOutputDirectory</span> <span class="p">}).</span><span class="nx">minify</span><span class="p">({</span>
  <span class="dl">'</span><span class="s1">path/to/source/1</span><span class="dl">'</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">styles</span><span class="p">:</span> <span class="dl">'</span><span class="s1">...styles...</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">sourceMap</span><span class="p">:</span> <span class="dl">'</span><span class="s1">...source-map...</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="dl">'</span><span class="s1">path/to/source/2</span><span class="dl">'</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">styles</span><span class="p">:</span> <span class="dl">'</span><span class="s1">...styles...</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">sourceMap</span><span class="p">:</span> <span class="dl">'</span><span class="s1">...source-map...</span><span class="dl">'</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">output</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// access output.sourceMap as above</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="how-to-apply-level-1--2-optimizations-at-the-same-time">How to apply level 1 &amp; 2 optimizations at the same time?</h2>

<p>Using the hash configuration specifying both optimization levels, e.g.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">({</span>
  <span class="na">level</span><span class="p">:</span> <span class="p">{</span>
    <span class="mi">1</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">all</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="na">normalizeUrls</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">},</span>
    <span class="mi">2</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">restructureRules</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div>

<p>will apply level 1 optimizations, except url normalization, and default level 2 optimizations with rule restructuring.</p>

<h2 id="what-level-2-optimizations-do">What level 2 optimizations do?</h2>

<p>All level 2 optimizations are dispatched <a href="https://github.com/clean-css/clean-css/blob/master/lib/optimizer/level-2/optimize.js#L67">here</a>, and this is what they do:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">recursivelyOptimizeBlocks</code> - does all the following operations on a nested block, like <code class="language-plaintext highlighter-rouge">@media</code> or <code class="language-plaintext highlighter-rouge">@keyframe</code>;</li>
  <li><code class="language-plaintext highlighter-rouge">recursivelyOptimizeProperties</code> - optimizes properties in rulesets and flat at-rules, like @font-face, by splitting them into components (e.g. <code class="language-plaintext highlighter-rouge">margin</code> into <code class="language-plaintext highlighter-rouge">margin-(bottom|left|right|top)</code>), optimizing, and restoring them back. You may want to use <code class="language-plaintext highlighter-rouge">mergeIntoShorthands</code> option to control whether you want to turn multiple components into shorthands;</li>
  <li><code class="language-plaintext highlighter-rouge">removeDuplicates</code> - gets rid of duplicate rulesets with exactly the same set of properties, e.g. when including a Sass / Less partial twice for no good reason;</li>
  <li><code class="language-plaintext highlighter-rouge">mergeAdjacent</code> - merges adjacent rulesets with the same selector or rules;</li>
  <li><code class="language-plaintext highlighter-rouge">reduceNonAdjacent</code> - identifies which properties are overridden in same-selector non-adjacent rulesets, and removes them;</li>
  <li><code class="language-plaintext highlighter-rouge">mergeNonAdjacentBySelector</code> - identifies same-selector non-adjacent rulesets which can be moved (!) to be merged, requires all intermediate rulesets to not redefine the moved properties, or if redefined to have the same value;</li>
  <li><code class="language-plaintext highlighter-rouge">mergeNonAdjacentByBody</code> - same as the one above but for same-selector non-adjacent rulesets;</li>
  <li><code class="language-plaintext highlighter-rouge">restructure</code> - tries to reorganize different-selector different-rules rulesets so they take less space, e.g. <code class="language-plaintext highlighter-rouge">.one{padding:0}.two{margin:0}.one{margin-bottom:3px}</code> into <code class="language-plaintext highlighter-rouge">.two{margin:0}.one{padding:0;margin-bottom:3px}</code>;</li>
  <li><code class="language-plaintext highlighter-rouge">removeDuplicateFontAtRules</code> - removes duplicated <code class="language-plaintext highlighter-rouge">@font-face</code> rules;</li>
  <li><code class="language-plaintext highlighter-rouge">removeDuplicateMediaQueries</code> - removes duplicated <code class="language-plaintext highlighter-rouge">@media</code> nested blocks;</li>
  <li><code class="language-plaintext highlighter-rouge">mergeMediaQueries</code> - merges non-adjacent <code class="language-plaintext highlighter-rouge">@media</code> at-rules by the same rules as <code class="language-plaintext highlighter-rouge">mergeNonAdjacentBy*</code> above;</li>
</ul>

<h2 id="what-errors-and-warnings-are">What errors and warnings are?</h2>

<p>If clean-css encounters invalid CSS, it will try to remove the invalid part and continue optimizing the rest of the code. It will make you aware of the problem by generating an error or warning. Although clean-css can work with invalid CSS, it is always recommended that you fix warnings and errors in your CSS.</p>

<p>Example: Minify invalid CSS, resulting in two warnings:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">CleanCSS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">clean-css</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">output</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">().</span><span class="nx">minify</span><span class="p">(</span><span class="s2">`

  a {
    -notarealproperty-: 5px;
    color:
  }
  div {
    margin: 5px
  }

`</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">);</span>

<span class="c1">// Log:</span>
<span class="p">{</span>
  <span class="na">styles</span><span class="p">:</span> <span class="dl">'</span><span class="s1">div{margin:5px}</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">stats</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">efficiency</span><span class="p">:</span> <span class="mf">0.8695652173913043</span><span class="p">,</span>
    <span class="na">minifiedSize</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
    <span class="na">originalSize</span><span class="p">:</span> <span class="mi">115</span><span class="p">,</span>
    <span class="na">timeSpent</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="na">errors</span><span class="p">:</span> <span class="p">[],</span>
  <span class="na">inlinedStylesheets</span><span class="p">:</span> <span class="p">[],</span>
  <span class="na">warnings</span><span class="p">:</span> <span class="p">[</span>
    <span class="dl">"</span><span class="s2">Invalid property name '-notarealproperty-' at 4:8. Ignoring.</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Empty property 'color' at 5:8. Ignoring.</span><span class="dl">"</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Example: Minify invalid CSS, resulting in one error:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">CleanCSS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">clean-css</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">output</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">().</span><span class="nx">minify</span><span class="p">(</span><span class="s2">`

  @import "idontexist.css";
  a {
    color: blue;
  }
  div {
    margin: 5px
  }

`</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">);</span>

<span class="c1">// Log:</span>
<span class="p">{</span>
  <span class="na">styles</span><span class="p">:</span> <span class="dl">'</span><span class="s1">a{color:#00f}div{margin:5px}</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">stats</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">efficiency</span><span class="p">:</span> <span class="mf">0.7627118644067796</span><span class="p">,</span>
    <span class="na">minifiedSize</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span>
    <span class="na">originalSize</span><span class="p">:</span> <span class="mi">118</span><span class="p">,</span>
    <span class="na">timeSpent</span><span class="p">:</span> <span class="mi">2</span>
  <span class="p">},</span>
  <span class="na">errors</span><span class="p">:</span> <span class="p">[</span>
    <span class="dl">'</span><span class="s1">Ignoring local @import of "idontexist.css" as resource is missing.</span><span class="dl">'</span>
  <span class="p">],</span>
  <span class="na">inlinedStylesheets</span><span class="p">:</span> <span class="p">[],</span>
  <span class="na">warnings</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</code></pre></div></div>
<h2 id="clean-css-for-gulp">Clean-css for Gulp</h2>
<p>An example of how you can include clean-css in gulp</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">dest</span><span class="p">,</span> <span class="nx">series</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">gulp</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">CleanCSS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">clean-css</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">concat</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">gulp-concat</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">css</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">compatibility</span><span class="p">:</span> <span class="dl">'</span><span class="s1">*</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// (default) - Internet Explorer 10+ compatibility mode</span>
        <span class="na">inline</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="p">],</span> <span class="c1">// enables all inlining, same as ['local', 'remote']</span>
        <span class="na">level</span><span class="p">:</span> <span class="mi">2</span> <span class="c1">// Optimization levels. The level option can be either 0, 1 (default), or 2, e.g.</span>
        <span class="c1">// Please note that level 1 optimization options are generally safe while level 2 optimizations should be safe for most users.</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="nx">src</span><span class="p">(</span><span class="dl">'</span><span class="s1">app/**/*.css</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">concat</span><span class="p">(</span><span class="dl">'</span><span class="s1">style.min.css</span><span class="dl">'</span><span class="p">))</span>
        <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">buferFile</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CleanCSS</span><span class="p">(</span><span class="nx">options</span><span class="p">).</span><span class="nx">minify</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">contents</span><span class="p">)</span>
            <span class="k">return</span> <span class="nx">file</span><span class="p">.</span><span class="nx">contents</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">buferFile</span><span class="p">.</span><span class="nx">styles</span><span class="p">)</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">dest</span><span class="p">(</span><span class="dl">'</span><span class="s1">build</span><span class="dl">'</span><span class="p">))</span>
<span class="p">}</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">css</span> <span class="o">=</span> <span class="nx">series</span><span class="p">(</span><span class="nx">css</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="how-to-use-clean-css-with-build-tools">How to use clean-css with build tools?</h2>

<p>There is a number of 3rd party plugins to popular build tools:</p>

<ul>
  <li><a href="https://github.com/broccolijs/broccoli#broccoli">Broccoli</a>: <a href="https://github.com/shinnn/broccoli-clean-css">broccoli-clean-css</a></li>
  <li><a href="http://brunch.io/">Brunch</a>: <a href="https://github.com/brunch/clean-css-brunch">clean-css-brunch</a></li>
  <li><a href="http://gruntjs.com">Grunt</a>: <a href="https://github.com/gruntjs/grunt-contrib-cssmin">grunt-contrib-cssmin</a></li>
  <li><a href="http://gulpjs.com/">Gulp</a>: <a href="https://github.com/scniro/gulp-clean-css">gulp-clean-css</a></li>
  <li><a href="http://gulpjs.com/">Gulp</a>: <a href="https://github.com/clean-css/clean-css/issues/342">using vinyl-map as a wrapper - courtesy of @sogko</a></li>
  <li><a href="https://github.com/component/builder2.js">component-builder2</a>: <a href="https://github.com/poying/builder-clean-css">builder-clean-css</a></li>
  <li><a href="http://metalsmith.io">Metalsmith</a>: <a href="https://github.com/aymericbeaumet/metalsmith-clean-css">metalsmith-clean-css</a></li>
  <li><a href="https://github.com/lasso-js/lasso">Lasso</a>: <a href="https://github.com/yomed/lasso-clean-css">lasso-clean-css</a></li>
  <li><a href="https://github.com/start-runner/start">Start</a>: <a href="https://github.com/start-runner/clean-css">start-clean-css</a></li>
</ul>

<h2 id="how-to-use-clean-css-from-web-browser">How to use clean-css from web browser?</h2>

<ul>
  <li>https://clean-css.github.io/ (official web interface)</li>
  <li>http://refresh-sf.com/</li>
  <li>http://adamburgess.github.io/clean-css-online/</li>
</ul>

<h1 id="contributing">Contributing</h1>

<p>See <a href="https://github.com/clean-css/clean-css/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>

<h2 id="how-to-get-started">How to get started?</h2>

<p>First clone the sources:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone git@github.com:clean-css/clean-css.git
</code></pre></div></div>

<p>then install dependencies:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>clean-css
npm <span class="nb">install</span>
</code></pre></div></div>

<p>then use any of the following commands to verify your copy:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run bench <span class="c"># for clean-css benchmarks (see [test/bench.js](https://github.com/clean-css/clean-css/blob/master/test/bench.js) for details)</span>
npm run browserify <span class="c"># to create the browser-ready clean-css version</span>
npm run check <span class="c"># to lint JS sources with [JSHint](https://github.com/jshint/jshint/)</span>
npm <span class="nb">test</span> <span class="c"># to run all tests</span>
</code></pre></div></div>

<h1 id="acknowledgments">Acknowledgments</h1>

<p>Sorted alphabetically by GitHub handle:</p>

<ul>
  <li><a href="https://github.com/abarre">@abarre</a> (Anthony Barre) for improvements to <code class="language-plaintext highlighter-rouge">@import</code> processing;</li>
  <li><a href="https://github.com/alexlamsl">@alexlamsl</a> (Alex Lam S.L.) for testing early clean-css 4 versions, reporting bugs, and suggesting numerous improvements.</li>
  <li><a href="https://github.com/altschuler">@altschuler</a> (Simon Altschuler) for fixing <code class="language-plaintext highlighter-rouge">@import</code> processing inside comments;</li>
  <li><a href="https://github.com/ben-eb">@ben-eb</a> (Ben Briggs) for sharing ideas about CSS optimizations;</li>
  <li><a href="https://github.com/davisjam">@davisjam</a> (Jamie Davis) for disclosing ReDOS vulnerabilities;</li>
  <li><a href="https://github.com/facelessuser">@facelessuser</a> (Isaac) for pointing out a flaw in clean-css’ stateless mode;</li>
  <li><a href="https://github.com/grandrath">@grandrath</a> (Martin Grandrath) for improving <code class="language-plaintext highlighter-rouge">minify</code> method source traversal in ES6;</li>
  <li><a href="https://github.com/jmalonzo">@jmalonzo</a> (Jan Michael Alonzo) for a patch removing node.js’ old <code class="language-plaintext highlighter-rouge">sys</code> package;</li>
  <li><a href="https://github.com/lukeapage">@lukeapage</a> (Luke Page) for suggestions and testing the source maps feature;
Plus everyone else involved in <a href="https://github.com/clean-css/clean-css/issues/125">#125</a> for pushing it forward;</li>
  <li><a href="https://github.com/madwizard-thomas">@madwizard-thomas</a> for sharing ideas about <code class="language-plaintext highlighter-rouge">@import</code> inlining and URL rebasing.</li>
  <li><a href="https://github.com/ngyikp">@ngyikp</a> (Ng Yik Phang) for testing early clean-css 4 versions, reporting bugs, and suggesting numerous improvements.</li>
  <li><a href="https://github.com/wagenet">@wagenet</a> (Peter Wagenet) for suggesting improvements to <code class="language-plaintext highlighter-rouge">@import</code> inlining behavior;</li>
  <li><a href="https://github.com/venemo">@venemo</a> (Timur Kristóf) for an outstanding contribution of advanced property optimizer for 2.2 release;</li>
  <li><a href="https://github.com/vvo">@vvo</a> (Vincent Voyer) for a patch with better empty element regex and for inspiring us to do many performance improvements in 0.4 release;</li>
  <li><a href="https://github.com/xhmikosr">@xhmikosr</a> for suggesting new features, like option to remove special comments and strip out URLs quotation, and pointing out numerous improvements like JSHint, media queries, etc.</li>
</ul>

<h1 id="license">License</h1>

<p>clean-css is released under the <a href="https://github.com/clean-css/clean-css/blob/master/LICENSE">MIT License</a>.</p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
