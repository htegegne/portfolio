<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>ajv-keywords | portfolio</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="ajv-keywords" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/myportfolio.client/node_modules/mini-css-extract-plugin/node_modules/ajv-keywords/" />
<meta property="og:url" content="http://localhost:4000/myportfolio.client/node_modules/mini-css-extract-plugin/node_modules/ajv-keywords/" />
<meta property="og:site_name" content="portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="ajv-keywords" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"ajv-keywords","url":"http://localhost:4000/myportfolio.client/node_modules/mini-css-extract-plugin/node_modules/ajv-keywords/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=059dd2210d8f0fb8d42af0cbb5c1b29e59b98886">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">portfolio</a></h1>
      

      <h1 id="ajv-keywords">ajv-keywords</h1>

<p>Custom JSON-Schema keywords for <a href="https://github.com/epoberezkin/ajv">Ajv</a> validator</p>

<p><a href="https://github.com/ajv-validator/ajv-keywords/actions?query=workflow%3Abuild"><img src="https://github.com/ajv-validator/ajv-keywords/workflows/build/badge.svg" alt="build" /></a>
<a href="https://www.npmjs.com/package/ajv-keywords"><img src="https://img.shields.io/npm/v/ajv-keywords.svg" alt="npm" /></a>
<a href="https://www.npmjs.com/package/ajv-keywords"><img src="https://img.shields.io/npm/dm/ajv-keywords.svg" alt="npm downloads" /></a>
<a href="https://coveralls.io/github/ajv-validator/ajv-keywords?branch=master"><img src="https://coveralls.io/repos/github/ajv-validator/ajv-keywords/badge.svg?branch=master" alt="coverage" /></a>
<a href="https://gitter.im/ajv-validator/ajv"><img src="https://img.shields.io/gitter/room/ajv-validator/ajv.svg" alt="gitter" /></a></p>

<p><strong>Please note</strong>: This readme file is for <a href="https://github.com/ajv-validator/ajv-keywords/releases/tag/v5.0.0">ajv-keywords v5.0.0</a> that should be used with <a href="https://github.com/ajv-validator/ajv">ajv v8</a>.</p>

<p><a href="https://github.com/ajv-validator/ajv-keywords/tree/v3">ajv-keywords v3</a> should be used with <a href="https://github.com/ajv-validator/ajv/tree/v6">ajv v6</a>.</p>

<h2 id="contents">Contents</h2>

<ul>
  <li><a href="#install">Install</a></li>
  <li><a href="#usage">Usage</a></li>
  <li><a href="#keywords">Keywords</a>
    <ul>
      <li><a href="#types">Types</a>
        <ul>
          <li><a href="#typeof">typeof</a></li>
          <li><a href="#instanceof">instanceof</a><sup>+</sup></li>
        </ul>
      </li>
      <li><a href="#keywords-for-numbers">Keywords for numbers</a>
        <ul>
          <li><a href="#range-and-exclusiverange">range and exclusiveRange</a></li>
        </ul>
      </li>
      <li><a href="#keywords-for-strings">Keywords for strings</a>
        <ul>
          <li><a href="#regexp">regexp</a></li>
          <li><a href="#transform">transform</a><sup>*</sup></li>
        </ul>
      </li>
      <li><a href="#keywords-for-arrays">Keywords for arrays</a>
        <ul>
          <li><a href="#uniqueitemproperties">uniqueItemProperties</a><sup>+</sup></li>
        </ul>
      </li>
      <li><a href="#keywords-for-objects">Keywords for objects</a>
        <ul>
          <li><a href="#allrequired">allRequired</a></li>
          <li><a href="#anyrequired">anyRequired</a></li>
          <li><a href="#onerequired">oneRequired</a></li>
          <li><a href="#patternrequired">patternRequired</a></li>
          <li><a href="#prohibited">prohibited</a></li>
          <li><a href="#deepproperties">deepProperties</a></li>
          <li><a href="#deeprequired">deepRequired</a></li>
          <li><a href="#dynamicdefaults">dynamicDefaults</a><sup>*</sup><sup>+</sup></li>
        </ul>
      </li>
      <li><a href="#keywords-for-all-types">Keywords for all types</a>
        <ul>
          <li><a href="#selectselectcasesselectdefault">select/selectCases/selectDefault</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#security-contact">Security contact</a></li>
  <li><a href="#open-source-software-support">Open-source software support</a></li>
  <li><a href="#license">License</a></li>
</ul>

<p><sup>*</sup> - keywords that modify data
<sup>+</sup> - keywords that are not supported in <a href="https://github.com/ajv-validator/ajv/blob/master/docs/standalone.md">standalone validation code</a></p>

<h2 id="install">Install</h2>

<p>To install version 4 to use with <a href="https://github.com/ajv-validator/ajv">Ajv v7</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install ajv-keywords
</code></pre></div></div>

<h2 id="usage">Usage</h2>

<p>To add all available keywords:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Ajv</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">ajv</span><span class="dl">"</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">ajv</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Ajv</span><span class="p">()</span>
<span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">ajv-keywords</span><span class="dl">"</span><span class="p">)(</span><span class="nx">ajv</span><span class="p">)</span>

<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">({</span><span class="na">instanceof</span><span class="p">:</span> <span class="dl">"</span><span class="s2">RegExp</span><span class="dl">"</span><span class="p">},</span> <span class="sr">/.*/</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">({</span><span class="na">instanceof</span><span class="p">:</span> <span class="dl">"</span><span class="s2">RegExp</span><span class="dl">"</span><span class="p">},</span> <span class="dl">"</span><span class="s2">.*</span><span class="dl">"</span><span class="p">)</span> <span class="c1">// false</span>
</code></pre></div></div>

<p>To add a single keyword:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">ajv-keywords</span><span class="dl">"</span><span class="p">)(</span><span class="nx">ajv</span><span class="p">,</span> <span class="dl">"</span><span class="s2">instanceof</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div>

<p>To add multiple keywords:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">ajv-keywords</span><span class="dl">"</span><span class="p">)(</span><span class="nx">ajv</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">typeof</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">instanceof</span><span class="dl">"</span><span class="p">])</span>
</code></pre></div></div>

<p>To add a single keyword directly (to avoid adding unused code):</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">ajv-keywords/dist/keywords/select</span><span class="dl">"</span><span class="p">)(</span><span class="nx">ajv</span><span class="p">,</span> <span class="nx">opts</span><span class="p">)</span>
</code></pre></div></div>

<p>To add all keywords via Ajv options:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">ajv</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Ajv</span><span class="p">({</span><span class="na">keywords</span><span class="p">:</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">ajv-keywords/dist/definitions</span><span class="dl">"</span><span class="p">)(</span><span class="nx">opts</span><span class="p">)})</span>
</code></pre></div></div>

<p>To add one or several keywords via options:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">ajv</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Ajv</span><span class="p">({</span>
  <span class="na">keywords</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">ajv-keywords/dist/definitions/typeof</span><span class="dl">"</span><span class="p">)(),</span>
    <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">ajv-keywords/dist/definitions/instanceof</span><span class="dl">"</span><span class="p">)(),</span>
    <span class="c1">// select exports an array of 3 definitions - see "select" in docs</span>
    <span class="p">...</span><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">ajv-keywords/dist/definitions/select</span><span class="dl">"</span><span class="p">)(</span><span class="nx">opts</span><span class="p">),</span>
  <span class="p">],</span>
<span class="p">})</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">opts</code> is an optional object with a property <code class="language-plaintext highlighter-rouge">defaultMeta</code> - URI of meta-schema to use for keywords that use subschemas (<code class="language-plaintext highlighter-rouge">select</code> and <code class="language-plaintext highlighter-rouge">deepProperties</code>). The default is <code class="language-plaintext highlighter-rouge">"http://json-schema.org/schema"</code>.</p>

<h2 id="keywords">Keywords</h2>

<h3 id="types">Types</h3>

<h4 id="typeof"><code class="language-plaintext highlighter-rouge">typeof</code></h4>

<p>Based on JavaScript <code class="language-plaintext highlighter-rouge">typeof</code> operation.</p>

<p>The value of the keyword should be a string (<code class="language-plaintext highlighter-rouge">"undefined"</code>, <code class="language-plaintext highlighter-rouge">"string"</code>, <code class="language-plaintext highlighter-rouge">"number"</code>, <code class="language-plaintext highlighter-rouge">"object"</code>, <code class="language-plaintext highlighter-rouge">"function"</code>, <code class="language-plaintext highlighter-rouge">"boolean"</code> or <code class="language-plaintext highlighter-rouge">"symbol"</code>) or an array of strings.</p>

<p>To pass validation the result of <code class="language-plaintext highlighter-rouge">typeof</code> operation on the value should be equal to the string (or one of the strings in the array).</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">({</span><span class="na">typeof</span><span class="p">:</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">},</span> <span class="kc">undefined</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">({</span><span class="na">typeof</span><span class="p">:</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">},</span> <span class="kc">null</span><span class="p">)</span> <span class="c1">// false</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">({</span><span class="na">typeof</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">]},</span> <span class="kc">null</span><span class="p">)</span> <span class="c1">// true</span>
</code></pre></div></div>

<h4 id="instanceof"><code class="language-plaintext highlighter-rouge">instanceof</code></h4>

<p>Based on JavaScript <code class="language-plaintext highlighter-rouge">instanceof</code> operation.</p>

<p>The value of the keyword should be a string (<code class="language-plaintext highlighter-rouge">"Object"</code>, <code class="language-plaintext highlighter-rouge">"Array"</code>, <code class="language-plaintext highlighter-rouge">"Function"</code>, <code class="language-plaintext highlighter-rouge">"Number"</code>, <code class="language-plaintext highlighter-rouge">"String"</code>, <code class="language-plaintext highlighter-rouge">"Date"</code>, <code class="language-plaintext highlighter-rouge">"RegExp"</code> or <code class="language-plaintext highlighter-rouge">"Promise"</code>) or an array of strings.</p>

<p>To pass validation the result of <code class="language-plaintext highlighter-rouge">data instanceof ...</code> operation on the value should be true:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">({</span><span class="na">instanceof</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Array</span><span class="dl">"</span><span class="p">},</span> <span class="p">[])</span> <span class="c1">// true</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">({</span><span class="na">instanceof</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Array</span><span class="dl">"</span><span class="p">},</span> <span class="p">{})</span> <span class="c1">// false</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">({</span><span class="na">instanceof</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">Array</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Function</span><span class="dl">"</span><span class="p">]},</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{})</span> <span class="c1">// true</span>
</code></pre></div></div>

<p>You can add your own constructor function to be recognised by this keyword:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">MyClass</span> <span class="p">{}</span>
<span class="kd">const</span> <span class="nx">instanceofDef</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">ajv-keywords/dist/definitions/instanceof</span><span class="dl">"</span><span class="p">)</span>
<span class="nx">instanceofDef</span><span class="p">.</span><span class="nx">CONSTRUCTORS</span><span class="p">.</span><span class="nx">MyClass</span> <span class="o">=</span> <span class="nx">MyClass</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">({</span><span class="na">instanceof</span><span class="p">:</span> <span class="dl">"</span><span class="s2">MyClass</span><span class="dl">"</span><span class="p">},</span> <span class="k">new</span> <span class="nx">MyClass</span><span class="p">())</span> <span class="c1">// true</span>
</code></pre></div></div>

<p><strong>Please note</strong>: currently <code class="language-plaintext highlighter-rouge">instanceof</code> is not supported in <a href="https://github.com/ajv-validator/ajv/blob/master/docs/standalone.md">standalone validation code</a> - it has to be implemented as <a href="https://github.com/ajv-validator/ajv/blob/master/docs/keywords.md#define-keyword-with-code-generation-function"><code class="language-plaintext highlighter-rouge">code</code> keyword</a> to support it (PR is welcome).</p>

<h3 id="keywords-for-numbers">Keywords for numbers</h3>

<h4 id="range-and-exclusiverange"><code class="language-plaintext highlighter-rouge">range</code> and <code class="language-plaintext highlighter-rouge">exclusiveRange</code></h4>

<p>Syntax sugar for the combination of minimum and maximum keywords (or exclusiveMinimum and exclusiveMaximum), also fails schema compilation if there are no numbers in the range.</p>

<p>The value of these keywords must be an array consisting of two numbers, the second must be greater or equal than the first one.</p>

<p>If the validated value is not a number the validation passes, otherwise to pass validation the value should be greater (or equal) than the first number and smaller (or equal) than the second number in the array.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">number</span><span class="dl">"</span><span class="p">,</span> <span class="na">range</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">)</span> <span class="c1">// false</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mf">3.01</span><span class="p">)</span> <span class="c1">// false</span>

<span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">number</span><span class="dl">"</span><span class="p">,</span> <span class="na">exclusiveRange</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mf">1.01</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mf">2.99</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">// false</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">// false</span>
</code></pre></div></div>

<h3 id="keywords-for-strings">Keywords for strings</h3>

<h4 id="regexp"><code class="language-plaintext highlighter-rouge">regexp</code></h4>

<p>This keyword allows to use regular expressions with flags in schemas, and also without <code class="language-plaintext highlighter-rouge">"u"</code> flag when needed (the standard <code class="language-plaintext highlighter-rouge">pattern</code> keyword does not support flags and implies the presence of <code class="language-plaintext highlighter-rouge">"u"</code> flag).</p>

<p>This keyword applies only to strings. If the data is not a string, the validation succeeds.</p>

<p>The value of this keyword can be either a string (the result of <code class="language-plaintext highlighter-rouge">regexp.toString()</code>) or an object with the properties <code class="language-plaintext highlighter-rouge">pattern</code> and <code class="language-plaintext highlighter-rouge">flags</code> (the same strings that should be passed to RegExp constructor).</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">foo</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">string</span><span class="dl">"</span><span class="p">,</span> <span class="na">regexp</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/foo/i</span><span class="dl">"</span><span class="p">},</span>
    <span class="na">bar</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">string</span><span class="dl">"</span><span class="p">,</span> <span class="na">regexp</span><span class="p">:</span> <span class="p">{</span><span class="na">pattern</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">,</span> <span class="na">flags</span><span class="p">:</span> <span class="dl">"</span><span class="s2">i</span><span class="dl">"</span><span class="p">}},</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">validData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">foo</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Food</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">bar</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Barmen</span><span class="dl">"</span><span class="p">,</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">invalidData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">foo</span><span class="p">:</span> <span class="dl">"</span><span class="s2">fog</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">bar</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bad</span><span class="dl">"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="transform"><code class="language-plaintext highlighter-rouge">transform</code></h4>

<p>This keyword allows a string to be modified during validation.</p>

<p>This keyword applies only to strings. If the data is not a string, the <code class="language-plaintext highlighter-rouge">transform</code> keyword is ignored.</p>

<p>A standalone string cannot be modified, i.e. <code class="language-plaintext highlighter-rouge">data = 'a'; ajv.validate(schema, data);</code>, because strings are passed by value</p>

<p><strong>Supported transformations:</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">trim</code>: remove whitespace from start and end</li>
  <li><code class="language-plaintext highlighter-rouge">trimStart</code>/<code class="language-plaintext highlighter-rouge">trimLeft</code>: remove whitespace from start</li>
  <li><code class="language-plaintext highlighter-rouge">trimEnd</code>/<code class="language-plaintext highlighter-rouge">trimRight</code>: remove whitespace from end</li>
  <li><code class="language-plaintext highlighter-rouge">toLowerCase</code>: convert to lower case</li>
  <li><code class="language-plaintext highlighter-rouge">toUpperCase</code>: convert to upper case</li>
  <li><code class="language-plaintext highlighter-rouge">toEnumCase</code>: change string case to be equal to one of <code class="language-plaintext highlighter-rouge">enum</code> values in the schema</li>
</ul>

<p>Transformations are applied in the order they are listed.</p>

<p>Note: <code class="language-plaintext highlighter-rouge">toEnumCase</code> requires that all allowed values are unique when case insensitive.</p>

<p><strong>Example: multiple transformations</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">ajv-keywords</span><span class="dl">"</span><span class="p">)(</span><span class="nx">ajv</span><span class="p">,</span> <span class="dl">"</span><span class="s2">transform</span><span class="dl">"</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">array</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">items</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">string</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">transform</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">trim</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">toLowerCase</span><span class="dl">"</span><span class="p">],</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">  MixCase  </span><span class="dl">"</span><span class="p">]</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="c1">// ['mixcase']</span>
</code></pre></div></div>

<p><strong>Example: <code class="language-plaintext highlighter-rouge">enumcase</code></strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">ajv-keywords</span><span class="dl">"</span><span class="p">)(</span><span class="nx">ajv</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">transform</span><span class="dl">"</span><span class="p">])</span>

<span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">array</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">items</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">string</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">transform</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">trim</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">toEnumCase</span><span class="dl">"</span><span class="p">],</span>
    <span class="na">enum</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">pH</span><span class="dl">"</span><span class="p">],</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">ph</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> Ph</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">PH</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pH </span><span class="dl">"</span><span class="p">]</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="c1">// ['pH','pH','pH','pH']</span>
</code></pre></div></div>

<h3 id="keywords-for-arrays">Keywords for arrays</h3>

<h4 id="uniqueitemproperties"><code class="language-plaintext highlighter-rouge">uniqueItemProperties</code></h4>

<p>The keyword allows to check that some properties in array items are unique.</p>

<p>This keyword applies only to arrays. If the data is not an array, the validation succeeds.</p>

<p>The value of this keyword must be an array of strings - property names that should have unique values across all items.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">array</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">uniqueItemProperties</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">],</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">validData</span> <span class="o">=</span> <span class="p">[{</span><span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">}]</span>

<span class="kd">const</span> <span class="nx">invalidData1</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
  <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="c1">// duplicate "id"</span>
  <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>
<span class="p">]</span>

<span class="kd">const</span> <span class="nx">invalidData2</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">taco</span><span class="dl">"</span><span class="p">},</span>
  <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">taco</span><span class="dl">"</span><span class="p">},</span> <span class="c1">// duplicate "name"</span>
  <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">salsa</span><span class="dl">"</span><span class="p">},</span>
<span class="p">]</span>
</code></pre></div></div>

<p>This keyword is contributed by <a href="https://github.com/blainesch">@blainesch</a>.</p>

<p><strong>Please note</strong>: currently <code class="language-plaintext highlighter-rouge">uniqueItemProperties</code> is not supported in <a href="https://github.com/ajv-validator/ajv/blob/master/docs/standalone.md">standalone validation code</a> - it has to be implemented as <a href="https://github.com/ajv-validator/ajv/blob/master/docs/keywords.md#define-keyword-with-code-generation-function"><code class="language-plaintext highlighter-rouge">code</code> keyword</a> to support it (PR is welcome).</p>

<h3 id="keywords-for-objects">Keywords for objects</h3>

<h4 id="allrequired"><code class="language-plaintext highlighter-rouge">allRequired</code></h4>

<p>This keyword allows to require the presence of all properties used in <code class="language-plaintext highlighter-rouge">properties</code> keyword in the same schema object.</p>

<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>

<p>The value of this keyword must be boolean.</p>

<p>If the value of the keyword is <code class="language-plaintext highlighter-rouge">false</code>, the validation succeeds.</p>

<p>If the value of the keyword is <code class="language-plaintext highlighter-rouge">true</code>, the validation succeeds if the data contains all properties defined in <code class="language-plaintext highlighter-rouge">properties</code> keyword (in the same schema object).</p>

<p>If the <code class="language-plaintext highlighter-rouge">properties</code> keyword is not present in the same schema object, schema compilation will throw exception.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">foo</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">number</span><span class="dl">"</span><span class="p">},</span>
    <span class="na">bar</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">number</span><span class="dl">"</span><span class="p">},</span>
  <span class="p">},</span>
  <span class="na">allRequired</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">validData</span> <span class="o">=</span> <span class="p">{</span><span class="na">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="kd">const</span> <span class="nx">alsoValidData</span> <span class="o">=</span> <span class="p">{</span><span class="na">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">baz</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>

<span class="kd">const</span> <span class="nx">invalidDataList</span> <span class="o">=</span> <span class="p">[{},</span> <span class="p">{</span><span class="na">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">bar</span><span class="p">:</span> <span class="mi">2</span><span class="p">}]</span>
</code></pre></div></div>

<h4 id="anyrequired"><code class="language-plaintext highlighter-rouge">anyRequired</code></h4>

<p>This keyword allows to require the presence of any (at least one) property from the list.</p>

<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>

<p>The value of this keyword must be an array of strings, each string being a property name. For data object to be valid at least one of the properties in this array should be present in the object.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">anyRequired</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">],</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">validData</span> <span class="o">=</span> <span class="p">{</span><span class="na">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="kd">const</span> <span class="nx">alsoValidData</span> <span class="o">=</span> <span class="p">{</span><span class="na">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>

<span class="kd">const</span> <span class="nx">invalidDataList</span> <span class="o">=</span> <span class="p">[{},</span> <span class="p">{</span><span class="na">baz</span><span class="p">:</span> <span class="mi">3</span><span class="p">}]</span>
</code></pre></div></div>

<h4 id="onerequired"><code class="language-plaintext highlighter-rouge">oneRequired</code></h4>

<p>This keyword allows to require the presence of only one property from the list.</p>

<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>

<p>The value of this keyword must be an array of strings, each string being a property name. For data object to be valid exactly one of the properties in this array should be present in the object.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">oneRequired</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">],</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">validData</span> <span class="o">=</span> <span class="p">{</span><span class="na">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="kd">const</span> <span class="nx">alsoValidData</span> <span class="o">=</span> <span class="p">{</span><span class="na">bar</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">baz</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>

<span class="kd">const</span> <span class="nx">invalidDataList</span> <span class="o">=</span> <span class="p">[{},</span> <span class="p">{</span><span class="na">baz</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span> <span class="p">{</span><span class="na">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="mi">2</span><span class="p">}]</span>
</code></pre></div></div>

<h4 id="patternrequired"><code class="language-plaintext highlighter-rouge">patternRequired</code></h4>

<p>This keyword allows to require the presence of properties that match some pattern(s).</p>

<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>

<p>The value of this keyword should be an array of strings, each string being a regular expression. For data object to be valid each regular expression in this array should match at least one property name in the data object.</p>

<p>If the array contains multiple regular expressions, more than one expression can match the same property name.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">patternRequired</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">f.*o</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">b.*r</span><span class="dl">"</span><span class="p">],</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">validData</span> <span class="o">=</span> <span class="p">{</span><span class="na">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="kd">const</span> <span class="nx">alsoValidData</span> <span class="o">=</span> <span class="p">{</span><span class="na">foobar</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>

<span class="kd">const</span> <span class="nx">invalidDataList</span> <span class="o">=</span> <span class="p">[{},</span> <span class="p">{</span><span class="na">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">bar</span><span class="p">:</span> <span class="mi">2</span><span class="p">}]</span>
</code></pre></div></div>

<h4 id="prohibited"><code class="language-plaintext highlighter-rouge">prohibited</code></h4>

<p>This keyword allows to prohibit that any of the properties in the list is present in the object.</p>

<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>

<p>The value of this keyword should be an array of strings, each string being a property name. For data object to be valid none of the properties in this array should be present in the object.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">prohibited</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">],</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">validData</span> <span class="o">=</span> <span class="p">{</span><span class="na">baz</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="kd">const</span> <span class="nx">alsoValidData</span> <span class="o">=</span> <span class="p">{}</span>

<span class="kd">const</span> <span class="nx">invalidDataList</span> <span class="o">=</span> <span class="p">[{</span><span class="na">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">bar</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="na">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="mi">2</span><span class="p">}]</span>
</code></pre></div></div>

<p><strong>Please note</strong>: <code class="language-plaintext highlighter-rouge">{prohibited: ['foo', 'bar']}</code> is equivalent to <code class="language-plaintext highlighter-rouge">{not: {anyRequired: ['foo', 'bar']}}</code> (i.e. it has the same validation result for any data).</p>

<h4 id="deepproperties"><code class="language-plaintext highlighter-rouge">deepProperties</code></h4>

<p>This keyword allows to validate deep properties (identified by JSON pointers).</p>

<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>

<p>The value should be an object, where keys are JSON pointers to the data, starting from the current position in data, and the values are JSON schemas. For data object to be valid the value of each JSON pointer should be valid according to the corresponding schema.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">deepProperties</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">/users/1/role</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span><span class="na">enum</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">admin</span><span class="dl">"</span><span class="p">]},</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">validData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">users</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{},</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
      <span class="na">role</span><span class="p">:</span> <span class="dl">"</span><span class="s2">admin</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">alsoValidData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">users</span><span class="p">:</span> <span class="p">{</span>
    <span class="mi">1</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
      <span class="na">role</span><span class="p">:</span> <span class="dl">"</span><span class="s2">admin</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">invalidData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">users</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{},</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
      <span class="na">role</span><span class="p">:</span> <span class="dl">"</span><span class="s2">user</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">alsoInvalidData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">users</span><span class="p">:</span> <span class="p">{</span>
    <span class="mi">1</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
      <span class="na">role</span><span class="p">:</span> <span class="dl">"</span><span class="s2">user</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="deeprequired"><code class="language-plaintext highlighter-rouge">deepRequired</code></h4>

<p>This keyword allows to check that some deep properties (identified by JSON pointers) are available.</p>

<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>

<p>The value should be an array of JSON pointers to the data, starting from the current position in data. For data object to be valid each JSON pointer should be some existing part of the data.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">deepRequired</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">/users/1/role</span><span class="dl">"</span><span class="p">],</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">validData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">users</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{},</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
      <span class="na">role</span><span class="p">:</span> <span class="dl">"</span><span class="s2">admin</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">invalidData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">users</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{},</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<p>See <a href="https://github.com/json-schema-org/json-schema-spec/issues/203#issue-197211916">json-schema-org/json-schema-spec#203</a> for an example of the equivalent schema without <code class="language-plaintext highlighter-rouge">deepRequired</code> keyword.</p>

<h3 id="keywords-for-all-types">Keywords for all types</h3>

<h4 id="selectselectcasesselectdefault"><code class="language-plaintext highlighter-rouge">select</code>/<code class="language-plaintext highlighter-rouge">selectCases</code>/<code class="language-plaintext highlighter-rouge">selectDefault</code></h4>

<p><strong>Please note</strong>: these keywords are deprecated. It is recommended to use OpenAPI <a href="https://ajv.js.org/json-schema.html#discriminator">discriminator</a> keyword supported by Ajv v8 instead of <code class="language-plaintext highlighter-rouge">select</code>.</p>

<p>These keywords allow to choose the schema to validate the data based on the value of some property in the validated data.</p>

<p>These keywords must be present in the same schema object (<code class="language-plaintext highlighter-rouge">selectDefault</code> is optional).</p>

<p>The value of <code class="language-plaintext highlighter-rouge">select</code> keyword should be a <a href="https://github.com/ajv-validator/ajv/blob/master/docs/validation.md#data-reference">$data reference</a> that points to any primitive JSON type (string, number, boolean or null) in the data that is validated. You can also use a constant of primitive type as the value of this keyword (e.g., for debugging purposes).</p>

<p>The value of <code class="language-plaintext highlighter-rouge">selectCases</code> keyword must be an object where each property name is a possible string representation of the value of <code class="language-plaintext highlighter-rouge">select</code> keyword and each property value is a corresponding schema (from draft-06 it can be boolean) that must be used to validate the data.</p>

<p>The value of <code class="language-plaintext highlighter-rouge">selectDefault</code> keyword is a schema (also can be boolean) that must be used to validate the data in case <code class="language-plaintext highlighter-rouge">selectCases</code> has no key equal to the stringified value of <code class="language-plaintext highlighter-rouge">select</code> keyword.</p>

<p>The validation succeeds in one of the following cases:</p>

<ul>
  <li>the validation of data using selected schema succeeds,</li>
  <li>none of the schemas is selected for validation,</li>
  <li>the value of select is undefined (no property in the data that the data reference points to).</li>
</ul>

<p>If <code class="language-plaintext highlighter-rouge">select</code> value (in data) is not a primitive type the validation fails.</p>

<p>This keyword correctly tracks evaluated properties and items to work with <code class="language-plaintext highlighter-rouge">unevaluatedProperties</code> and <code class="language-plaintext highlighter-rouge">unevaluatedItems</code> keywords - only properties and items from the subschema that was used (one of <code class="language-plaintext highlighter-rouge">selectCases</code> subschemas or <code class="language-plaintext highlighter-rouge">selectDefault</code> subschema) are marked as evaluated.</p>

<p><strong>Please note</strong>: these keywords require Ajv <code class="language-plaintext highlighter-rouge">$data</code> option to support <a href="https://github.com/ajv-validator/ajv/blob/master/docs/validation.md#data-reference">$data reference</a>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">ajv-keywords</span><span class="dl">"</span><span class="p">)(</span><span class="nx">ajv</span><span class="p">,</span> <span class="dl">"</span><span class="s2">select</span><span class="dl">"</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">kind</span><span class="dl">"</span><span class="p">],</span>
  <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">kind</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">string</span><span class="dl">"</span><span class="p">},</span>
  <span class="p">},</span>
  <span class="na">select</span><span class="p">:</span> <span class="p">{</span><span class="na">$data</span><span class="p">:</span> <span class="dl">"</span><span class="s2">0/kind</span><span class="dl">"</span><span class="p">},</span>
  <span class="na">selectCases</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">foo</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">],</span>
      <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">kind</span><span class="p">:</span> <span class="p">{},</span>
        <span class="na">foo</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">string</span><span class="dl">"</span><span class="p">},</span>
      <span class="p">},</span>
      <span class="na">additionalProperties</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">bar</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">],</span>
      <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">kind</span><span class="p">:</span> <span class="p">{},</span>
        <span class="na">bar</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">number</span><span class="dl">"</span><span class="p">},</span>
      <span class="p">},</span>
      <span class="na">additionalProperties</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
  <span class="na">selectDefault</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">propertyNames</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">not</span><span class="p">:</span> <span class="p">{</span><span class="na">enum</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">]},</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">validDataList</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="na">kind</span><span class="p">:</span> <span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">,</span> <span class="na">foo</span><span class="p">:</span> <span class="dl">"</span><span class="s2">any</span><span class="dl">"</span><span class="p">},</span>
  <span class="p">{</span><span class="na">kind</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
  <span class="p">{</span><span class="na">kind</span><span class="p">:</span> <span class="dl">"</span><span class="s2">anything_else</span><span class="dl">"</span><span class="p">,</span> <span class="na">not_bar_or_foo</span><span class="p">:</span> <span class="dl">"</span><span class="s2">any value</span><span class="dl">"</span><span class="p">},</span>
<span class="p">]</span>

<span class="kd">const</span> <span class="nx">invalidDataList</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="na">kind</span><span class="p">:</span> <span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">},</span> <span class="c1">// no property foo</span>
  <span class="p">{</span><span class="na">kind</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">},</span> <span class="c1">// no property bar</span>
  <span class="p">{</span><span class="na">kind</span><span class="p">:</span> <span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">,</span> <span class="na">foo</span><span class="p">:</span> <span class="dl">"</span><span class="s2">any</span><span class="dl">"</span><span class="p">,</span> <span class="na">another</span><span class="p">:</span> <span class="dl">"</span><span class="s2">any value</span><span class="dl">"</span><span class="p">},</span> <span class="c1">// additional property</span>
  <span class="p">{</span><span class="na">kind</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">another</span><span class="p">:</span> <span class="dl">"</span><span class="s2">any value</span><span class="dl">"</span><span class="p">},</span> <span class="c1">// additional property</span>
  <span class="p">{</span><span class="na">kind</span><span class="p">:</span> <span class="dl">"</span><span class="s2">anything_else</span><span class="dl">"</span><span class="p">,</span> <span class="na">foo</span><span class="p">:</span> <span class="dl">"</span><span class="s2">any</span><span class="dl">"</span><span class="p">},</span> <span class="c1">// property foo not allowed</span>
  <span class="p">{</span><span class="na">kind</span><span class="p">:</span> <span class="dl">"</span><span class="s2">anything_else</span><span class="dl">"</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="c1">// property bar not allowed</span>
<span class="p">]</span>
</code></pre></div></div>

<h4 id="dynamicdefaults"><code class="language-plaintext highlighter-rouge">dynamicDefaults</code></h4>

<p>This keyword allows to assign dynamic defaults to properties, such as timestamps, unique IDs etc.</p>

<p>This keyword only works if <code class="language-plaintext highlighter-rouge">useDefaults</code> options is used and not inside <code class="language-plaintext highlighter-rouge">anyOf</code> keywords etc., in the same way as <a href="https://github.com/epoberezkin/ajv#assigning-defaults">default keyword treated by Ajv</a>.</p>

<p>The keyword should be added on the object level. Its value should be an object with each property corresponding to a property name, in the same way as in standard <code class="language-plaintext highlighter-rouge">properties</code> keyword. The value of each property can be:</p>

<ul>
  <li>an identifier of dynamic default function (a string)</li>
  <li>an object with properties <code class="language-plaintext highlighter-rouge">func</code> (an identifier) and <code class="language-plaintext highlighter-rouge">args</code> (an object with parameters that will be passed to this function during schema compilation - see examples).</li>
</ul>

<p>The properties used in <code class="language-plaintext highlighter-rouge">dynamicDefaults</code> should not be added to <code class="language-plaintext highlighter-rouge">required</code> keyword in the same schema (or validation will fail), because unlike <code class="language-plaintext highlighter-rouge">default</code> this keyword is processed after validation.</p>

<p>There are several predefined dynamic default functions:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">"timestamp"</code> - current timestamp in milliseconds</li>
  <li><code class="language-plaintext highlighter-rouge">"datetime"</code> - current date and time as string (ISO, valid according to <code class="language-plaintext highlighter-rouge">date-time</code> format)</li>
  <li><code class="language-plaintext highlighter-rouge">"date"</code> - current date as string (ISO, valid according to <code class="language-plaintext highlighter-rouge">date</code> format)</li>
  <li><code class="language-plaintext highlighter-rouge">"time"</code> - current time as string (ISO, valid according to <code class="language-plaintext highlighter-rouge">time</code> format)</li>
  <li><code class="language-plaintext highlighter-rouge">"random"</code> - pseudo-random number in [0, 1) interval</li>
  <li><code class="language-plaintext highlighter-rouge">"randomint"</code> - pseudo-random integer number. If string is used as a property value, the function will randomly return 0 or 1. If object <code class="language-plaintext highlighter-rouge">{ func: 'randomint', args: { max: N } }</code> is used then the default will be an integer number in [0, N) interval.</li>
  <li><code class="language-plaintext highlighter-rouge">"seq"</code> - sequential integer number starting from 0. If string is used as a property value, the default sequence will be used. If object <code class="language-plaintext highlighter-rouge">{ func: 'seq', args: { name: 'foo'} }</code> is used then the sequence with name <code class="language-plaintext highlighter-rouge">"foo"</code> will be used. Sequences are global, even if different ajv instances are used.</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">dynamicDefaults</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">ts</span><span class="p">:</span> <span class="dl">"</span><span class="s2">datetime</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">r</span><span class="p">:</span> <span class="p">{</span><span class="na">func</span><span class="p">:</span> <span class="dl">"</span><span class="s2">randomint</span><span class="dl">"</span><span class="p">,</span> <span class="na">args</span><span class="p">:</span> <span class="p">{</span><span class="na">max</span><span class="p">:</span> <span class="mi">100</span><span class="p">}},</span>
    <span class="na">id</span><span class="p">:</span> <span class="p">{</span><span class="na">func</span><span class="p">:</span> <span class="dl">"</span><span class="s2">seq</span><span class="dl">"</span><span class="p">,</span> <span class="na">args</span><span class="p">:</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">}},</span>
  <span class="p">},</span>
  <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">ts</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">string</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">format</span><span class="p">:</span> <span class="dl">"</span><span class="s2">date-time</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">r</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">integer</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">minimum</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="na">exclusiveMaximum</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">id</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">integer</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">minimum</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">data</span> <span class="c1">// { ts: '2016-12-01T22:07:28.829Z', r: 25, id: 0 }</span>

<span class="kd">const</span> <span class="nx">data1</span> <span class="o">=</span> <span class="p">{}</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">data1</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">data1</span> <span class="c1">// { ts: '2016-12-01T22:07:29.832Z', r: 68, id: 1 }</span>

<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">data1</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">data1</span> <span class="c1">// didn't change, as all properties were defined</span>
</code></pre></div></div>

<p>When using the <code class="language-plaintext highlighter-rouge">useDefaults</code> option value <code class="language-plaintext highlighter-rouge">"empty"</code>, properties and items equal to <code class="language-plaintext highlighter-rouge">null</code> or <code class="language-plaintext highlighter-rouge">""</code> (empty string) will be considered missing and assigned defaults. Use <code class="language-plaintext highlighter-rouge">allOf</code> <a href="https://github.com/epoberezkin/ajv/blob/master/KEYWORDS.md#compound-keywords">compound keyword</a> to execute <code class="language-plaintext highlighter-rouge">dynamicDefaults</code> before validation.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">allOf</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">dynamicDefaults</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">ts</span><span class="p">:</span> <span class="dl">"</span><span class="s2">datetime</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">r</span><span class="p">:</span> <span class="p">{</span><span class="na">func</span><span class="p">:</span> <span class="dl">"</span><span class="s2">randomint</span><span class="dl">"</span><span class="p">,</span> <span class="na">args</span><span class="p">:</span> <span class="p">{</span><span class="na">min</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">max</span><span class="p">:</span> <span class="mi">100</span><span class="p">}},</span>
        <span class="na">id</span><span class="p">:</span> <span class="p">{</span><span class="na">func</span><span class="p">:</span> <span class="dl">"</span><span class="s2">seq</span><span class="dl">"</span><span class="p">,</span> <span class="na">args</span><span class="p">:</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">}},</span>
      <span class="p">},</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">ts</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">string</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="na">r</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">number</span><span class="dl">"</span><span class="p">,</span>
          <span class="na">minimum</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
          <span class="na">exclusiveMaximum</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="na">id</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">integer</span><span class="dl">"</span><span class="p">,</span>
          <span class="na">minimum</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span><span class="na">ts</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="na">r</span><span class="p">:</span> <span class="kc">null</span><span class="p">}</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">data</span> <span class="c1">// { ts: '2016-12-01T22:07:28.829Z', r: 25, id: 0 }</span>
</code></pre></div></div>

<p>You can add your own dynamic default function to be recognised by this keyword:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">uuid</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">uuid</span><span class="dl">"</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">def</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">ajv-keywords/dist/definitions/dynamicDefaults</span><span class="dl">"</span><span class="p">)</span>
<span class="nx">def</span><span class="p">.</span><span class="nx">DEFAULTS</span><span class="p">.</span><span class="nx">uuid</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">uuid</span><span class="p">.</span><span class="nx">v4</span>

<span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">dynamicDefaults</span><span class="p">:</span> <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="dl">"</span><span class="s2">uuid</span><span class="dl">"</span><span class="p">},</span>
  <span class="na">properties</span><span class="p">:</span> <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">string</span><span class="dl">"</span><span class="p">,</span> <span class="na">format</span><span class="p">:</span> <span class="dl">"</span><span class="s2">uuid</span><span class="dl">"</span><span class="p">}},</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">data</span> <span class="c1">// { id: 'a1183fbe-697b-4030-9bcc-cfeb282a9150' };</span>

<span class="kd">const</span> <span class="nx">data1</span> <span class="o">=</span> <span class="p">{}</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="nx">data1</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">data1</span> <span class="c1">// { id: '5b008de7-1669-467a-a5c6-70fa244d7209' }</span>
</code></pre></div></div>

<p>You also can define dynamic default that accept parameters, e.g. version of uuid:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">uuid</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">uuid</span><span class="dl">"</span><span class="p">)</span>

<span class="kd">function</span> <span class="nx">getUuid</span><span class="p">(</span><span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">version</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">v</span><span class="dl">"</span> <span class="o">+</span> <span class="p">((</span><span class="nx">arvs</span> <span class="o">&amp;&amp;</span> <span class="nx">args</span><span class="p">.</span><span class="nx">v</span><span class="p">)</span> <span class="o">||</span> <span class="dl">"</span><span class="s2">4</span><span class="dl">"</span><span class="p">)</span>
  <span class="k">return</span> <span class="nx">uuid</span><span class="p">[</span><span class="nx">version</span><span class="p">]</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">def</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">ajv-keywords/dist/definitions/dynamicDefaults</span><span class="dl">"</span><span class="p">)</span>
<span class="nx">def</span><span class="p">.</span><span class="nx">DEFAULTS</span><span class="p">.</span><span class="nx">uuid</span> <span class="o">=</span> <span class="nx">getUuid</span>

<span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">dynamicDefaults</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">id1</span><span class="p">:</span> <span class="dl">"</span><span class="s2">uuid</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// v4</span>
    <span class="na">id2</span><span class="p">:</span> <span class="p">{</span><span class="na">func</span><span class="p">:</span> <span class="dl">"</span><span class="s2">uuid</span><span class="dl">"</span><span class="p">,</span> <span class="na">v</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span> <span class="c1">// v4</span>
    <span class="na">id3</span><span class="p">:</span> <span class="p">{</span><span class="na">func</span><span class="p">:</span> <span class="dl">"</span><span class="s2">uuid</span><span class="dl">"</span><span class="p">,</span> <span class="na">v</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="c1">// v1</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Please note</strong>: dynamic default functions are differentiated by the number of parameters they have (<code class="language-plaintext highlighter-rouge">function.length</code>). Functions that do not expect default must have one non-optional argument so that <code class="language-plaintext highlighter-rouge">function.length</code> &gt; 0.</p>

<p><code class="language-plaintext highlighter-rouge">dynamicDefaults</code> is not supported in <a href="https://github.com/ajv-validator/ajv/blob/master/docs/standalone.md">standalone validation code</a>.</p>

<h2 id="security-contact">Security contact</h2>

<p>To report a security vulnerability, please use the
<a href="https://tidelift.com/security">Tidelift security contact</a>.
Tidelift will coordinate the fix and disclosure.</p>

<p>Please do NOT report security vulnerabilities via GitHub issues.</p>

<h2 id="open-source-software-support">Open-source software support</h2>

<p>Ajv-keywords is a part of <a href="https://tidelift.com/subscription/pkg/npm-ajv-keywords?utm_source=npm-ajv-keywords&amp;utm_medium=referral&amp;utm_campaign=readme">Tidelift subscription</a> - it provides a centralised support to open-source software users, in addition to the support provided by software maintainers.</p>

<h2 id="license">License</h2>

<p><a href="https://github.com/epoberezkin/ajv-keywords/blob/master/LICENSE">MIT</a></p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
