<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>@sinonjs/fake-timers | portfolio</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="@sinonjs/fake-timers" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/myportfolio.client/node_modules/@sinonjs/fake-timers/" />
<meta property="og:url" content="http://localhost:4000/myportfolio.client/node_modules/@sinonjs/fake-timers/" />
<meta property="og:site_name" content="portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="@sinonjs/fake-timers" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"@sinonjs/fake-timers","url":"http://localhost:4000/myportfolio.client/node_modules/@sinonjs/fake-timers/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=059dd2210d8f0fb8d42af0cbb5c1b29e59b98886">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">portfolio</a></h1>
      

      <h1 id="sinonjsfake-timers"><code class="language-plaintext highlighter-rouge">@sinonjs/fake-timers</code></h1>

<p><a href="https://circleci.com/gh/sinonjs/fake-timers"><img src="https://circleci.com/gh/sinonjs/fake-timers.svg?style=svg" alt="CircleCI" /></a>
<a href="https://codecov.io/gh/sinonjs/fake-timers"><img src="https://codecov.io/gh/sinonjs/fake-timers/branch/master/graph/badge.svg" alt="codecov" /></a>
<a href="CODE_OF_CONDUCT.md"><img src="https://img.shields.io/badge/Contributor%20Covenant-v2.0%20adopted-ff69b4.svg" alt="Contributor Covenant" /></a></p>

<p>JavaScript implementation of the timer APIs; <code class="language-plaintext highlighter-rouge">setTimeout</code>, <code class="language-plaintext highlighter-rouge">clearTimeout</code>, <code class="language-plaintext highlighter-rouge">setImmediate</code>, <code class="language-plaintext highlighter-rouge">clearImmediate</code>, <code class="language-plaintext highlighter-rouge">setInterval</code>, <code class="language-plaintext highlighter-rouge">clearInterval</code>, <code class="language-plaintext highlighter-rouge">requestAnimationFrame</code>, <code class="language-plaintext highlighter-rouge">cancelAnimationFrame</code>, <code class="language-plaintext highlighter-rouge">requestIdleCallback</code>, and <code class="language-plaintext highlighter-rouge">cancelIdleCallback</code>, along with a clock instance that controls the flow of time. FakeTimers also provides a <code class="language-plaintext highlighter-rouge">Date</code> implementation that gets its time from the clock.</p>

<p>In addition in browser environment <code class="language-plaintext highlighter-rouge">@sinonjs/fake-timers</code> provides a <code class="language-plaintext highlighter-rouge">performance</code> implementation that gets its time from the clock. In Node environments FakeTimers provides a <code class="language-plaintext highlighter-rouge">nextTick</code> implementation that is synchronized with the clock - and a <code class="language-plaintext highlighter-rouge">process.hrtime</code> shim that works with the clock.</p>

<p><code class="language-plaintext highlighter-rouge">@sinonjs/fake-timers</code> can be used to simulate passing time in automated tests and other
situations where you want the scheduling semantics, but don’t want to actually
wait.</p>

<p><code class="language-plaintext highlighter-rouge">@sinonjs/fake-timers</code> is extracted from <a href="https://github.com/sinonjs/sinon.js">Sinon.JS</a> and targets the <a href="https://sinonjs.org/releases/latest/#supported-runtimes">same runtimes</a>.</p>

<h2 id="autocomplete-intellisense-and-typescript-definitions">Autocomplete, IntelliSense and TypeScript definitions</h2>

<p>Version 7 introduced JSDoc to the codebase. This should provide autocomplete and type suggestions in supporting IDEs. If you need more elaborate type support, TypeScript definitions for the Sinon projects are independently maintained by the Definitely Types community:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install -D @types/sinonjs__fake-timers
</code></pre></div></div>

<h2 id="installation">Installation</h2>

<p><code class="language-plaintext highlighter-rouge">@sinonjs/fake-timers</code> can be used in both Node and browser environments. Installation is as easy as</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> @sinonjs/fake-timers
</code></pre></div></div>

<p>If you want to use <code class="language-plaintext highlighter-rouge">@sinonjs/fake-timers</code> in a browser you can either build your own bundle or use <a href="https://www.skypack.dev">Skypack</a>.</p>

<h2 id="usage">Usage</h2>

<p>To use <code class="language-plaintext highlighter-rouge">@sinonjs/fake-timers</code>, create a new clock, schedule events on it using the timer
functions and pass time using the <code class="language-plaintext highlighter-rouge">tick</code> method.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// In the browser distribution, a global `FakeTimers` is already available</span>
<span class="kd">var</span> <span class="nx">FakeTimers</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@sinonjs/fake-timers</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">clock</span> <span class="o">=</span> <span class="nx">FakeTimers</span><span class="p">.</span><span class="nx">createClock</span><span class="p">();</span>

<span class="nx">clock</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
        <span class="dl">"</span><span class="s2">The poblano is a mild chili pepper originating in the state of Puebla, Mexico.</span><span class="dl">"</span>
    <span class="p">);</span>
<span class="p">},</span> <span class="mi">15</span><span class="p">);</span>

<span class="c1">// ...</span>

<span class="nx">clock</span><span class="p">.</span><span class="nx">tick</span><span class="p">(</span><span class="mi">15</span><span class="p">);</span>
</code></pre></div></div>

<p>Upon executing the last line, an interesting fact about the
<a href="https://en.wikipedia.org/wiki/Poblano">Poblano</a> will be printed synchronously to
the screen. If you want to simulate asynchronous behavior, you have to use your
imagination when calling the various functions.</p>

<p>The <code class="language-plaintext highlighter-rouge">next</code>, <code class="language-plaintext highlighter-rouge">runAll</code>, <code class="language-plaintext highlighter-rouge">runToFrame</code>, and <code class="language-plaintext highlighter-rouge">runToLast</code> methods are available to advance the clock. See the
API Reference for more details.</p>

<h3 id="faking-the-native-timers">Faking the native timers</h3>

<p>When using <code class="language-plaintext highlighter-rouge">@sinonjs/fake-timers</code> to test timers, you will most likely want to replace the native
timers such that calling <code class="language-plaintext highlighter-rouge">setTimeout</code> actually schedules a callback with your
clock instance, not the browser’s internals.</p>

<p>Calling <code class="language-plaintext highlighter-rouge">install</code> with no arguments achieves this. You can call <code class="language-plaintext highlighter-rouge">uninstall</code>
later to restore things as they were again.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// In the browser distribution, a global `FakeTimers` is already available</span>
<span class="kd">var</span> <span class="nx">FakeTimers</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@sinonjs/fake-timers</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">clock</span> <span class="o">=</span> <span class="nx">FakeTimers</span><span class="p">.</span><span class="nx">install</span><span class="p">();</span>
<span class="c1">// Equivalent to</span>
<span class="c1">// var clock = FakeTimers.install(typeof global !== "undefined" ? global : window);</span>

<span class="nx">setTimeout</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="mi">15</span><span class="p">);</span> <span class="c1">// Schedules with clock.setTimeout</span>

<span class="nx">clock</span><span class="p">.</span><span class="nx">uninstall</span><span class="p">();</span>
<span class="c1">// setTimeout is restored to the native implementation</span>
</code></pre></div></div>

<p>To hijack timers in another context pass it to the <code class="language-plaintext highlighter-rouge">install</code> method.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">FakeTimers</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@sinonjs/fake-timers</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">setTimeout</span><span class="p">:</span> <span class="nx">setTimeout</span><span class="p">,</span> <span class="c1">// By default context.setTimeout uses the global setTimeout</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">clock</span> <span class="o">=</span> <span class="nx">FakeTimers</span><span class="p">.</span><span class="nx">withGlobal</span><span class="p">(</span><span class="nx">context</span><span class="p">).</span><span class="nx">install</span><span class="p">();</span>

<span class="nx">context</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="mi">15</span><span class="p">);</span> <span class="c1">// Schedules with clock.setTimeout</span>

<span class="nx">clock</span><span class="p">.</span><span class="nx">uninstall</span><span class="p">();</span>
<span class="c1">// context.setTimeout is restored to the original implementation</span>
</code></pre></div></div>

<p>Usually you want to install the timers onto the global object, so call <code class="language-plaintext highlighter-rouge">install</code>
without arguments.</p>

<h4 id="automatically-incrementing-mocked-time">Automatically incrementing mocked time</h4>

<p>FakeTimers supports the possibility to attach the faked timers to any change
in the real system time. This means that there is no need to <code class="language-plaintext highlighter-rouge">tick()</code> the
clock in a situation where you won’t know <strong>when</strong> to call <code class="language-plaintext highlighter-rouge">tick()</code>.</p>

<p>Please note that this is achieved using the original setImmediate() API at a certain
configurable interval <code class="language-plaintext highlighter-rouge">config.advanceTimeDelta</code> (default: 20ms). Meaning time would
be incremented every 20ms, not in real time.</p>

<p>An example would be:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">FakeTimers</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@sinonjs/fake-timers</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">clock</span> <span class="o">=</span> <span class="nx">FakeTimers</span><span class="p">.</span><span class="nx">install</span><span class="p">({</span>
    <span class="na">shouldAdvanceTime</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">advanceTimeDelta</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span>
<span class="p">});</span>

<span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">this just timed out</span><span class="dl">"</span><span class="p">);</span> <span class="c1">//executed after 40ms</span>
<span class="p">},</span> <span class="mi">30</span><span class="p">);</span>

<span class="nx">setImmediate</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">not so immediate</span><span class="dl">"</span><span class="p">);</span> <span class="c1">//executed after 40ms</span>
<span class="p">});</span>

<span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">this timed out after</span><span class="dl">"</span><span class="p">);</span> <span class="c1">//executed after 80ms</span>
    <span class="nx">clock</span><span class="p">.</span><span class="nx">uninstall</span><span class="p">();</span>
<span class="p">},</span> <span class="mi">50</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="api-reference">API Reference</h2>

<h3 id="var-clock--faketimerscreateclocknow-looplimit"><code class="language-plaintext highlighter-rouge">var clock = FakeTimers.createClock([now[, loopLimit]])</code></h3>

<p>Creates a clock. The default
<a href="https://en.wikipedia.org/wiki/Epoch_%28reference_date%29">epoch</a> is <code class="language-plaintext highlighter-rouge">0</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">now</code> argument may be a number (in milliseconds) or a Date object.</p>

<p>The <code class="language-plaintext highlighter-rouge">loopLimit</code> argument sets the maximum number of timers that will be run when calling <code class="language-plaintext highlighter-rouge">runAll()</code> before assuming that we have an infinite loop and throwing an error. The default is <code class="language-plaintext highlighter-rouge">1000</code>.</p>

<h3 id="var-clock--faketimersinstallconfig"><code class="language-plaintext highlighter-rouge">var clock = FakeTimers.install([config])</code></h3>

<p>Installs FakeTimers using the specified config (otherwise with epoch <code class="language-plaintext highlighter-rouge">0</code> on the global scope). The following configuration options are available</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Type</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">config.now</code></td>
      <td>Number/Date</td>
      <td>0</td>
      <td>installs FakeTimers with the specified unix epoch</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">config.toFake</code></td>
      <td>String[]</td>
      <td>[“setTimeout”, “clearTimeout”, “setImmediate”, “clearImmediate”,”setInterval”, “clearInterval”, “Date”, “requestAnimationFrame”, “cancelAnimationFrame”, “requestIdleCallback”, “cancelIdleCallback”, “hrtime”]</td>
      <td>an array with explicit function names to hijack. <em>When not set, FakeTimers will automatically fake all methods <strong>except</strong> <code class="language-plaintext highlighter-rouge">nextTick</code></em> e.g., <code class="language-plaintext highlighter-rouge">FakeTimers.install({ toFake: ["setTimeout","nextTick"]})</code> will fake only <code class="language-plaintext highlighter-rouge">setTimeout</code> and <code class="language-plaintext highlighter-rouge">nextTick</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">config.loopLimit</code></td>
      <td>Number</td>
      <td>1000</td>
      <td>the maximum number of timers that will be run when calling runAll()</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">config.shouldAdvanceTime</code></td>
      <td>Boolean</td>
      <td>false</td>
      <td>tells FakeTimers to increment mocked time automatically based on the real system time shift (e.g. the mocked time will be incremented by 20ms for every 20ms change in the real system time)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">config.advanceTimeDelta</code></td>
      <td>Number</td>
      <td>20</td>
      <td>relevant only when using with <code class="language-plaintext highlighter-rouge">shouldAdvanceTime: true</code>. increment mocked time by <code class="language-plaintext highlighter-rouge">advanceTimeDelta</code> ms every <code class="language-plaintext highlighter-rouge">advanceTimeDelta</code> ms change in the real system time.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">config.shouldClearNativeTimers</code></td>
      <td>Boolean</td>
      <td>false</td>
      <td>tells FakeTimers to clear ‘native’ (i.e. not fake) timers by delegating to their respective handlers. These are not cleared by default, leading to potentially unexpected behavior if timers existed prior to installing FakeTimers.</td>
    </tr>
  </tbody>
</table>

<h3 id="var-id--clocksettimeoutcallback-timeout"><code class="language-plaintext highlighter-rouge">var id = clock.setTimeout(callback, timeout)</code></h3>

<p>Schedules the callback to be fired once <code class="language-plaintext highlighter-rouge">timeout</code> milliseconds have ticked by.</p>

<p>In Node.js <code class="language-plaintext highlighter-rouge">setTimeout</code> returns a timer object. FakeTimers will do the same, however
its <code class="language-plaintext highlighter-rouge">ref()</code> and <code class="language-plaintext highlighter-rouge">unref()</code> methods have no effect.</p>

<p>In browsers a timer ID is returned.</p>

<h3 id="clockcleartimeoutid"><code class="language-plaintext highlighter-rouge">clock.clearTimeout(id)</code></h3>

<p>Clears the timer given the ID or timer object, as long as it was created using
<code class="language-plaintext highlighter-rouge">setTimeout</code>.</p>

<h3 id="var-id--clocksetintervalcallback-timeout"><code class="language-plaintext highlighter-rouge">var id = clock.setInterval(callback, timeout)</code></h3>

<p>Schedules the callback to be fired every time <code class="language-plaintext highlighter-rouge">timeout</code> milliseconds have ticked
by.</p>

<p>In Node.js <code class="language-plaintext highlighter-rouge">setInterval</code> returns a timer object. FakeTimers will do the same, however
its <code class="language-plaintext highlighter-rouge">ref()</code> and <code class="language-plaintext highlighter-rouge">unref()</code> methods have no effect.</p>

<p>In browsers a timer ID is returned.</p>

<h3 id="clockclearintervalid"><code class="language-plaintext highlighter-rouge">clock.clearInterval(id)</code></h3>

<p>Clears the timer given the ID or timer object, as long as it was created using
<code class="language-plaintext highlighter-rouge">setInterval</code>.</p>

<h3 id="var-id--clocksetimmediatecallback"><code class="language-plaintext highlighter-rouge">var id = clock.setImmediate(callback)</code></h3>

<p>Schedules the callback to be fired once <code class="language-plaintext highlighter-rouge">0</code> milliseconds have ticked by. Note
that you’ll still have to call <code class="language-plaintext highlighter-rouge">clock.tick()</code> for the callback to fire. If
called during a tick the callback won’t fire until <code class="language-plaintext highlighter-rouge">1</code> millisecond has ticked
by.</p>

<p>In Node.js <code class="language-plaintext highlighter-rouge">setImmediate</code> returns a timer object. FakeTimers will do the same,
however its <code class="language-plaintext highlighter-rouge">ref()</code> and <code class="language-plaintext highlighter-rouge">unref()</code> methods have no effect.</p>

<p>In browsers a timer ID is returned.</p>

<h3 id="clockclearimmediateid"><code class="language-plaintext highlighter-rouge">clock.clearImmediate(id)</code></h3>

<p>Clears the timer given the ID or timer object, as long as it was created using
<code class="language-plaintext highlighter-rouge">setImmediate</code>.</p>

<h3 id="clockrequestanimationframecallback"><code class="language-plaintext highlighter-rouge">clock.requestAnimationFrame(callback)</code></h3>

<p>Schedules the callback to be fired on the next animation frame, which runs every
16 ticks. Returns an <code class="language-plaintext highlighter-rouge">id</code> which can be used to cancel the callback. This is
available in both browser &amp; node environments.</p>

<h3 id="clockcancelanimationframeid"><code class="language-plaintext highlighter-rouge">clock.cancelAnimationFrame(id)</code></h3>

<p>Cancels the callback scheduled by the provided id.</p>

<h3 id="clockrequestidlecallbackcallback-timeout"><code class="language-plaintext highlighter-rouge">clock.requestIdleCallback(callback[, timeout])</code></h3>

<p>Queued the callback to be fired during idle periods to perform background and low priority work on the main event loop. Callbacks which have a timeout option will be fired no later than time in milliseconds. Returns an <code class="language-plaintext highlighter-rouge">id</code> which can be used to cancel the callback.</p>

<h3 id="clockcancelidlecallbackid"><code class="language-plaintext highlighter-rouge">clock.cancelIdleCallback(id)</code></h3>

<p>Cancels the callback scheduled by the provided id.</p>

<h3 id="clockcounttimers"><code class="language-plaintext highlighter-rouge">clock.countTimers()</code></h3>

<p>Returns the number of waiting timers. This can be used to assert that a test
finishes without leaking any timers.</p>

<h3 id="clockhrtimeprevtime"><code class="language-plaintext highlighter-rouge">clock.hrtime(prevTime?)</code></h3>

<p>Only available in Node.js, mimicks process.hrtime().</p>

<h3 id="clocknexttickcallback"><code class="language-plaintext highlighter-rouge">clock.nextTick(callback)</code></h3>

<p>Only available in Node.js, mimics <code class="language-plaintext highlighter-rouge">process.nextTick</code> to enable completely synchronous testing flows.</p>

<h3 id="clockperformancenow"><code class="language-plaintext highlighter-rouge">clock.performance.now()</code></h3>

<p>Only available in browser environments, mimicks performance.now().</p>

<h3 id="clockticktime--await-clocktickasynctime"><code class="language-plaintext highlighter-rouge">clock.tick(time)</code> / <code class="language-plaintext highlighter-rouge">await clock.tickAsync(time)</code></h3>

<p>Advance the clock, firing callbacks if necessary. <code class="language-plaintext highlighter-rouge">time</code> may be the number of
milliseconds to advance the clock by or a human-readable string. Valid string
formats are <code class="language-plaintext highlighter-rouge">"08"</code> for eight seconds, <code class="language-plaintext highlighter-rouge">"01:00"</code> for one minute and <code class="language-plaintext highlighter-rouge">"02:34:10"</code>
for two hours, 34 minutes and ten seconds.</p>

<p>The <code class="language-plaintext highlighter-rouge">tickAsync()</code> will also break the event loop, allowing any scheduled promise
callbacks to execute <em>before</em> running the timers.</p>

<h3 id="clocknext--await-clocknextasync"><code class="language-plaintext highlighter-rouge">clock.next()</code> / <code class="language-plaintext highlighter-rouge">await clock.nextAsync()</code></h3>

<p>Advances the clock to the the moment of the first scheduled timer, firing it.</p>

<p>The <code class="language-plaintext highlighter-rouge">nextAsync()</code> will also break the event loop, allowing any scheduled promise
callbacks to execute <em>before</em> running the timers.</p>

<h3 id="clockreset"><code class="language-plaintext highlighter-rouge">clock.reset()</code></h3>

<p>Removes all timers and ticks without firing them, and sets <code class="language-plaintext highlighter-rouge">now</code> to <code class="language-plaintext highlighter-rouge">config.now</code>
that was provided to <code class="language-plaintext highlighter-rouge">FakeTimers.install</code> or to <code class="language-plaintext highlighter-rouge">0</code> if <code class="language-plaintext highlighter-rouge">config.now</code> was not provided.
Useful to reset the state of the clock without having to <code class="language-plaintext highlighter-rouge">uninstall</code> and <code class="language-plaintext highlighter-rouge">install</code> it.</p>

<h3 id="clockrunall--await-clockrunallasync"><code class="language-plaintext highlighter-rouge">clock.runAll()</code> / <code class="language-plaintext highlighter-rouge">await clock.runAllAsync()</code></h3>

<p>This runs all pending timers until there are none remaining. If new timers are added while it is executing they will be run as well.</p>

<p>This makes it easier to run asynchronous tests to completion without worrying about the number of timers they use, or the delays in those timers.</p>

<p>It runs a maximum of <code class="language-plaintext highlighter-rouge">loopLimit</code> times after which it assumes there is an infinite loop of timers and throws an error.</p>

<p>The <code class="language-plaintext highlighter-rouge">runAllAsync()</code> will also break the event loop, allowing any scheduled promise
callbacks to execute <em>before</em> running the timers.</p>

<h3 id="clockrunmicrotasks"><code class="language-plaintext highlighter-rouge">clock.runMicrotasks()</code></h3>

<p>This runs all pending microtasks scheduled with <code class="language-plaintext highlighter-rouge">nextTick</code> but none of the timers and is mostly useful for libraries using FakeTimers underneath and for running <code class="language-plaintext highlighter-rouge">nextTick</code> items without any timers.</p>

<h3 id="clockruntoframe"><code class="language-plaintext highlighter-rouge">clock.runToFrame()</code></h3>

<p>Advances the clock to the next frame, firing all scheduled animation frame callbacks,
if any, for that frame as well as any other timers scheduled along the way.</p>

<h3 id="clockruntolast--await-clockruntolastasync"><code class="language-plaintext highlighter-rouge">clock.runToLast()</code> / <code class="language-plaintext highlighter-rouge">await clock.runToLastAsync()</code></h3>

<p>This takes note of the last scheduled timer when it is run, and advances the
clock to that time firing callbacks as necessary.</p>

<p>If new timers are added while it is executing they will be run only if they
would occur before this time.</p>

<p>This is useful when you want to run a test to completion, but the test recursively
sets timers that would cause <code class="language-plaintext highlighter-rouge">runAll</code> to trigger an infinite loop warning.</p>

<p>The <code class="language-plaintext highlighter-rouge">runToLastAsync()</code> will also break the event loop, allowing any scheduled promise
callbacks to execute <em>before</em> running the timers.</p>

<h3 id="clocksetsystemtimenow"><code class="language-plaintext highlighter-rouge">clock.setSystemTime([now])</code></h3>

<p>This simulates a user changing the system clock while your program is running.
It affects the current time but it does not in itself cause e.g. timers to fire;
they will fire exactly as they would have done without the call to
setSystemTime().</p>

<h3 id="clockuninstall"><code class="language-plaintext highlighter-rouge">clock.uninstall()</code></h3>

<p>Restores the original methods of the native timers or the methods on the object
that was passed to <code class="language-plaintext highlighter-rouge">FakeTimers.withGlobal</code></p>

<h3 id="date"><code class="language-plaintext highlighter-rouge">Date</code></h3>

<p>Implements the <code class="language-plaintext highlighter-rouge">Date</code> object but using the clock to provide the correct time.</p>

<h3 id="performance"><code class="language-plaintext highlighter-rouge">Performance</code></h3>

<p>Implements the <code class="language-plaintext highlighter-rouge">now</code> method of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Performance/now"><code class="language-plaintext highlighter-rouge">Performance</code></a> object but using the clock to provide the correct time. Only available in environments that support the Performance object (browsers mostly).</p>

<h3 id="faketimerswithglobal"><code class="language-plaintext highlighter-rouge">FakeTimers.withGlobal</code></h3>

<p>In order to support creating clocks based on separate or sandboxed environments (such as JSDOM), FakeTimers exports a factory method which takes single argument <code class="language-plaintext highlighter-rouge">global</code>, which it inspects to figure out what to mock and what features to support. When invoking this function with a global, you will get back an object with <code class="language-plaintext highlighter-rouge">timers</code>, <code class="language-plaintext highlighter-rouge">createClock</code> and <code class="language-plaintext highlighter-rouge">install</code> - same as the regular FakeTimers exports only based on the passed in global instead of the global environment.</p>

<h2 id="running-tests">Running tests</h2>

<p>FakeTimers has a comprehensive test suite. If you’re thinking of contributing bug
fixes or suggesting new features, you need to make sure you have not broken any
tests. You are also expected to add tests for any new behavior.</p>

<h3 id="on-node">On node:</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">test</span>
</code></pre></div></div>

<p>Or, if you prefer more verbose output:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$(npm bin)/mocha ./test/fake-timers-test.js
</code></pre></div></div>

<h3 id="in-the-browser">In the browser</h3>

<p><a href="https://github.com/mantoni/mochify.js">Mochify</a> is used to run the tests in
PhantomJS. Make sure you have <code class="language-plaintext highlighter-rouge">phantomjs</code> installed. Then:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm test-headless
</code></pre></div></div>

<h2 id="license">License</h2>

<p>BSD 3-clause “New” or “Revised” License (see LICENSE file)</p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
