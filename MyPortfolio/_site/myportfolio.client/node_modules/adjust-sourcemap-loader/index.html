<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Adjust Source-map Loader | portfolio</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Adjust Source-map Loader" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/myportfolio.client/node_modules/adjust-sourcemap-loader/" />
<meta property="og:url" content="http://localhost:4000/myportfolio.client/node_modules/adjust-sourcemap-loader/" />
<meta property="og:site_name" content="portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Adjust Source-map Loader" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Adjust Source-map Loader","url":"http://localhost:4000/myportfolio.client/node_modules/adjust-sourcemap-loader/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=059dd2210d8f0fb8d42af0cbb5c1b29e59b98886">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">portfolio</a></h1>
      

      <h1 id="adjust-source-map-loader">Adjust Source-map Loader</h1>

<p><a href="http://github.com/bholloway/adjust-sourcemap-loader"><img src="https://nodei.co/npm/adjust-sourcemap-loader.png" alt="NPM" /></a></p>

<p>Webpack loader that adjusts source maps.</p>

<p>Use as a <strong>loader</strong> to debug source-maps or to adjust source-maps between other loaders.</p>

<p>Use as a <strong>module filename template</strong> to ensure the final source-map are to your liking.</p>

<h2 id="usage--loader">Usage : Loader</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">adjust-sourcemap?format=absolute!babel?sourceMap</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="source-maps-required">Source maps required</h3>

<p>Note that <strong>source maps</strong> must be enabled on any preceding loader. In the above example we use <code class="language-plaintext highlighter-rouge">babel?sourceMap</code>.</p>

<h3 id="apply-via-webpack-config">Apply via webpack config</h3>

<p>It is preferable to adjust your <code class="language-plaintext highlighter-rouge">webpack.config</code> so to avoid having to prefix every <code class="language-plaintext highlighter-rouge">require()</code> statement:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">module</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">loaders</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="na">test</span>   <span class="p">:</span> <span class="sr">/</span><span class="se">\.</span><span class="sr">js/</span><span class="p">,</span>
        <span class="na">loaders</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">adjust-sourcemap?format=absolute</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">babel?sourceMap</span><span class="dl">'</span><span class="p">]</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="usage--module-filename-template">Usage : Module filename template</h2>

<p>Specifying a certain format as the final step in a loader chain will <strong>not</strong> influence the final source format that Webpack will output. Instead the format is determined by the <strong>module filename template</strong>.</p>

<p>There are limitations to the filename templating that Webpack provides. This package may also operate as a custom template function that will convert output source-map sources to the desired <code class="language-plaintext highlighter-rouge">format</code>.</p>

<p>In the following example we ensure project-relative source-map sources are output.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">templateFn</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">adjust-sourcemap-loader</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">moduleFilenameTemplate</span><span class="p">({</span>
    <span class="na">format</span><span class="p">:</span> <span class="dl">'</span><span class="s1">projectRelative</span><span class="dl">'</span>
  <span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">output</span><span class="p">:</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="na">devtoolModuleFilenameTemplate</span>        <span class="p">:</span> <span class="nx">templateFn</span><span class="p">,</span>
    <span class="na">devtoolFallbackModuleFilenameTemplate</span><span class="p">:</span> <span class="nx">templateFn</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="options">Options</h2>

<p>As a loader, options may be set using <a href="https://webpack.github.io/docs/using-loaders.html#query-parameters">query parameters</a> or by using <a href="https://webpack.github.io/docs/how-to-write-a-loader.html#programmable-objects-as-query-option">programmatic parameters</a>. Programmatic means the following in your <code class="language-plaintext highlighter-rouge">webpack.config</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
   <span class="na">adjustSourcemapLoader</span><span class="p">:</span> <span class="p">{</span>
      <span class="p">...</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Where <code class="language-plaintext highlighter-rouge">...</code> is a hash of any of the following options.</p>

<ul>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">debug</code></strong> : <code class="language-plaintext highlighter-rouge">boolean|RegExp</code> May be used alone (boolean) or with a <code class="language-plaintext highlighter-rouge">RegExp</code> to match the resource(s) you are interested in debugging.</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">fail</code></strong> : <code class="language-plaintext highlighter-rouge">boolean</code> Implies an <strong>Error</strong> if a source-map source cannot be decoded.</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">format</code></strong> : <code class="language-plaintext highlighter-rouge">string</code> Optional output format for source-map <code class="language-plaintext highlighter-rouge">sources</code>. Must be the name of one of the available <code class="language-plaintext highlighter-rouge">codecs</code>. Omitting the format will result in <strong>no change</strong> and the outgoing source-map will match the incomming one.</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">root</code></strong> : <code class="language-plaintext highlighter-rouge">boolean</code> A boolean flag that indices that a <code class="language-plaintext highlighter-rouge">sourceRoot</code> path sould be included in the output map. This is contingent on a <code class="language-plaintext highlighter-rouge">format</code> being specified.</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">codecs</code></strong> : <code class="language-plaintext highlighter-rouge">Array.&lt;{name:string, decode:function, encode:function, root:function}&gt;</code> Optional Array of codecs. There are a number of built-in codecs available. If you specify you own codecs you will loose those that are built-in. However you can include them from the <code class="language-plaintext highlighter-rouge">codec/</code> directory.</p>
  </li>
</ul>

<p>Note that <strong>query</strong> parameters take precedence over <strong>programmatic</strong> parameters.</p>

<h3 id="changing-the-format">Changing the format</h3>

<p>Built-in codecs that may be specified as a <code class="language-plaintext highlighter-rouge">format</code> include:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">absolute</code></li>
  <li><code class="language-plaintext highlighter-rouge">outputRelative</code></li>
  <li><code class="language-plaintext highlighter-rouge">projectRelative</code></li>
  <li><code class="language-plaintext highlighter-rouge">webpackProtocol</code></li>
  <li><code class="language-plaintext highlighter-rouge">sourceRelative</code> (works for loader only, <strong>not</strong> Module filename template)</li>
</ul>

<h3 id="specifying-codecs">Specifying codecs</h3>

<p>There are additional built-in codecs that do not support encoding. These are still necessary to decode source-map sources. If you specify your own <code class="language-plaintext highlighter-rouge">options.codecs</code> then you should <strong>also include the built-in codecs</strong>. Otherwise you will find that some sources cannot be decoded.</p>

<p>The existing codecs may be found in <code class="language-plaintext highlighter-rouge">/codec</code>, or on the loader itself:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">inBuiltCodecs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">adjust-sourcemap-loader</span><span class="dl">'</span><span class="p">).</span><span class="nx">codecs</span><span class="p">,</span>
    <span class="nx">myCodecs</span>      <span class="o">=</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="na">name</span>  <span class="p">:</span> <span class="dl">'</span><span class="s1">foo</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">decode</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">uri</span><span class="p">)</span> <span class="p">{...},</span>
        <span class="na">encode</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">absolute</span><span class="p">)</span> <span class="p">{...},</span>
        <span class="na">root</span>  <span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{...}</span>
      <span class="p">},</span>
      <span class="p">...</span>
    <span class="p">];</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
   <span class="na">adjustSourcemapLoader</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">codecs</span><span class="p">:</span> <span class="nx">inBuiltCodecs</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">myCodecs</span><span class="p">)</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The codec <strong>order is important</strong>. Those that come first have precedence. Any codec that detects a distinct URI should be foremost so that illegal paths are not encountered by successive codecs.</p>

<h3 id="abstract-codecs">Abstract codecs</h3>

<p>A codec that detects generated code and cannot <code class="language-plaintext highlighter-rouge">decode()</code> a URI to an absolute file path.</p>

<p>Instead of implementing <code class="language-plaintext highlighter-rouge">encode()</code> or <code class="language-plaintext highlighter-rouge">root()</code> it should instead specify <code class="language-plaintext highlighter-rouge">abstract:true</code>. Its <code class="language-plaintext highlighter-rouge">decode()</code> function then may return <code class="language-plaintext highlighter-rouge">boolean</code> where it detects such generated sources.</p>

<p>For example, a built-in abstract codec will match the <strong>Webpack bootstrap</strong> code and ensure that its illegal source uri is not encountered by later coders.</p>

<h2 id="how-it-works">How it works</h2>

<p>The loader will receive a source map as its second parameter, so long as the preceding loader was using source-maps.</p>

<p>The exception is the <strong>css-loader</strong> where the source-map is in the content, which is <strong>not currently supported</strong> .</p>

<p>The source-map <code class="language-plaintext highlighter-rouge">sources</code> are parsed by applying <strong>codec.decode()</strong> functions until one of them returns an absolute path to a file that exists. The exception is abstract codecs, where the source with remain unchanged.</p>

<p>If a format is specified then the source-map <code class="language-plaintext highlighter-rouge">sources</code> are recreated by applying the <strong>codec.encode()</strong> function for the stated <code class="language-plaintext highlighter-rouge">format</code> and (where the <code class="language-plaintext highlighter-rouge">root</code> option is specified) the <strong>codec.root()</strong> function will set the source-map <code class="language-plaintext highlighter-rouge">sourceRoot</code>.</p>

<p>If a codec does not specify <strong>codec.encode()</strong> or <strong>codec.root()</strong> then it may <strong>not</strong> be used as the <code class="language-plaintext highlighter-rouge">format</code>.</p>



      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
