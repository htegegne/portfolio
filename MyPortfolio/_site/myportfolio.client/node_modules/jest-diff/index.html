<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>jest-diff | portfolio</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="jest-diff" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/myportfolio.client/node_modules/jest-diff/" />
<meta property="og:url" content="http://localhost:4000/myportfolio.client/node_modules/jest-diff/" />
<meta property="og:site_name" content="portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="jest-diff" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"jest-diff","url":"http://localhost:4000/myportfolio.client/node_modules/jest-diff/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=00c08f3bd19ad2390c706d50e4f8968f8b47944c">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">portfolio</a></h1>
      

      <h1 id="jest-diff">jest-diff</h1>

<p>Display differences clearly so people can review changes confidently.</p>

<p>The <code class="language-plaintext highlighter-rouge">diff</code> named export serializes JavaScript <strong>values</strong>, compares them line-by-line, and returns a string which includes comparison lines.</p>

<p>Two named exports compare <strong>strings</strong> character-by-character:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">diffStringsUnified</code> returns a string.</li>
  <li><code class="language-plaintext highlighter-rouge">diffStringsRaw</code> returns an array of <code class="language-plaintext highlighter-rouge">Diff</code> objects.</li>
</ul>

<p>Three named exports compare <strong>arrays of strings</strong> line-by-line:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">diffLinesUnified</code> and <code class="language-plaintext highlighter-rouge">diffLinesUnified2</code> return a string.</li>
  <li><code class="language-plaintext highlighter-rouge">diffLinesRaw</code> returns an array of <code class="language-plaintext highlighter-rouge">Diff</code> objects.</li>
</ul>

<h2 id="installation">Installation</h2>

<p>To add this package as a dependency of a project, run either of the following commands:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">npm install jest-diff</code></li>
  <li><code class="language-plaintext highlighter-rouge">yarn add jest-diff</code></li>
</ul>

<h2 id="usage-of-diff">Usage of <code class="language-plaintext highlighter-rouge">diff()</code></h2>

<p>Given JavaScript <strong>values</strong>, <code class="language-plaintext highlighter-rouge">diff(a, b, options?)</code> does the following:</p>

<ol>
  <li><strong>serialize</strong> the values as strings using the <code class="language-plaintext highlighter-rouge">pretty-format</code> package</li>
  <li><strong>compare</strong> the strings line-by-line using the <code class="language-plaintext highlighter-rouge">diff-sequences</code> package</li>
  <li><strong>format</strong> the changed or common lines using the <code class="language-plaintext highlighter-rouge">chalk</code> package</li>
</ol>

<p>To use this function, write either of the following:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">const {diff} = require('jest-diff');</code> in CommonJS modules</li>
  <li><code class="language-plaintext highlighter-rouge">import {diff} from 'jest-diff';</code> in ECMAScript modules</li>
</ul>

<h3 id="example-of-diff">Example of <code class="language-plaintext highlighter-rouge">diff()</code></h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">delete</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">common</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">changed from</span><span class="dl">'</span><span class="p">];</span>
<span class="kd">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">common</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">changed to</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">insert</span><span class="dl">'</span><span class="p">];</span>

<span class="kd">const</span> <span class="nx">difference</span> <span class="o">=</span> <span class="nx">diff</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
</code></pre></div></div>

<p>The returned <strong>string</strong> consists of:</p>

<ul>
  <li>annotation lines: describe the two change indicators with labels, and a blank line</li>
  <li>comparison lines: similar to “unified” view on GitHub, but <code class="language-plaintext highlighter-rouge">Expected</code> lines are green, <code class="language-plaintext highlighter-rouge">Received</code> lines are red, and common lines are dim (by default, see Options)</li>
</ul>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gd">- Expected
</span><span class="gi">+ Received
</span>
  Array [
<span class="gd">-   "delete",
</span>    "common",
<span class="gd">-   "changed from",
</span><span class="gi">+   "changed to",
+   "insert",
</span>  ]
</code></pre></div></div>

<h3 id="edge-cases-of-diff">Edge cases of <code class="language-plaintext highlighter-rouge">diff()</code></h3>

<p>Here are edge cases for the return value:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">' Comparing two different types of values. …'</code> if the arguments have <strong>different types</strong> according to the <code class="language-plaintext highlighter-rouge">jest-get-type</code> package (instances of different classes have the same <code class="language-plaintext highlighter-rouge">'object'</code> type)</li>
  <li><code class="language-plaintext highlighter-rouge">'Compared values have no visual difference.'</code> if the arguments have either <strong>referential identity</strong> according to <code class="language-plaintext highlighter-rouge">Object.is</code> method or <strong>same serialization</strong> according to the <code class="language-plaintext highlighter-rouge">pretty-format</code> package</li>
  <li><code class="language-plaintext highlighter-rouge">null</code> if either argument is a so-called <strong>asymmetric matcher</strong> in Jasmine or Jest</li>
</ul>

<h2 id="usage-of-diffstringsunified">Usage of diffStringsUnified</h2>

<p>Given <strong>strings</strong>, <code class="language-plaintext highlighter-rouge">diffStringsUnified(a, b, options?)</code> does the following:</p>

<ol>
  <li><strong>compare</strong> the strings character-by-character using the <code class="language-plaintext highlighter-rouge">diff-sequences</code> package</li>
  <li><strong>clean up</strong> small (often coincidental) common substrings, also known as chaff</li>
  <li><strong>format</strong> the changed or common lines using the <code class="language-plaintext highlighter-rouge">chalk</code> package</li>
</ol>

<p>Although the function is mainly for <strong>multiline</strong> strings, it compares any strings.</p>

<p>Write either of the following:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">const {diffStringsUnified} = require('jest-diff');</code> in CommonJS modules</li>
  <li><code class="language-plaintext highlighter-rouge">import {diffStringsUnified} from 'jest-diff';</code> in ECMAScript modules</li>
</ul>

<h3 id="example-of-diffstringsunified">Example of diffStringsUnified</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">common</span><span class="se">\n</span><span class="s1">changed from</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">common</span><span class="se">\n</span><span class="s1">changed to</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">difference</span> <span class="o">=</span> <span class="nx">diffStringsUnified</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
</code></pre></div></div>

<p>The returned <strong>string</strong> consists of:</p>

<ul>
  <li>annotation lines: describe the two change indicators with labels, and a blank line</li>
  <li>comparison lines: similar to “unified” view on GitHub, and <strong>changed substrings</strong> have <strong>inverse</strong> foreground and background colors (that is, <code class="language-plaintext highlighter-rouge">from</code> has white-on-green and <code class="language-plaintext highlighter-rouge">to</code> has white-on-red, which the following example does not show)</li>
</ul>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gd">- Expected
</span><span class="gi">+ Received
</span>
  common
<span class="gd">- changed from
</span><span class="gi">+ changed to
</span></code></pre></div></div>

<h3 id="performance-of-diffstringsunified">Performance of diffStringsUnified</h3>

<p>To get the benefit of <strong>changed substrings</strong> within the comparison lines, a character-by-character comparison has a higher computational cost (in time and space) than a line-by-line comparison.</p>

<p>If the input strings can have <strong>arbitrary length</strong>, we recommend that the calling code set a limit, beyond which splits the strings, and then calls <code class="language-plaintext highlighter-rouge">diffLinesUnified</code> instead. For example, Jest falls back to line-by-line comparison if either string has length greater than 20K characters.</p>

<h2 id="usage-of-difflinesunified">Usage of diffLinesUnified</h2>

<p>Given <strong>arrays of strings</strong>, <code class="language-plaintext highlighter-rouge">diffLinesUnified(aLines, bLines, options?)</code> does the following:</p>

<ol>
  <li><strong>compare</strong> the arrays line-by-line using the <code class="language-plaintext highlighter-rouge">diff-sequences</code> package</li>
  <li><strong>format</strong> the changed or common lines using the <code class="language-plaintext highlighter-rouge">chalk</code> package</li>
</ol>

<p>You might call this function when strings have been split into lines and you do not need to see changed substrings within lines.</p>

<h3 id="example-of-difflinesunified">Example of diffLinesUnified</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">aLines</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">delete</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">common</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">changed from</span><span class="dl">'</span><span class="p">];</span>
<span class="kd">const</span> <span class="nx">bLines</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">common</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">changed to</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">insert</span><span class="dl">'</span><span class="p">];</span>

<span class="kd">const</span> <span class="nx">difference</span> <span class="o">=</span> <span class="nx">diffLinesUnified</span><span class="p">(</span><span class="nx">aLines</span><span class="p">,</span> <span class="nx">bLines</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gd">- Expected
</span><span class="gi">+ Received
</span>
- delete
  common
<span class="gd">- changed from
</span><span class="gi">+ changed to
+ insert
</span></code></pre></div></div>

<h3 id="edge-cases-of-difflinesunified-or-diffstringsunified">Edge cases of diffLinesUnified or diffStringsUnified</h3>

<p>Here are edge cases for arguments and return values:</p>

<ul>
  <li>both <code class="language-plaintext highlighter-rouge">a</code> and <code class="language-plaintext highlighter-rouge">b</code> are empty strings: no comparison lines</li>
  <li>only <code class="language-plaintext highlighter-rouge">a</code> is empty string: all comparison lines have <code class="language-plaintext highlighter-rouge">bColor</code> and <code class="language-plaintext highlighter-rouge">bIndicator</code> (see Options)</li>
  <li>only <code class="language-plaintext highlighter-rouge">b</code> is empty string: all comparison lines have <code class="language-plaintext highlighter-rouge">aColor</code> and <code class="language-plaintext highlighter-rouge">aIndicator</code> (see Options)</li>
  <li><code class="language-plaintext highlighter-rouge">a</code> and <code class="language-plaintext highlighter-rouge">b</code> are equal non-empty strings: all comparison lines have <code class="language-plaintext highlighter-rouge">commonColor</code> and <code class="language-plaintext highlighter-rouge">commonIndicator</code> (see Options)</li>
</ul>

<h2 id="usage-of-difflinesunified2">Usage of diffLinesUnified2</h2>

<p>Given two <strong>pairs</strong> of arrays of strings, <code class="language-plaintext highlighter-rouge">diffLinesUnified2(aLinesDisplay, bLinesDisplay, aLinesCompare, bLinesCompare, options?)</code> does the following:</p>

<ol>
  <li><strong>compare</strong> the pair of <code class="language-plaintext highlighter-rouge">Compare</code> arrays line-by-line using the <code class="language-plaintext highlighter-rouge">diff-sequences</code> package</li>
  <li><strong>format</strong> the corresponding lines in the pair of <code class="language-plaintext highlighter-rouge">Display</code> arrays using the <code class="language-plaintext highlighter-rouge">chalk</code> package</li>
</ol>

<p>Jest calls this function to consider lines as common instead of changed if the only difference is indentation.</p>

<p>You might call this function for case insensitive or Unicode equivalence comparison of lines.</p>

<h3 id="example-of-difflinesunified2">Example of diffLinesUnified2</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">format</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">pretty-format</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Ignore indentation in serialized object</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">time</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2019-09-19T12:34:56.000Z</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">CREATE_ITEM</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">payload</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Ignore indentation in serialized object</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">time</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2019-09-19T12:34:56.000Z</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">CREATE_ITEM</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">difference</span> <span class="o">=</span> <span class="nx">diffLinesUnified2</span><span class="p">(</span>
  <span class="c1">// serialize with indentation to display lines</span>
  <span class="nx">format</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">),</span>
  <span class="nx">format</span><span class="p">(</span><span class="nx">b</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">),</span>
  <span class="c1">// serialize without indentation to compare lines</span>
  <span class="nx">format</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="p">{</span><span class="na">indent</span><span class="p">:</span> <span class="mi">0</span><span class="p">}).</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">),</span>
  <span class="nx">format</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="p">{</span><span class="na">indent</span><span class="p">:</span> <span class="mi">0</span><span class="p">}).</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">),</span>
<span class="p">);</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">text</code> and <code class="language-plaintext highlighter-rouge">time</code> properties are common, because their only difference is indentation:</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gd">- Expected
</span><span class="gi">+ Received
</span>
  Object {
<span class="gi">+   payload: Object {
</span>      text: 'Ignore indentation in serialized object',
      time: '2019-09-19T12:34:56.000Z',
<span class="gi">+   },
</span>    type: 'CREATE_ITEM',
  }
</code></pre></div></div>

<p>The preceding example illustrates why (at least for indentation) it seems more intuitive that the function returns the common line from the <code class="language-plaintext highlighter-rouge">bLinesDisplay</code> array instead of from the <code class="language-plaintext highlighter-rouge">aLinesDisplay</code> array.</p>

<h2 id="usage-of-diffstringsraw">Usage of diffStringsRaw</h2>

<p>Given <strong>strings</strong> and a boolean option, <code class="language-plaintext highlighter-rouge">diffStringsRaw(a, b, cleanup)</code> does the following:</p>

<ol>
  <li><strong>compare</strong> the strings character-by-character using the <code class="language-plaintext highlighter-rouge">diff-sequences</code> package</li>
  <li>optionally <strong>clean up</strong> small (often coincidental) common substrings, also known as chaff</li>
</ol>

<p>Because <code class="language-plaintext highlighter-rouge">diffStringsRaw</code> returns the difference as <strong>data</strong> instead of a string, you can format it as your application requires (for example, enclosed in HTML markup for browser instead of escape sequences for console).</p>

<p>The returned <strong>array</strong> describes substrings as instances of the <code class="language-plaintext highlighter-rouge">Diff</code> class, which calling code can access like array tuples:</p>

<p>The value at index <code class="language-plaintext highlighter-rouge">0</code> is one of the following:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">value</th>
      <th style="text-align: left">named export</th>
      <th style="text-align: left">description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">0</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">DIFF_EQUAL</code></td>
      <td style="text-align: left">in <code class="language-plaintext highlighter-rouge">a</code> and in <code class="language-plaintext highlighter-rouge">b</code></td>
    </tr>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">-1</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">DIFF_DELETE</code></td>
      <td style="text-align: left">in <code class="language-plaintext highlighter-rouge">a</code> but not in <code class="language-plaintext highlighter-rouge">b</code></td>
    </tr>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">1</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">DIFF_INSERT</code></td>
      <td style="text-align: left">in <code class="language-plaintext highlighter-rouge">b</code> but not in <code class="language-plaintext highlighter-rouge">a</code></td>
    </tr>
  </tbody>
</table>

<p>The value at index <code class="language-plaintext highlighter-rouge">1</code> is a substring of <code class="language-plaintext highlighter-rouge">a</code> or <code class="language-plaintext highlighter-rouge">b</code> or both.</p>

<h3 id="example-of-diffstringsraw-with-cleanup">Example of diffStringsRaw with cleanup</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">diffs</span> <span class="o">=</span> <span class="nx">diffStringsRaw</span><span class="p">(</span><span class="dl">'</span><span class="s1">changed from</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">changed to</span><span class="dl">'</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th style="text-align: right"><code class="language-plaintext highlighter-rouge">i</code></th>
      <th style="text-align: right"><code class="language-plaintext highlighter-rouge">diffs[i][0]</code></th>
      <th style="text-align: left"><code class="language-plaintext highlighter-rouge">diffs[i][1]</code></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">0</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">0</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'changed '</code></td>
    </tr>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">1</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">-1</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'from'</code></td>
    </tr>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">2</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">1</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'to'</code></td>
    </tr>
  </tbody>
</table>

<h3 id="example-of-diffstringsraw-without-cleanup">Example of diffStringsRaw without cleanup</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">diffs</span> <span class="o">=</span> <span class="nx">diffStringsRaw</span><span class="p">(</span><span class="dl">'</span><span class="s1">changed from</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">changed to</span><span class="dl">'</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th style="text-align: right"><code class="language-plaintext highlighter-rouge">i</code></th>
      <th style="text-align: right"><code class="language-plaintext highlighter-rouge">diffs[i][0]</code></th>
      <th style="text-align: left"><code class="language-plaintext highlighter-rouge">diffs[i][1]</code></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">0</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">0</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'changed '</code></td>
    </tr>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">1</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">-1</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'fr'</code></td>
    </tr>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">2</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">1</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'t'</code></td>
    </tr>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">3</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">0</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'o'</code></td>
    </tr>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">4</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">-1</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'m'</code></td>
    </tr>
  </tbody>
</table>

<h3 id="advanced-import-for-diffstringsraw">Advanced import for diffStringsRaw</h3>

<p>Here are all the named imports that you might need for the <code class="language-plaintext highlighter-rouge">diffStringsRaw</code> function:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">const {DIFF_DELETE, DIFF_EQUAL, DIFF_INSERT, Diff, diffStringsRaw} = require('jest-diff');</code> in CommonJS modules</li>
  <li><code class="language-plaintext highlighter-rouge">import {DIFF_DELETE, DIFF_EQUAL, DIFF_INSERT, Diff, diffStringsRaw} from 'jest-diff';</code> in ECMAScript modules</li>
</ul>

<p>To write a <strong>formatting</strong> function, you might need the named constants (and <code class="language-plaintext highlighter-rouge">Diff</code> in TypeScript annotations).</p>

<p>If you write an application-specific <strong>cleanup</strong> algorithm, then you might need to call the <code class="language-plaintext highlighter-rouge">Diff</code> constructor:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">diffCommon</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Diff</span><span class="p">(</span><span class="nx">DIFF_EQUAL</span><span class="p">,</span> <span class="dl">'</span><span class="s1">changed </span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">diffDelete</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Diff</span><span class="p">(</span><span class="nx">DIFF_DELETE</span><span class="p">,</span> <span class="dl">'</span><span class="s1">from</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">diffInsert</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Diff</span><span class="p">(</span><span class="nx">DIFF_INSERT</span><span class="p">,</span> <span class="dl">'</span><span class="s1">to</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="usage-of-difflinesraw">Usage of diffLinesRaw</h2>

<p>Given <strong>arrays of strings</strong>, <code class="language-plaintext highlighter-rouge">diffLinesRaw(aLines, bLines)</code> does the following:</p>

<ul>
  <li><strong>compare</strong> the arrays line-by-line using the <code class="language-plaintext highlighter-rouge">diff-sequences</code> package</li>
</ul>

<p>Because <code class="language-plaintext highlighter-rouge">diffLinesRaw</code> returns the difference as <strong>data</strong> instead of a string, you can format it as your application requires.</p>

<h3 id="example-of-difflinesraw">Example of diffLinesRaw</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">aLines</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">delete</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">common</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">changed from</span><span class="dl">'</span><span class="p">];</span>
<span class="kd">const</span> <span class="nx">bLines</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">common</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">changed to</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">insert</span><span class="dl">'</span><span class="p">];</span>

<span class="kd">const</span> <span class="nx">diffs</span> <span class="o">=</span> <span class="nx">diffLinesRaw</span><span class="p">(</span><span class="nx">aLines</span><span class="p">,</span> <span class="nx">bLines</span><span class="p">);</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th style="text-align: right"><code class="language-plaintext highlighter-rouge">i</code></th>
      <th style="text-align: right"><code class="language-plaintext highlighter-rouge">diffs[i][0]</code></th>
      <th style="text-align: left"><code class="language-plaintext highlighter-rouge">diffs[i][1]</code></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">0</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">-1</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'delete'</code></td>
    </tr>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">1</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">0</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'common'</code></td>
    </tr>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">2</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">-1</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'changed from'</code></td>
    </tr>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">3</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">1</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'changed to'</code></td>
    </tr>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">4</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">1</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'insert'</code></td>
    </tr>
  </tbody>
</table>

<h3 id="edge-case-of-difflinesraw">Edge case of diffLinesRaw</h3>

<p>If you call <code class="language-plaintext highlighter-rouge">string.split('\n')</code> for an empty string:</p>

<ul>
  <li>the result is <code class="language-plaintext highlighter-rouge">['']</code> an array which contains an empty string</li>
  <li>instead of <code class="language-plaintext highlighter-rouge">[]</code> an empty array</li>
</ul>

<p>Depending of your application, you might call <code class="language-plaintext highlighter-rouge">diffLinesRaw</code> with either array.</p>

<h3 id="example-of-split-method">Example of split method</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">diffLinesRaw</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">jest-diff</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">non-empty string</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">diffs</span> <span class="o">=</span> <span class="nx">diffLinesRaw</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">),</span> <span class="nx">b</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">));</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th style="text-align: right"><code class="language-plaintext highlighter-rouge">i</code></th>
      <th style="text-align: right"><code class="language-plaintext highlighter-rouge">diffs[i][0]</code></th>
      <th style="text-align: left"><code class="language-plaintext highlighter-rouge">diffs[i][1]</code></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">0</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">-1</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'non-empty string'</code></td>
    </tr>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">1</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">1</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">''</code></td>
    </tr>
  </tbody>
</table>

<p>Which you might format as follows:</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gd">- Expected  - 1
</span><span class="gi">+ Received  + 1
</span>
- non-empty string
<span class="gi">+
</span></code></pre></div></div>

<h3 id="example-of-splitlines0-function">Example of splitLines0 function</h3>

<p>For edge case behavior like the <code class="language-plaintext highlighter-rouge">diffLinesUnified</code> function, you might define a <code class="language-plaintext highlighter-rouge">splitLines0</code> function, which given an empty string, returns <code class="language-plaintext highlighter-rouge">[]</code> an empty array:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">splitLines0</span> <span class="o">=</span> <span class="nx">string</span> <span class="o">=&gt;</span>
  <span class="nx">string</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">?</span> <span class="p">[]</span> <span class="p">:</span> <span class="nx">string</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">diffLinesRaw</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">jest-diff</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">line 1</span><span class="se">\n</span><span class="s1">line 2</span><span class="se">\n</span><span class="s1">line 3</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">diffs</span> <span class="o">=</span> <span class="nx">diffLinesRaw</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">),</span> <span class="nx">b</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">));</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th style="text-align: right"><code class="language-plaintext highlighter-rouge">i</code></th>
      <th style="text-align: right"><code class="language-plaintext highlighter-rouge">diffs[i][0]</code></th>
      <th style="text-align: left"><code class="language-plaintext highlighter-rouge">diffs[i][1]</code></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">0</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">1</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'line 1'</code></td>
    </tr>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">1</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">1</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'line 2'</code></td>
    </tr>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">2</code></td>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">1</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'line 3'</code></td>
    </tr>
  </tbody>
</table>

<p>Which you might format as follows:</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gd">- Expected  - 0
</span><span class="gi">+ Received  + 3
</span>
+ line 1
<span class="gi">+ line 2
+ line 3
</span></code></pre></div></div>

<p>In contrast to the <code class="language-plaintext highlighter-rouge">diffLinesRaw</code> function, the <code class="language-plaintext highlighter-rouge">diffLinesUnified</code> and <code class="language-plaintext highlighter-rouge">diffLinesUnified2</code> functions <strong>automatically</strong> convert array arguments computed by string <code class="language-plaintext highlighter-rouge">split</code> method, so callers do <strong>not</strong> need a <code class="language-plaintext highlighter-rouge">splitLine0</code> function.</p>

<h2 id="options">Options</h2>

<p>The default options are for the report when an assertion fails from the <code class="language-plaintext highlighter-rouge">expect</code> package used by Jest.</p>

<p>For other applications, you can provide an options object as a third argument:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">diff(a, b, options)</code></li>
  <li><code class="language-plaintext highlighter-rouge">diffStringsUnified(a, b, options)</code></li>
  <li><code class="language-plaintext highlighter-rouge">diffLinesUnified(aLines, bLines, options)</code></li>
  <li><code class="language-plaintext highlighter-rouge">diffLinesUnified2(aLinesDisplay, bLinesDisplay, aLinesCompare, bLinesCompare, options)</code></li>
</ul>

<h3 id="properties-of-options-object">Properties of options object</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">name</th>
      <th style="text-align: left">default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">aAnnotation</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'Expected'</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">aColor</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">chalk.green</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">aIndicator</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'-'</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bAnnotation</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'Received'</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bColor</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">chalk.red</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bIndicator</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'+'</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">changeColor</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">chalk.inverse</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">changeLineTrailingSpaceColor</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">string =&gt; string</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">commonColor</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">chalk.dim</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">commonIndicator</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">' '</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">commonLineTrailingSpaceColor</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">string =&gt; string</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">compareKeys</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">undefined</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">contextLines</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">5</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">emptyFirstOrLastLinePlaceholder</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">''</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">expand</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">true</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">includeChangeCounts</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">false</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">omitAnnotationLines</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">false</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">patchColor</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">chalk.yellow</code></td>
    </tr>
  </tbody>
</table>

<p>For more information about the options, see the following examples.</p>

<h3 id="example-of-options-for-labels">Example of options for labels</h3>

<p>If the application is code modification, you might replace the labels:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">aAnnotation</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Original</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">bAnnotation</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Modified</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gd">- Original
</span><span class="gi">+ Modified
</span>
  common
<span class="gd">- changed from
</span><span class="gi">+ changed to
</span></code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">jest-diff</code> package does not assume that the 2 labels have equal length.</p>

<h3 id="example-of-options-for-colors-of-changed-lines">Example of options for colors of changed lines</h3>

<p>For consistency with most diff tools, you might exchange the colors:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">chalk</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">chalk</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">aColor</span><span class="p">:</span> <span class="nx">chalk</span><span class="p">.</span><span class="nx">red</span><span class="p">,</span>
  <span class="na">bColor</span><span class="p">:</span> <span class="nx">chalk</span><span class="p">.</span><span class="nx">green</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="example-of-option-for-color-of-changed-substrings">Example of option for color of changed substrings</h3>

<p>Although the default inverse of foreground and background colors is hard to beat for changed substrings <strong>within lines</strong>, especially because it highlights spaces, if you want bold font weight on yellow background color:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">chalk</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">chalk</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">changeColor</span><span class="p">:</span> <span class="nx">chalk</span><span class="p">.</span><span class="nx">bold</span><span class="p">.</span><span class="nx">bgYellowBright</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="example-of-option-to-format-trailing-spaces">Example of option to format trailing spaces</h3>

<p>Because <code class="language-plaintext highlighter-rouge">diff()</code> does not display substring differences within lines, formatting can help you see when lines differ by the presence or absence of trailing spaces found by <code class="language-plaintext highlighter-rouge">/\s+$/</code> regular expression.</p>

<ul>
  <li>If change lines have a background color, then you can see trailing spaces.</li>
  <li>If common lines have default dim color, then you cannot see trailing spaces. You might want yellowish background color to see them.</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">aColor</span><span class="p">:</span> <span class="nx">chalk</span><span class="p">.</span><span class="nx">rgb</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">).</span><span class="nx">bgRgb</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">215</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="c1">// magenta</span>
  <span class="na">bColor</span><span class="p">:</span> <span class="nx">chalk</span><span class="p">.</span><span class="nx">rgb</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span><span class="nx">bgRgb</span><span class="p">(</span><span class="mi">215</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">215</span><span class="p">),</span> <span class="c1">// green</span>
  <span class="na">commonLineTrailingSpaceColor</span><span class="p">:</span> <span class="nx">chalk</span><span class="p">.</span><span class="nx">bgYellow</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<p>The value of a Color option is a function, which given a string, returns a string.</p>

<p>If you want to replace trailing spaces with middle dot characters:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">replaceSpacesWithMiddleDot</span> <span class="o">=</span> <span class="nx">string</span> <span class="o">=&gt;</span> <span class="dl">'</span><span class="s1">·</span><span class="dl">'</span><span class="p">.</span><span class="nx">repeat</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">changeLineTrailingSpaceColor</span><span class="p">:</span> <span class="nx">replaceSpacesWithMiddleDot</span><span class="p">,</span>
  <span class="na">commonLineTrailingSpaceColor</span><span class="p">:</span> <span class="nx">replaceSpacesWithMiddleDot</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<p>If you need the TypeScript type of a Color option:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">DiffOptionsColor</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">jest-diff</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="example-of-options-for-no-colors">Example of options for no colors</h3>

<p>To store the difference in a file without escape codes for colors, provide an identity function:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">noColor</span> <span class="o">=</span> <span class="nx">string</span> <span class="o">=&gt;</span> <span class="nx">string</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">aColor</span><span class="p">:</span> <span class="nx">noColor</span><span class="p">,</span>
  <span class="na">bColor</span><span class="p">:</span> <span class="nx">noColor</span><span class="p">,</span>
  <span class="na">changeColor</span><span class="p">:</span> <span class="nx">noColor</span><span class="p">,</span>
  <span class="na">commonColor</span><span class="p">:</span> <span class="nx">noColor</span><span class="p">,</span>
  <span class="na">patchColor</span><span class="p">:</span> <span class="nx">noColor</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="example-of-options-for-indicators">Example of options for indicators</h3>

<p>For consistency with the <code class="language-plaintext highlighter-rouge">diff</code> command, you might replace the indicators:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">aIndicator</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&lt;</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">bIndicator</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&gt;</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">jest-diff</code> package assumes (but does not enforce) that the 3 indicators have equal length.</p>

<h3 id="example-of-options-to-limit-common-lines">Example of options to limit common lines</h3>

<p>By default, the output includes all common lines.</p>

<p>To emphasize the changes, you might limit the number of common “context” lines:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">contextLines</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">expand</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<p>A patch mark like <code class="language-plaintext highlighter-rouge">@@ -12,7 +12,9 @@</code> accounts for omitted common lines.</p>

<h3 id="example-of-option-for-color-of-patch-marks">Example of option for color of patch marks</h3>

<p>If you want patch marks to have the same dim color as common lines:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">chalk</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">chalk</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">expand</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">patchColor</span><span class="p">:</span> <span class="nx">chalk</span><span class="p">.</span><span class="nx">dim</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="example-of-option-to-include-change-counts">Example of option to include change counts</h3>

<p>To display the number of changed lines at the right of annotation lines:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">common</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">changed from</span><span class="dl">'</span><span class="p">];</span>
<span class="kd">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">common</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">changed to</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">insert</span><span class="dl">'</span><span class="p">];</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">includeChangeCounts</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">difference</span> <span class="o">=</span> <span class="nx">diff</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gd">- Expected  - 1
</span><span class="gi">+ Received  + 2
</span>
  Array [
    "common",
<span class="gd">-   "changed from",
</span><span class="gi">+   "changed to",
+   "insert",
</span>  ]
</code></pre></div></div>

<h3 id="example-of-option-to-omit-annotation-lines">Example of option to omit annotation lines</h3>

<p>To display only the comparison lines:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">common</span><span class="se">\n</span><span class="s1">changed from</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">common</span><span class="se">\n</span><span class="s1">changed to</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">omitAnnotationLines</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">difference</span> <span class="o">=</span> <span class="nx">diffStringsUnified</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  common
<span class="gd">- changed from
</span><span class="gi">+ changed to
</span></code></pre></div></div>

<h3 id="example-of-option-for-empty-first-or-last-lines">Example of option for empty first or last lines</h3>

<p>If the <strong>first</strong> or <strong>last</strong> comparison line is <strong>empty</strong>, because the content is empty and the indicator is a space, you might not notice it.</p>

<p>The replacement option is a string whose default value is <code class="language-plaintext highlighter-rouge">''</code> empty string.</p>

<p>Because Jest trims the report when a matcher fails, it deletes an empty last line.</p>

<p>Therefore, Jest uses as placeholder the downwards arrow with corner leftwards:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">emptyFirstOrLastLinePlaceholder</span><span class="p">:</span> <span class="dl">'</span><span class="s1">↵</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// U+21B5</span>
<span class="p">};</span>
</code></pre></div></div>

<p>If a content line is empty, then the corresponding comparison line is automatically trimmed to remove the margin space (represented as a middle dot below) for the default indicators:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Indicator</th>
      <th style="text-align: left">untrimmed</th>
      <th style="text-align: left">trimmed</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">aIndicator</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'-·'</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'-'</code></td>
    </tr>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">bIndicator</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'+·'</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'+'</code></td>
    </tr>
    <tr>
      <td style="text-align: right"><code class="language-plaintext highlighter-rouge">commonIndicator</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">' ·'</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">''</code></td>
    </tr>
  </tbody>
</table>

<h3 id="example-of-option-for-sorting-object-keys">Example of option for sorting object keys</h3>

<p>When two objects are compared their keys are printed in alphabetical order by default. If this was not the original order of the keys the diff becomes harder to read as the keys are not in their original position.</p>

<p>Use <code class="language-plaintext highlighter-rouge">compareKeys</code> to pass a function which will be used when sorting the object keys.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">{</span><span class="na">c</span><span class="p">:</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b1</span><span class="dl">'</span><span class="p">,</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">};</span>
<span class="kd">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">{</span><span class="na">c</span><span class="p">:</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b2</span><span class="dl">'</span><span class="p">,</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">};</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// The keys will be in their original order</span>
  <span class="na">compareKeys</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">difference</span> <span class="o">=</span> <span class="nx">diff</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gd">- Expected
</span><span class="gi">+ Received
</span>
  Object {
    "c": "c",
<span class="gd">-   "b": "b1",
</span><span class="gi">+   "b": "b2",
</span>    "a": "a",
  }
</code></pre></div></div>

<p>Depending on the implementation of <code class="language-plaintext highlighter-rouge">compareKeys</code> any sort order can be used.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">{</span><span class="na">c</span><span class="p">:</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b1</span><span class="dl">'</span><span class="p">,</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">};</span>
<span class="kd">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">{</span><span class="na">c</span><span class="p">:</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b2</span><span class="dl">'</span><span class="p">,</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">};</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// The keys will be in reverse order</span>
  <span class="na">compareKeys</span><span class="p">:</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">a</span> <span class="o">&gt;</span> <span class="nx">b</span> <span class="p">?</span> <span class="o">-</span><span class="mi">1</span> <span class="p">:</span> <span class="mi">1</span><span class="p">),</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">difference</span> <span class="o">=</span> <span class="nx">diff</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gd">- Expected
</span><span class="gi">+ Received
</span>
  Object {
    "a": "a",
<span class="gd">-   "b": "b1",
</span><span class="gi">+   "b": "b2",
</span>    "c": "c",
  }
</code></pre></div></div>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
