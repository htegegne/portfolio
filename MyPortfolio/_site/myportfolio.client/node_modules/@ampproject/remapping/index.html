<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>@ampproject/remapping | portfolio</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="@ampproject/remapping" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/myportfolio.client/node_modules/@ampproject/remapping/" />
<meta property="og:url" content="http://localhost:4000/myportfolio.client/node_modules/@ampproject/remapping/" />
<meta property="og:site_name" content="portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="@ampproject/remapping" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"@ampproject/remapping","url":"http://localhost:4000/myportfolio.client/node_modules/@ampproject/remapping/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=00c08f3bd19ad2390c706d50e4f8968f8b47944c">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">portfolio</a></h1>
      

      <h1 id="ampprojectremapping">@ampproject/remapping</h1>

<blockquote>
  <p>Remap sequential sourcemaps through transformations to point at the original source code</p>
</blockquote>

<p>Remapping allows you to take the sourcemaps generated through transforming your code and “remap”
them to the original source locations. Think “my minified code, transformed with babel and bundled
with webpack”, all pointing to the correct location in your original source code.</p>

<p>With remapping, none of your source code transformations need to be aware of the input’s sourcemap,
they only need to generate an output sourcemap. This greatly simplifies building custom
transformations (think a find-and-replace).</p>

<h2 id="installation">Installation</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> @ampproject/remapping
</code></pre></div></div>

<h2 id="usage">Usage</h2>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">remapping</span><span class="p">(</span>
  <span class="nx">map</span><span class="p">:</span> <span class="nx">SourceMap</span> <span class="o">|</span> <span class="nx">SourceMap</span><span class="p">[],</span>
  <span class="nx">loader</span><span class="p">:</span> <span class="p">(</span><span class="nx">file</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">:</span> <span class="nx">LoaderContext</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">SourceMap</span> <span class="o">|</span> <span class="kc">null</span> <span class="o">|</span> <span class="kc">undefined</span><span class="p">),</span>
  <span class="nx">options</span><span class="p">?:</span> <span class="p">{</span> <span class="na">excludeContent</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">,</span> <span class="na">decodedMappings</span><span class="p">:</span> <span class="nx">boolean</span> <span class="p">}</span>
<span class="p">):</span> <span class="nx">SourceMap</span><span class="p">;</span>

<span class="c1">// LoaderContext gives the loader the importing sourcemap, tree depth, the ability to override the</span>
<span class="c1">// "source" location (where child sources are resolved relative to, or the location of original</span>
<span class="c1">// source), and the ability to override the "content" of an original source for inclusion in the</span>
<span class="c1">// output sourcemap.</span>
<span class="kd">type</span> <span class="nx">LoaderContext</span> <span class="o">=</span> <span class="p">{</span>
 <span class="k">readonly</span> <span class="na">importer</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
 <span class="k">readonly</span> <span class="na">depth</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
 <span class="nl">source</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
 <span class="nl">content</span><span class="p">:</span> <span class="kr">string</span> <span class="o">|</span> <span class="kc">null</span> <span class="o">|</span> <span class="kc">undefined</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">remapping</code> takes the final output sourcemap, and a <code class="language-plaintext highlighter-rouge">loader</code> function. For every source file pointer
in the sourcemap, the <code class="language-plaintext highlighter-rouge">loader</code> will be called with the resolved path. If the path itself represents
a transformed file (it has a sourcmap associated with it), then the <code class="language-plaintext highlighter-rouge">loader</code> should return that
sourcemap. If not, the path will be treated as an original, untransformed source code.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Babel transformed "helloworld.js" into "transformed.js"</span>
<span class="kd">const</span> <span class="nx">transformedMap</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">file</span><span class="p">:</span> <span class="dl">'</span><span class="s1">transformed.js</span><span class="dl">'</span><span class="p">,</span>
  <span class="c1">// 1st column of 2nd line of output file translates into the 1st source</span>
  <span class="c1">// file, line 3, column 2</span>
  <span class="na">mappings</span><span class="p">:</span> <span class="dl">'</span><span class="s1">;CAEE</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">sources</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">helloworld.js</span><span class="dl">'</span><span class="p">],</span>
  <span class="na">version</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">});</span>

<span class="c1">// Uglify minified "transformed.js" into "transformed.min.js"</span>
<span class="kd">const</span> <span class="nx">minifiedTransformedMap</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">file</span><span class="p">:</span> <span class="dl">'</span><span class="s1">transformed.min.js</span><span class="dl">'</span><span class="p">,</span>
  <span class="c1">// 0th column of 1st line of output file translates into the 1st source</span>
  <span class="c1">// file, line 2, column 1.</span>
  <span class="na">mappings</span><span class="p">:</span> <span class="dl">'</span><span class="s1">AACC</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">names</span><span class="p">:</span> <span class="p">[],</span>
  <span class="na">sources</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">transformed.js</span><span class="dl">'</span><span class="p">],</span>
  <span class="na">version</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">remapped</span> <span class="o">=</span> <span class="nx">remapping</span><span class="p">(</span>
  <span class="nx">minifiedTransformedMap</span><span class="p">,</span>
  <span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="c1">// The "transformed.js" file is an transformed file.</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">file</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">transformed.js</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// The root importer is empty.</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">importer</span> <span class="o">===</span> <span class="dl">''</span><span class="p">);</span>
      <span class="c1">// The depth in the sourcemap tree we're currently loading.</span>
      <span class="c1">// The root `minifiedTransformedMap` is depth 0, and its source children are depth 1, etc.</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">depth</span> <span class="o">===</span> <span class="mi">1</span><span class="p">);</span>

      <span class="k">return</span> <span class="nx">transformedMap</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Loader will be called to load transformedMap's source file pointers as well.</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nx">file</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">helloworld.js</span><span class="dl">'</span><span class="p">);</span>
    <span class="c1">// `transformed.js`'s sourcemap points into `helloworld.js`.</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">importer</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">transformed.js</span><span class="dl">'</span><span class="p">);</span>
    <span class="c1">// This is a source child of `transformed`, which is a source child of `minifiedTransformedMap`.</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">depth</span> <span class="o">===</span> <span class="mi">2</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">remapped</span><span class="p">);</span>
<span class="c1">// {</span>
<span class="c1">//   file: 'transpiled.min.js',</span>
<span class="c1">//   mappings: 'AAEE',</span>
<span class="c1">//   sources: ['helloworld.js'],</span>
<span class="c1">//   version: 3,</span>
<span class="c1">// };</span>
</code></pre></div></div>

<p>In this example, <code class="language-plaintext highlighter-rouge">loader</code> will be called twice:</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">"transformed.js"</code>, the first source file pointer in the <code class="language-plaintext highlighter-rouge">minifiedTransformedMap</code>. We return the
associated sourcemap for it (its a transformed file, after all) so that sourcemap locations can
be traced through it into the source files it represents.</li>
  <li><code class="language-plaintext highlighter-rouge">"helloworld.js"</code>, our original, unmodified source code. This file does not have a sourcemap, so
we return <code class="language-plaintext highlighter-rouge">null</code>.</li>
</ol>

<p>The <code class="language-plaintext highlighter-rouge">remapped</code> sourcemap now points from <code class="language-plaintext highlighter-rouge">transformed.min.js</code> into locations in <code class="language-plaintext highlighter-rouge">helloworld.js</code>. If
you were to read the <code class="language-plaintext highlighter-rouge">mappings</code>, it says “0th column of the first line output line points to the 1st
column of the 2nd line of the file <code class="language-plaintext highlighter-rouge">helloworld.js</code>”.</p>

<h3 id="multiple-transformations-of-a-file">Multiple transformations of a file</h3>

<p>As a convenience, if you have multiple single-source transformations of a file, you may pass an
array of sourcemap files in the order of most-recent transformation sourcemap first. Note that this
changes the <code class="language-plaintext highlighter-rouge">importer</code> and <code class="language-plaintext highlighter-rouge">depth</code> of each call to our loader. So our above example could have been
written as:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">remapped</span> <span class="o">=</span> <span class="nx">remapping</span><span class="p">(</span>
  <span class="p">[</span><span class="nx">minifiedTransformedMap</span><span class="p">,</span> <span class="nx">transformedMap</span><span class="p">],</span>
  <span class="p">()</span> <span class="o">=&gt;</span> <span class="kc">null</span>
<span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">remapped</span><span class="p">);</span>
<span class="c1">// {</span>
<span class="c1">//   file: 'transpiled.min.js',</span>
<span class="c1">//   mappings: 'AAEE',</span>
<span class="c1">//   sources: ['helloworld.js'],</span>
<span class="c1">//   version: 3,</span>
<span class="c1">// };</span>
</code></pre></div></div>

<h3 id="advanced-control-of-the-loading-graph">Advanced control of the loading graph</h3>

<h4 id="source"><code class="language-plaintext highlighter-rouge">source</code></h4>

<p>The <code class="language-plaintext highlighter-rouge">source</code> property can overridden to any value to change the location of the current load. Eg,
for an original source file, it allows us to change the location to the original source regardless
of what the sourcemap source entry says. And for transformed files, it allows us to change the
relative resolving location for child sources of the loaded sourcemap.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">remapped</span> <span class="o">=</span> <span class="nx">remapping</span><span class="p">(</span>
  <span class="nx">minifiedTransformedMap</span><span class="p">,</span>
  <span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">file</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">transformed.js</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// We pretend the transformed.js file actually exists in the 'src/' directory. When the nested</span>
      <span class="c1">// source files are loaded, they will now be relative to `src/`.</span>
      <span class="nx">ctx</span><span class="p">.</span><span class="nx">source</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">src/transformed.js</span><span class="dl">'</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">transformedMap</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nx">file</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">src/helloworld.js</span><span class="dl">'</span><span class="p">);</span>
    <span class="c1">// We could futher change the source of this original file, eg, to be inside a nested directory</span>
    <span class="c1">// itself. This will be reflected in the remapped sourcemap.</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">source</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">src/nested/transformed.js</span><span class="dl">'</span><span class="p">;</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">remapped</span><span class="p">);</span>
<span class="c1">// {</span>
<span class="c1">//   …,</span>
<span class="c1">//   sources: ['src/nested/helloworld.js'],</span>
<span class="c1">// };</span>
</code></pre></div></div>

<h4 id="content"><code class="language-plaintext highlighter-rouge">content</code></h4>

<p>The <code class="language-plaintext highlighter-rouge">content</code> property can be overridden when we encounter an original source file. Eg, this allows
you to manually provide the source content of the original file regardless of whether the
<code class="language-plaintext highlighter-rouge">sourcesContent</code> field is present in the parent sourcemap. It can also be set to <code class="language-plaintext highlighter-rouge">null</code> to remove
the source content.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">remapped</span> <span class="o">=</span> <span class="nx">remapping</span><span class="p">(</span>
  <span class="nx">minifiedTransformedMap</span><span class="p">,</span>
  <span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">file</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">transformed.js</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// transformedMap does not include a `sourcesContent` field, so usually the remapped sourcemap</span>
      <span class="c1">// would not include any `sourcesContent` values.</span>
      <span class="k">return</span> <span class="nx">transformedMap</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="nx">file</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">helloworld.js</span><span class="dl">'</span><span class="p">);</span>
    <span class="c1">// We can read the file to provide the source content.</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">content</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">remapped</span><span class="p">);</span>
<span class="c1">// {</span>
<span class="c1">//   …,</span>
<span class="c1">//   sourcesContent: [</span>
<span class="c1">//     'console.log("Hello world!")',</span>
<span class="c1">//   ],</span>
<span class="c1">// };</span>
</code></pre></div></div>

<h3 id="options">Options</h3>

<h4 id="excludecontent">excludeContent</h4>

<p>By default, <code class="language-plaintext highlighter-rouge">excludeContent</code> is <code class="language-plaintext highlighter-rouge">false</code>. Passing <code class="language-plaintext highlighter-rouge">{ excludeContent: true }</code> will exclude the
<code class="language-plaintext highlighter-rouge">sourcesContent</code> field from the returned sourcemap. This is mainly useful when you want to reduce
the size out the sourcemap.</p>

<h4 id="decodedmappings">decodedMappings</h4>

<p>By default, <code class="language-plaintext highlighter-rouge">decodedMappings</code> is <code class="language-plaintext highlighter-rouge">false</code>. Passing <code class="language-plaintext highlighter-rouge">{ decodedMappings: true }</code> will leave the
<code class="language-plaintext highlighter-rouge">mappings</code> field in a <a href="https://github.com/rich-harris/sourcemap-codec">decoded state</a> instead of
encoding into a VLQ string.</p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
