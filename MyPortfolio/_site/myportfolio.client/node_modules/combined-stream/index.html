<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>combined-stream | portfolio</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="combined-stream" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/myportfolio.client/node_modules/combined-stream/" />
<meta property="og:url" content="http://localhost:4000/myportfolio.client/node_modules/combined-stream/" />
<meta property="og:site_name" content="portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="combined-stream" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"combined-stream","url":"http://localhost:4000/myportfolio.client/node_modules/combined-stream/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=059dd2210d8f0fb8d42af0cbb5c1b29e59b98886">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">portfolio</a></h1>
      

      <h1 id="combined-stream">combined-stream</h1>

<p>A stream that emits multiple other streams one after another.</p>

<p><strong>NB</strong> Currently <code class="language-plaintext highlighter-rouge">combined-stream</code> works with streams version 1 only. There is ongoing effort to switch this library to streams version 2. Any help is welcome. :) Meanwhile you can explore other libraries that provide streams2 support with more or less compatibility with <code class="language-plaintext highlighter-rouge">combined-stream</code>.</p>

<ul>
  <li>
    <p><a href="https://www.npmjs.com/package/combined-stream2">combined-stream2</a>: A drop-in streams2-compatible replacement for the combined-stream module.</p>
  </li>
  <li>
    <p><a href="https://www.npmjs.com/package/multistream">multistream</a>: A stream that emits multiple other streams one after another.</p>
  </li>
</ul>

<h2 id="installation">Installation</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>combined-stream
</code></pre></div></div>

<h2 id="usage">Usage</h2>

<p>Here is a simple example that shows how you can use combined-stream to combine
two files into one:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">CombinedStream</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">combined-stream</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">combinedStream</span> <span class="o">=</span> <span class="nx">CombinedStream</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="dl">'</span><span class="s1">file1.txt</span><span class="dl">'</span><span class="p">));</span>
<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="dl">'</span><span class="s1">file2.txt</span><span class="dl">'</span><span class="p">));</span>

<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="dl">'</span><span class="s1">combined.txt</span><span class="dl">'</span><span class="p">));</span>
</code></pre></div></div>

<p>While the example above works great, it will pause all source streams until
they are needed. If you don’t want that to happen, you can set <code class="language-plaintext highlighter-rouge">pauseStreams</code>
to <code class="language-plaintext highlighter-rouge">false</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">CombinedStream</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">combined-stream</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">combinedStream</span> <span class="o">=</span> <span class="nx">CombinedStream</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="na">pauseStreams</span><span class="p">:</span> <span class="kc">false</span><span class="p">});</span>
<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="dl">'</span><span class="s1">file1.txt</span><span class="dl">'</span><span class="p">));</span>
<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="dl">'</span><span class="s1">file2.txt</span><span class="dl">'</span><span class="p">));</span>

<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="dl">'</span><span class="s1">combined.txt</span><span class="dl">'</span><span class="p">));</span>
</code></pre></div></div>

<p>However, what if you don’t have all the source streams yet, or you don’t want
to allocate the resources (file descriptors, memory, etc.) for them right away?
Well, in that case you can simply provide a callback that supplies the stream
by calling a <code class="language-plaintext highlighter-rouge">next()</code> function:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">CombinedStream</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">combined-stream</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">combinedStream</span> <span class="o">=</span> <span class="nx">CombinedStream</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">next</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="dl">'</span><span class="s1">file1.txt</span><span class="dl">'</span><span class="p">));</span>
<span class="p">});</span>
<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">next</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="dl">'</span><span class="s1">file2.txt</span><span class="dl">'</span><span class="p">));</span>
<span class="p">});</span>

<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="dl">'</span><span class="s1">combined.txt</span><span class="dl">'</span><span class="p">));</span>
</code></pre></div></div>

<h2 id="api">API</h2>

<h3 id="combinedstreamcreateoptions">CombinedStream.create([options])</h3>

<p>Returns a new combined stream object. Available options are:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">maxDataSize</code></li>
  <li><code class="language-plaintext highlighter-rouge">pauseStreams</code></li>
</ul>

<p>The effect of those options is described below.</p>

<h3 id="combinedstreampausestreams--true">combinedStream.pauseStreams = <code class="language-plaintext highlighter-rouge">true</code></h3>

<p>Whether to apply back pressure to the underlaying streams. If set to <code class="language-plaintext highlighter-rouge">false</code>,
the underlaying streams will never be paused. If set to <code class="language-plaintext highlighter-rouge">true</code>, the
underlaying streams will be paused right after being appended, as well as when
<code class="language-plaintext highlighter-rouge">delayedStream.pipe()</code> wants to throttle.</p>

<h3 id="combinedstreammaxdatasize--2--1024--1024">combinedStream.maxDataSize = <code class="language-plaintext highlighter-rouge">2 * 1024 * 1024</code></h3>

<p>The maximum amount of bytes (or characters) to buffer for all source streams.
If this value is exceeded, <code class="language-plaintext highlighter-rouge">combinedStream</code> emits an <code class="language-plaintext highlighter-rouge">'error'</code> event.</p>

<h3 id="combinedstreamdatasize--0">combinedStream.dataSize = <code class="language-plaintext highlighter-rouge">0</code></h3>

<p>The amount of bytes (or characters) currently buffered by <code class="language-plaintext highlighter-rouge">combinedStream</code>.</p>

<h3 id="combinedstreamappendstream">combinedStream.append(stream)</h3>

<p>Appends the given <code class="language-plaintext highlighter-rouge">stream</code> to the combinedStream object. If <code class="language-plaintext highlighter-rouge">pauseStreams</code> is
set to `true, this stream will also be paused right away.</p>

<p><code class="language-plaintext highlighter-rouge">streams</code> can also be a function that takes one parameter called <code class="language-plaintext highlighter-rouge">next</code>. <code class="language-plaintext highlighter-rouge">next</code>
is a function that must be invoked in order to provide the <code class="language-plaintext highlighter-rouge">next</code> stream, see
example above.</p>

<p>Regardless of how the <code class="language-plaintext highlighter-rouge">stream</code> is appended, combined-stream always attaches an
<code class="language-plaintext highlighter-rouge">'error'</code> listener to it, so you don’t have to do that manually.</p>

<p>Special case: <code class="language-plaintext highlighter-rouge">stream</code> can also be a String or Buffer.</p>

<h3 id="combinedstreamwritedata">combinedStream.write(data)</h3>

<p>You should not call this, <code class="language-plaintext highlighter-rouge">combinedStream</code> takes care of piping the appended
streams into itself for you.</p>

<h3 id="combinedstreamresume">combinedStream.resume()</h3>

<p>Causes <code class="language-plaintext highlighter-rouge">combinedStream</code> to start drain the streams it manages. The function is
idempotent, and also emits a <code class="language-plaintext highlighter-rouge">'resume'</code> event each time which usually goes to
the stream that is currently being drained.</p>

<h3 id="combinedstreampause">combinedStream.pause();</h3>

<p>If <code class="language-plaintext highlighter-rouge">combinedStream.pauseStreams</code> is set to <code class="language-plaintext highlighter-rouge">false</code>, this does nothing.
Otherwise a <code class="language-plaintext highlighter-rouge">'pause'</code> event is emitted, this goes to the stream that is
currently being drained, so you can use it to apply back pressure.</p>

<h3 id="combinedstreamend">combinedStream.end();</h3>

<p>Sets <code class="language-plaintext highlighter-rouge">combinedStream.writable</code> to false, emits an <code class="language-plaintext highlighter-rouge">'end'</code> event, and removes
all streams from the queue.</p>

<h3 id="combinedstreamdestroy">combinedStream.destroy();</h3>

<p>Same as <code class="language-plaintext highlighter-rouge">combinedStream.end()</code>, except it emits a <code class="language-plaintext highlighter-rouge">'close'</code> event instead of
<code class="language-plaintext highlighter-rouge">'end'</code>.</p>

<h2 id="license">License</h2>

<p>combined-stream is licensed under the MIT license.</p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
