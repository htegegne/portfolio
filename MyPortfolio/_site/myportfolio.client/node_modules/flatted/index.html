<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>flatted | portfolio</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="flatted" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/myportfolio.client/node_modules/flatted/" />
<meta property="og:url" content="http://localhost:4000/myportfolio.client/node_modules/flatted/" />
<meta property="og:site_name" content="portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="flatted" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"flatted","url":"http://localhost:4000/myportfolio.client/node_modules/flatted/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=059dd2210d8f0fb8d42af0cbb5c1b29e59b98886">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">portfolio</a></h1>
      

      <h1 id="flatted">flatted</h1>

<p><a href="https://www.npmjs.com/package/flatted"><img src="https://img.shields.io/npm/dm/flatted.svg" alt="Downloads" /></a> <a href="https://coveralls.io/github/WebReflection/flatted?branch=main"><img src="https://coveralls.io/repos/github/WebReflection/flatted/badge.svg?branch=main" alt="Coverage Status" /></a> <a href="https://travis-ci.com/WebReflection/flatted"><img src="https://travis-ci.com/WebReflection/flatted.svg?branch=main" alt="Build Status" /></a> <a href="https://opensource.org/licenses/ISC"><img src="https://img.shields.io/badge/License-ISC-yellow.svg" alt="License: ISC" /></a> <img src="https://offline.report/status/webreflection.svg" alt="WebReflection status" /></p>

<p><img src="./flatted.jpg" alt="snow flake" /></p>

<p><sup><strong>Social Media Photo by <a href="https://unsplash.com/@mattseymour">Matt Seymour</a> on <a href="https://unsplash.com/">Unsplash</a></strong></sup></p>

<p>A super light (0.5K) and fast circular JSON parser, directly from the creator of <a href="https://github.com/WebReflection/circular-json/#circularjson">CircularJSON</a>.</p>

<p>Available also for <strong><a href="/myportfolio.client/node_modules/flatted/php/flatted.php">PHP</a></strong>.</p>

<p>Available also for <strong><a href="/myportfolio.client/node_modules/flatted/python/flatted.py">Python</a></strong>.</p>

<hr />

<h2 id="announcement-">Announcement üì£</h2>

<p>There is a standard approach to recursion and more data-types than what JSON allows, and it‚Äôs part of the <a href="https://github.com/ungap/structured-clone/#readme">Structured Clone polyfill</a>.</p>

<p>Beside acting as a polyfill, its <code class="language-plaintext highlighter-rouge">@ungap/structured-clone/json</code> export provides both <code class="language-plaintext highlighter-rouge">stringify</code> and <code class="language-plaintext highlighter-rouge">parse</code>, and it‚Äôs been tested for being faster than <em>flatted</em>, but its produced output is also smaller than <em>flatted</em> in general.</p>

<p>The <em>@ungap/structured-clone</em> module is, in short, a drop in replacement for <em>flatted</em>, but it‚Äôs not compatible with <em>flatted</em> specialized syntax.</p>

<p>However, if recursion, as well as more data-types, are what you are after, or interesting for your projects/use cases, consider switching to this new module whenever you can üëç</p>

<hr />

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">npm</span> <span class="nx">i</span> <span class="nx">flatted</span>
</code></pre></div></div>

<p>Usable via <a href="https://unpkg.com/flatted">CDN</a> or as regular module.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ESM</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">parse</span><span class="p">,</span> <span class="nx">stringify</span><span class="p">,</span> <span class="nx">toJSON</span><span class="p">,</span> <span class="nx">fromJSON</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">flatted</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// CJS</span>
<span class="kd">const</span> <span class="p">{</span><span class="nx">parse</span><span class="p">,</span> <span class="nx">stringify</span><span class="p">,</span> <span class="nx">toJSON</span><span class="p">,</span> <span class="nx">fromJSON</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">flatted</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[{}];</span>
<span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>

<span class="nx">stringify</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span> <span class="c1">// [["1","0"],{"a":"0"}]</span>
</code></pre></div></div>

<h2 id="tojson-and-fromjson">toJSON and fromJSON</h2>

<p>If you‚Äôd like to implicitly survive JSON serialization, these two helpers helps:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">toJSON</span><span class="p">,</span> <span class="nx">fromJSON</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">flatted</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">RecursiveMap</span> <span class="kd">extends</span> <span class="nb">Map</span> <span class="p">{</span>
  <span class="kd">static</span> <span class="nx">fromJSON</span><span class="p">(</span><span class="nx">any</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="k">this</span><span class="p">(</span><span class="nx">fromJSON</span><span class="p">(</span><span class="nx">any</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="nx">toJSON</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">toJSON</span><span class="p">([...</span><span class="k">this</span><span class="p">.</span><span class="nx">entries</span><span class="p">()]);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">recursive</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RecursiveMap</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">same</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">same</span><span class="p">.</span><span class="nx">same</span> <span class="o">=</span> <span class="nx">same</span><span class="p">;</span>
<span class="nx">recursive</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">same</span><span class="dl">'</span><span class="p">,</span> <span class="nx">same</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">asString</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">recursive</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">asMap</span> <span class="o">=</span> <span class="nx">RecursiveMap</span><span class="p">.</span><span class="nx">fromJSON</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">asString</span><span class="p">));</span>
<span class="nx">asMap</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">same</span><span class="dl">'</span><span class="p">)</span> <span class="o">===</span> <span class="nx">asMap</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">same</span><span class="dl">'</span><span class="p">).</span><span class="nx">same</span><span class="p">;</span>
<span class="c1">// true</span>
</code></pre></div></div>

<h2 id="flatted-vs-json">Flatted VS JSON</h2>

<p>As it is for every other specialized format capable of serializing and deserializing circular data, you should never <code class="language-plaintext highlighter-rouge">JSON.parse(Flatted.stringify(data))</code>, and you should never <code class="language-plaintext highlighter-rouge">Flatted.parse(JSON.stringify(data))</code>.</p>

<p>The only way this could work is to <code class="language-plaintext highlighter-rouge">Flatted.parse(Flatted.stringify(data))</code>, as it is also for <em>CircularJSON</em> or any other, otherwise there‚Äôs no granted data integrity.</p>

<p>Also please note this project serializes and deserializes only data compatible with JSON, so that sockets, or anything else with internal classes different from those allowed by JSON standard, won‚Äôt be serialized and unserialized as expected.</p>

<h3 id="new-in-v1-exact-same-json-api">New in V1: Exact same JSON API</h3>

<ul>
  <li>Added a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse#Syntax">reviver</a> parameter to <code class="language-plaintext highlighter-rouge">.parse(string, reviver)</code> and revive your own objects.</li>
  <li>Added a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Syntax">replacer</a> and a <code class="language-plaintext highlighter-rouge">space</code> parameter to <code class="language-plaintext highlighter-rouge">.stringify(object, replacer, space)</code> for feature parity with JSON signature.</li>
</ul>

<h3 id="compatibility">Compatibility</h3>
<p>All ECMAScript engines compatible with <code class="language-plaintext highlighter-rouge">Map</code>, <code class="language-plaintext highlighter-rouge">Set</code>, <code class="language-plaintext highlighter-rouge">Object.keys</code>, and <code class="language-plaintext highlighter-rouge">Array.prototype.reduce</code> will work, even if polyfilled.</p>

<h3 id="how-does-it-work-">How does it work ?</h3>
<p>While stringifying, all Objects, including Arrays, and strings, are flattened out and replaced as unique index. <code class="language-plaintext highlighter-rouge">*</code></p>

<p>Once parsed, all indexes will be replaced through the flattened collection.</p>

<p><sup><sub><code class="language-plaintext highlighter-rouge">*</code> represented as string to avoid conflicts with numbers</sub></sup></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// logic example</span>
<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[{</span><span class="na">one</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="na">two</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2</span><span class="dl">'</span><span class="p">}];</span>
<span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
<span class="c1">// a is the main object, will be at index '0'</span>
<span class="c1">// {one: 1} is the second object, index '1'</span>
<span class="c1">// {two: '2'} the third, in '2', and it has a string</span>
<span class="c1">// which will be found at index '3'</span>

<span class="nx">Flatted</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
<span class="c1">// [["1","2"],{"one":1,"a":"0"},{"two":"3"},"2"]</span>
<span class="c1">// a[one,two]    {one: 1, a}    {two: '2'}  '2'</span>
</code></pre></div></div>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
