<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>babel-plugin-transform-react-remove-prop-types | portfolio</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="babel-plugin-transform-react-remove-prop-types" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/myportfolio.client/node_modules/babel-plugin-transform-react-remove-prop-types/" />
<meta property="og:url" content="http://localhost:4000/myportfolio.client/node_modules/babel-plugin-transform-react-remove-prop-types/" />
<meta property="og:site_name" content="portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="babel-plugin-transform-react-remove-prop-types" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"babel-plugin-transform-react-remove-prop-types","url":"http://localhost:4000/myportfolio.client/node_modules/babel-plugin-transform-react-remove-prop-types/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=059dd2210d8f0fb8d42af0cbb5c1b29e59b98886">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">portfolio</a></h1>
      

      <h1 id="babel-plugin-transform-react-remove-prop-types">babel-plugin-transform-react-remove-prop-types</h1>

<blockquote>
  <p>Remove unnecessary React propTypes from the production build.</p>
</blockquote>

<p><a href="https://www.npmjs.com/package/babel-plugin-transform-react-remove-prop-types"><img src="https://img.shields.io/npm/v/babel-plugin-transform-react-remove-prop-types.svg" alt="npm version" /></a>
<a href="https://www.npmjs.com/package/babel-plugin-transform-react-remove-prop-types"><img src="https://img.shields.io/npm/dm/babel-plugin-transform-react-remove-prop-types.svg" alt="npm downloads" /></a>
<a href="https://travis-ci.org/oliviertassinari/babel-plugin-transform-react-remove-prop-types"><img src="https://travis-ci.org/oliviertassinari/babel-plugin-transform-react-remove-prop-types.svg?branch=master" alt="Build Status" /></a></p>

<p><a href="https://david-dm.org/oliviertassinari/babel-plugin-transform-react-remove-prop-types"><img src="https://img.shields.io/david/oliviertassinari/babel-plugin-transform-react-remove-prop-types.svg" alt="Dependencies" /></a>
<a href="https://david-dm.org/oliviertassinari/babel-plugin-transform-react-remove-prop-types?type=dev"><img src="https://img.shields.io/david/dev/oliviertassinari/babel-plugin-transform-react-remove-prop-types.svg" alt="DevDependencies" /></a></p>

<h2 id="installation">Installation</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">--save-dev</span> babel-plugin-transform-react-remove-prop-types
</code></pre></div></div>

<h2 id="the-problem-solved">The problem solved</h2>

<p>Remove React <code class="language-plaintext highlighter-rouge">propTypes</code> from the production build, as they are only used in development.
You can <strong>save bandwidth</strong> by removing them.</p>

<h2 id="example">Example</h2>

<p><strong>In</strong></p>
<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Baz</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">/&gt;</span>
<span class="p">);</span>

<span class="nx">Baz</span><span class="p">.</span><span class="nx">propTypes</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">className</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">string</span>
<span class="p">};</span>
</code></pre></div></div>

<p><strong>Out</strong></p>
<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Baz</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">/&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="with-comment-annotation">With comment annotation</h3>

<p>The majority of cases should be addressed by default by this plugin.</p>

<p>In some cases, for example when using HOCs (High Order Components), like <em>react-redux</em>’s <code class="language-plaintext highlighter-rouge">connect</code>, or component inheritance (<a href="https://facebook.github.io/react/docs/composition-vs-inheritance.html">although it’s NOT recommended</a>), a comment after the <code class="language-plaintext highlighter-rouge">propTypes</code> definition may be used to force the removal:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Component</span><span class="p">.</span><span class="nx">propTypes</span> <span class="cm">/* remove-proptypes */</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></div>

<h2 id="usage">Usage</h2>

<h3 id="via-babelrc-recommended">Via <code class="language-plaintext highlighter-rouge">.babelrc</code> (Recommended)</h3>

<p><strong>.babelrc</strong></p>

<p>without options:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"production"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"plugins"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"transform-react-remove-prop-types"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>with options:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"production"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"plugins"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">[</span><span class="s2">"transform-react-remove-prop-types"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wrap"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"ignoreFilenames"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"node_modules"</span><span class="p">]</span><span class="w">
        </span><span class="p">}]</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="via-cli">Via CLI</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>babel <span class="nt">--plugins</span> transform-react-remove-prop-types script.js
</code></pre></div></div>

<h3 id="via-node-api">Via Node API</h3>

<p>without options:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">babel-core</span><span class="dl">'</span><span class="p">).</span><span class="nx">transform</span><span class="p">(</span><span class="dl">'</span><span class="s1">code</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span>
    <span class="dl">'</span><span class="s1">transform-react-remove-prop-types</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">],</span>
<span class="p">});</span>
</code></pre></div></div>

<p>with options:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">babel-core</span><span class="dl">'</span><span class="p">).</span><span class="nx">transform</span><span class="p">(</span><span class="dl">'</span><span class="s1">code</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span>
      <span class="dl">'</span><span class="s1">transform-react-remove-prop-types</span><span class="dl">'</span><span class="p">,</span>
      <span class="p">{</span>
        <span class="na">mode</span><span class="p">:</span> <span class="dl">'</span><span class="s1">wrap</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">ignoreFilenames</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">node_modules</span><span class="dl">'</span><span class="p">],</span>
      <span class="p">},</span>
    <span class="p">],</span>
  <span class="p">],</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="options">Options</h2>

<h3 id="mode"><code class="language-plaintext highlighter-rouge">mode</code></h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">remove</code> (default):
the <code class="language-plaintext highlighter-rouge">propTypes</code> definitions are removed from the source code.</li>
  <li><code class="language-plaintext highlighter-rouge">wrap</code>:
the <code class="language-plaintext highlighter-rouge">propTypes</code> definitions are wrapped with the following code:
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Component</span><span class="p">.</span><span class="nx">propTypes</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span> <span class="p">?</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span> <span class="p">:</span> <span class="p">{};</span>
</code></pre></div>    </div>
    <p>Accessing <code class="language-plaintext highlighter-rouge">Component.propTypes.className</code> won’t throw. It’s a tradeoff between the size of the output file and the likelihood libraries like <a href="https://github.com/obipawan/react-native-hyperlink/pull/11">react-native-hyperlink</a> breaks.</p>
  </li>
  <li><code class="language-plaintext highlighter-rouge">unsafe-wrap</code>:
the <code class="language-plaintext highlighter-rouge">propTypes</code> definitions are wrapped with the following code:
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Component</span><span class="p">.</span><span class="nx">propTypes</span> <span class="o">=</span> <span class="p">{</span>
 <span class="c1">// ...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <p>Accessing <code class="language-plaintext highlighter-rouge">Component.propTypes.className</code> will throw.</p>
  </li>
</ul>

<p>The <em>wrap</em> modes are targeting React libraries like <a href="https://github.com/callemall/material-ui">material-ui</a> or <a href="https://github.com/necolas/react-native-web">react-native-web</a>.
They are not intended to be used by application authors.</p>

<h3 id="removeimport"><code class="language-plaintext highlighter-rouge">removeImport</code></h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">true</code>: the import statements are removed as well. This option only works if <code class="language-plaintext highlighter-rouge">mode</code> is set to <code class="language-plaintext highlighter-rouge">remove</code>:
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">PropTypes</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">prop-types</span><span class="dl">'</span>
</code></pre></div>    </div>
  </li>
  <li><code class="language-plaintext highlighter-rouge">false</code> (default): does not remove the import statements.</li>
</ul>

<h3 id="ignorefilenames"><code class="language-plaintext highlighter-rouge">ignoreFilenames</code></h3>

<p>This filter generates a regular expression.
Any filenames containing one of the array’s strings will be ignored.
By <strong>default</strong>, we match everything.</p>

<p>Following the <a href="#user-content-is-it-safe">Is it safe?</a> section, you might encounter a component
depending on the <code class="language-plaintext highlighter-rouge">propTypes</code> at runtime to work.
For this reason, we provide an array options to filter out some files and folders.
For instance, you can ignore all the npm modules:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">ignoreFilenames</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">node_modules</span><span class="dl">'</span><span class="p">],</span>
</code></pre></div></div>

<h3 id="additionallibraries"><code class="language-plaintext highlighter-rouge">additionalLibraries</code></h3>

<p>This option gives the possibility to remove other <code class="language-plaintext highlighter-rouge">propTypes</code> in addition to the canonical <code class="language-plaintext highlighter-rouge">prop-types</code>.</p>

<p>For instance, by default</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">PropTypes</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">prop-types</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">ImmutablePropTypes</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-immutable-proptypes</span><span class="dl">'</span>
</code></pre></div></div>
<p>will result in the latter not to be removed, while with:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">additionalLibraries</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">react-immutable-proptypes</span><span class="dl">'</span><span class="p">],</span>
</code></pre></div></div>
<p>both will be removed.</p>

<h4 id="regular-expressions">Regular expressions</h4>

<p>If you are using Babel 7 or newer and your config is stored in <a href="https://babeljs.io/docs/en/configuration#babelconfigjs"><code class="language-plaintext highlighter-rouge">babel.config.js</code></a>, you can also use a regular expression to describe modules, which should be removed.</p>

<p>This would be particularly useful when using custom prop types validators, implemented as part of your own source code. For example</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">CustomPropTypes</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../../prop-types/my-own-validator</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">OtherCustomPropTypes</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../../prop-types/my-other-validator</span><span class="dl">'</span>
</code></pre></div></div>

<p>would be removed with the following setting</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">additionalLibraries</span><span class="p">:</span> <span class="p">[</span><span class="sr">/</span><span class="se">\/</span><span class="sr">prop-types</span><span class="se">\/</span><span class="sr">.*$/</span><span class="p">]</span>
</code></pre></div></div>

<p>If you use an index file</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">CustomPropTypes</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../../prop-types</span><span class="dl">'</span>
</code></pre></div></div>

<p>you could set it up as</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">additionalLibraries</span><span class="p">:</span> <span class="p">[</span><span class="sr">/</span><span class="se">\/</span><span class="sr">prop-types$/</span><span class="p">]</span>
</code></pre></div></div>

<h3 id="classnamematchers"><code class="language-plaintext highlighter-rouge">classNameMatchers</code></h3>

<p>Use this option to enable this plugin to run on components that extend a class different than <code class="language-plaintext highlighter-rouge">React.Component</code> or <code class="language-plaintext highlighter-rouge">React.PureComponent</code>.</p>

<p>Given this example:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">MyComponent</span> <span class="kd">extends</span> <span class="nx">BaseComponent</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You would use:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">classNameMatchers</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">BaseComponent</span><span class="dl">"</span><span class="p">]</span>
</code></pre></div></div>

<h3 id="createreactclassname"><code class="language-plaintext highlighter-rouge">createReactClassName</code></h3>

<p>Use this option to set a custom name for the import of the <code class="language-plaintext highlighter-rouge">create-react-class</code> package that is different than <code class="language-plaintext highlighter-rouge">createReactClass</code>.</p>

<p>Given this example:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">createClass</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">create-react-class</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div></div>

<p>You would use:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">createReactClassName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">createClass</span><span class="dl">'</span>
</code></pre></div></div>

<h2 id="is-it-safe">Is it safe?</h2>

<p>If you are using the <code class="language-plaintext highlighter-rouge">propTypes</code> in a conventional way,
i.e by using them to perform type checking on the properties, that plugin should be <strong>safe to use</strong>.</p>

<p>However, some libraries are accessing the <code class="language-plaintext highlighter-rouge">propTypes</code> on the component directly.
For instance <a href="https://github.com/oblador/react-native-vector-icons/blob/3d1f2a5b7175d6e4c8985676940240776543ff60/lib/icon-button.js#L59">react-native-vector-icons</a> use them to split the properties between two components:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">touchableProps</span> <span class="o">=</span> <span class="nx">pick</span><span class="p">(</span><span class="nx">restProps</span><span class="p">,</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">TouchableHighlight</span><span class="p">.</span><span class="nx">propTypes</span><span class="p">));</span>
</code></pre></div></div>
<p>:warning: The plugin is breaking that code if it ends up removing <code class="language-plaintext highlighter-rouge">TouchableHighlight.propTypes</code>.</p>

<p>Make sure you are:</p>
<ul>
  <li>Not using that pattern in your source code.
If you do, explicitly <strong>export</strong> the <code class="language-plaintext highlighter-rouge">propTypes</code> to work around that limitation.</li>
  <li>Not parsing the <code class="language-plaintext highlighter-rouge">node_modules</code>.
If you do, test that your code is still working before shipping into production.</li>
</ul>

<p><a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/forbid-foreign-prop-types.md">eslint-plugin-react has a rule forbid-foreign-prop-types</a> that can help you make this plugin safer to use.</p>

<h2 id="license">License</h2>

<p>MIT</p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
