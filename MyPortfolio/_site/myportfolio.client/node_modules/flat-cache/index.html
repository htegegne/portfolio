<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>flat-cache | portfolio</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="flat-cache" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/myportfolio.client/node_modules/flat-cache/" />
<meta property="og:url" content="http://localhost:4000/myportfolio.client/node_modules/flat-cache/" />
<meta property="og:site_name" content="portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="flat-cache" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"flat-cache","url":"http://localhost:4000/myportfolio.client/node_modules/flat-cache/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=00c08f3bd19ad2390c706d50e4f8968f8b47944c">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">portfolio</a></h1>
      

      <h1 id="flat-cache">flat-cache</h1>
<blockquote>
  <p>A stupidly simple key/value storage using files to persist the data</p>
</blockquote>

<p><a href="https://npmjs.org/package/flat-cache"><img src="https://img.shields.io/npm/v/flat-cache.svg?style=flat" alt="NPM Version" /></a>
<a href="https://github.com/jaredwray/flat-cache/actions/workflows/tests.yaml"><img src="https://github.com/jaredwray/flat-cache/actions/workflows/tests.yaml/badge.svg?branch=master" alt="tests" /></a>
<a href="https://codecov.io/github/jaredwray/flat-cache"><img src="https://codecov.io/github/jaredwray/flat-cache/branch/master/graph/badge.svg?token=KxR95XT3NF" alt="codecov" /></a>
<a href="https://npmjs.com/package/flat-cache"><img src="https://img.shields.io/npm/dm/flat-cache" alt="npm" /></a></p>

<h2 id="install">install</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm i <span class="nt">--save</span> flat-cache
</code></pre></div></div>

<h2 id="usage">Usage</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">flatCache</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">flat-cache</span><span class="dl">'</span><span class="p">)</span>
<span class="c1">// loads the cache, if one does not exists for the given</span>
<span class="c1">// Id a new one will be prepared to be created</span>
<span class="kd">var</span> <span class="nx">cache</span> <span class="o">=</span> <span class="nx">flatCache</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="dl">'</span><span class="s1">cacheId</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// sets a key on the cache</span>
<span class="nx">cache</span><span class="p">.</span><span class="nx">setKey</span><span class="p">(</span><span class="dl">'</span><span class="s1">key</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">foo</span><span class="p">:</span> <span class="dl">'</span><span class="s1">var</span><span class="dl">'</span> <span class="p">});</span>

<span class="c1">// get a key from the cache</span>
<span class="nx">cache</span><span class="p">.</span><span class="nx">getKey</span><span class="p">(</span><span class="dl">'</span><span class="s1">key</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// { foo: 'var' }</span>

<span class="c1">// fetch the entire persisted object</span>
<span class="nx">cache</span><span class="p">.</span><span class="nx">all</span><span class="p">()</span> <span class="c1">// { 'key': { foo: 'var' } }</span>

<span class="c1">// remove a key</span>
<span class="nx">cache</span><span class="p">.</span><span class="nx">removeKey</span><span class="p">(</span><span class="dl">'</span><span class="s1">key</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// removes a key from the cache</span>

<span class="c1">// save it to disk</span>
<span class="nx">cache</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span> <span class="c1">// very important, if you don't save no changes will be persisted.</span>
<span class="c1">// cache.save( true /* noPrune */) // can be used to prevent the removal of non visited keys</span>

<span class="c1">// loads the cache from a given directory, if one does</span>
<span class="c1">// not exists for the given Id a new one will be prepared to be created</span>
<span class="kd">var</span> <span class="nx">cache</span> <span class="o">=</span> <span class="nx">flatCache</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="dl">'</span><span class="s1">cacheId</span><span class="dl">'</span><span class="p">,</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="dl">'</span><span class="s1">./path/to/folder</span><span class="dl">'</span><span class="p">));</span>

<span class="c1">// The following methods are useful to clear the cache</span>
<span class="c1">// delete a given cache</span>
<span class="nx">flatCache</span><span class="p">.</span><span class="nx">clearCacheById</span><span class="p">(</span><span class="dl">'</span><span class="s1">cacheId</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// removes the cacheId document if one exists.</span>

<span class="c1">// delete all cache</span>
<span class="nx">flatCache</span><span class="p">.</span><span class="nx">clearAll</span><span class="p">();</span> <span class="c1">// remove the cache directory</span>
</code></pre></div></div>

<h2 id="motivation-for-this-module">Motivation for this module</h2>

<p>I needed a super simple and dumb <strong>in-memory cache</strong> with optional disk persistance in order to make
a script that will beutify files with <code class="language-plaintext highlighter-rouge">esformatter</code> only execute on the files that were changed since the last run.
To make that possible we need to store the <code class="language-plaintext highlighter-rouge">fileSize</code> and <code class="language-plaintext highlighter-rouge">modificationTime</code> of the files. So a simple <code class="language-plaintext highlighter-rouge">key/value</code>
storage was needed and Bam! this module was born.</p>

<h2 id="important-notes">Important notes</h2>
<ul>
  <li>If no directory is especified when the <code class="language-plaintext highlighter-rouge">load</code> method is called, a folder named <code class="language-plaintext highlighter-rouge">.cache</code> will be created
inside the module directory when <code class="language-plaintext highlighter-rouge">cache.save</code> is called. If youâ€™re committing your <code class="language-plaintext highlighter-rouge">node_modules</code> to any vcs, you
might want to ignore the default <code class="language-plaintext highlighter-rouge">.cache</code> folder, or specify a custom directory.</li>
  <li>The values set on the keys of the cache should be <code class="language-plaintext highlighter-rouge">stringify-able</code> ones, meaning no circular references</li>
  <li>All the changes to the cache state are done to memory</li>
  <li>I could have used a timer or <code class="language-plaintext highlighter-rouge">Object.observe</code> to deliver the changes to disk, but I wanted to keep this module
intentionally dumb and simple</li>
  <li>Non visited keys are removed when <code class="language-plaintext highlighter-rouge">cache.save()</code> is called. If this is not desired, you can pass <code class="language-plaintext highlighter-rouge">true</code> to the save call
like: <code class="language-plaintext highlighter-rouge">cache.save( true /* noPrune */ )</code>.</li>
</ul>

<h2 id="license">License</h2>

<p>MIT</p>

<h2 id="changelog">Changelog</h2>

<p><a href="/myportfolio.client/node_modules/flat-cache/changelog.html">changelog</a></p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
