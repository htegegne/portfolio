<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>portfolio</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="portfolio" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/myportfolio.client/node_modules/execa/" />
<meta property="og:url" content="http://localhost:4000/myportfolio.client/node_modules/execa/" />
<meta property="og:site_name" content="portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="portfolio" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"portfolio","url":"http://localhost:4000/myportfolio.client/node_modules/execa/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=059dd2210d8f0fb8d42af0cbb5c1b29e59b98886">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">portfolio</a></h1>
      

      <p><img src="media/logo.svg" width="400" />
<br /></p>

<p><a href="https://codecov.io/gh/sindresorhus/execa"><img src="https://codecov.io/gh/sindresorhus/execa/branch/main/graph/badge.svg" alt="Coverage Status" /></a></p>

<blockquote>
  <p>Process execution for humans</p>
</blockquote>

<h2 id="why">Why</h2>

<p>This package improves <a href="https://nodejs.org/api/child_process.html"><code class="language-plaintext highlighter-rouge">child_process</code></a> methods with:</p>

<ul>
  <li>Promise interface.</li>
  <li><a href="#stripfinalnewline">Strips the final newline</a> from the output so you don’t have to do <code class="language-plaintext highlighter-rouge">stdout.trim()</code>.</li>
  <li>Supports <a href="https://en.wikipedia.org/wiki/Shebang_(Unix)">shebang</a> binaries cross-platform.</li>
  <li><a href="https://github.com/IndigoUnited/node-cross-spawn#why">Improved Windows support.</a></li>
  <li>Higher max buffer. 100 MB instead of 200 KB.</li>
  <li><a href="#preferlocal">Executes locally installed binaries by name.</a></li>
  <li><a href="#cleanup">Cleans up spawned processes when the parent process dies.</a></li>
  <li><a href="#all">Get interleaved output</a> from <code class="language-plaintext highlighter-rouge">stdout</code> and <code class="language-plaintext highlighter-rouge">stderr</code> similar to what is printed on the terminal. <a href="#execasyncfile-arguments-options"><em>(Async only)</em></a></li>
  <li><a href="#execacommandcommand-options">Can specify file and arguments as a single string without a shell</a></li>
  <li>More descriptive errors.</li>
</ul>

<h2 id="install">Install</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm install execa
</code></pre></div></div>

<h2 id="usage">Usage</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">execa</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">execa</span><span class="dl">'</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="kd">const</span> <span class="p">{</span><span class="nx">stdout</span><span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">execa</span><span class="p">(</span><span class="dl">'</span><span class="s1">echo</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">unicorns</span><span class="dl">'</span><span class="p">]);</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">stdout</span><span class="p">);</span>
	<span class="c1">//=&gt; 'unicorns'</span>
<span class="p">})();</span>
</code></pre></div></div>

<h3 id="pipe-the-child-process-stdout-to-the-parent">Pipe the child process stdout to the parent</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">execa</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">execa</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">execa</span><span class="p">(</span><span class="dl">'</span><span class="s1">echo</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">unicorns</span><span class="dl">'</span><span class="p">]).</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="handling-errors">Handling Errors</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">execa</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">execa</span><span class="dl">'</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="c1">// Catching an error</span>
	<span class="k">try</span> <span class="p">{</span>
		<span class="k">await</span> <span class="nx">execa</span><span class="p">(</span><span class="dl">'</span><span class="s1">unknown</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">command</span><span class="dl">'</span><span class="p">]);</span>
	<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
		<span class="cm">/*
		{
			message: 'Command failed with ENOENT: unknown command spawn unknown ENOENT',
			errno: -2,
			code: 'ENOENT',
			syscall: 'spawn unknown',
			path: 'unknown',
			spawnargs: ['command'],
			originalMessage: 'spawn unknown ENOENT',
			shortMessage: 'Command failed with ENOENT: unknown command spawn unknown ENOENT',
			command: 'unknown command',
			escapedCommand: 'unknown command',
			stdout: '',
			stderr: '',
			all: '',
			failed: true,
			timedOut: false,
			isCanceled: false,
			killed: false
		}
		*/</span>
	<span class="p">}</span>

<span class="p">})();</span>
</code></pre></div></div>

<h3 id="cancelling-a-spawned-process">Cancelling a spawned process</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">execa</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">execa</span><span class="dl">'</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="kd">const</span> <span class="nx">subprocess</span> <span class="o">=</span> <span class="nx">execa</span><span class="p">(</span><span class="dl">'</span><span class="s1">node</span><span class="dl">'</span><span class="p">);</span>

	<span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="nx">subprocess</span><span class="p">.</span><span class="nx">cancel</span><span class="p">();</span>
	<span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>

	<span class="k">try</span> <span class="p">{</span>
		<span class="k">await</span> <span class="nx">subprocess</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">subprocess</span><span class="p">.</span><span class="nx">killed</span><span class="p">);</span> <span class="c1">// true</span>
		<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">isCanceled</span><span class="p">);</span> <span class="c1">// true</span>
	<span class="p">}</span>
<span class="p">})()</span>
</code></pre></div></div>

<h3 id="catching-an-error-with-the-sync-method">Catching an error with the sync method</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">try</span> <span class="p">{</span>
	<span class="nx">execa</span><span class="p">.</span><span class="nx">sync</span><span class="p">(</span><span class="dl">'</span><span class="s1">unknown</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">command</span><span class="dl">'</span><span class="p">]);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
	<span class="cm">/*
	{
		message: 'Command failed with ENOENT: unknown command spawnSync unknown ENOENT',
		errno: -2,
		code: 'ENOENT',
		syscall: 'spawnSync unknown',
		path: 'unknown',
		spawnargs: ['command'],
		originalMessage: 'spawnSync unknown ENOENT',
		shortMessage: 'Command failed with ENOENT: unknown command spawnSync unknown ENOENT',
		command: 'unknown command',
		escapedCommand: 'unknown command',
		stdout: '',
		stderr: '',
		all: '',
		failed: true,
		timedOut: false,
		isCanceled: false,
		killed: false
	}
	*/</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="kill-a-process">Kill a process</h3>

<p>Using SIGTERM, and after 2 seconds, kill it with SIGKILL.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">subprocess</span> <span class="o">=</span> <span class="nx">execa</span><span class="p">(</span><span class="dl">'</span><span class="s1">node</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">subprocess</span><span class="p">.</span><span class="nx">kill</span><span class="p">(</span><span class="dl">'</span><span class="s1">SIGTERM</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
		<span class="na">forceKillAfterTimeout</span><span class="p">:</span> <span class="mi">2000</span>
	<span class="p">});</span>
<span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="api">API</h2>

<h3 id="execafile-arguments-options">execa(file, arguments, options?)</h3>

<p>Execute a file. Think of this as a mix of <a href="https://nodejs.org/api/child_process.html#child_process_child_process_execfile_file_args_options_callback"><code class="language-plaintext highlighter-rouge">child_process.execFile()</code></a> and <a href="https://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options"><code class="language-plaintext highlighter-rouge">child_process.spawn()</code></a>.</p>

<p>No escaping/quoting is needed.</p>

<p>Unless the <a href="#shell"><code class="language-plaintext highlighter-rouge">shell</code></a> option is used, no shell interpreter (Bash, <code class="language-plaintext highlighter-rouge">cmd.exe</code>, etc.) is used, so shell features such as variables substitution (<code class="language-plaintext highlighter-rouge">echo $PATH</code>) are not allowed.</p>

<p>Returns a <a href="https://nodejs.org/api/child_process.html#child_process_class_childprocess"><code class="language-plaintext highlighter-rouge">child_process</code> instance</a> which:</p>
<ul>
  <li>is also a <code class="language-plaintext highlighter-rouge">Promise</code> resolving or rejecting with a <a href="#childProcessResult"><code class="language-plaintext highlighter-rouge">childProcessResult</code></a>.</li>
  <li>exposes the following additional methods and properties.</li>
</ul>

<h4 id="killsignal-options">kill(signal?, options?)</h4>

<p>Same as the original <a href="https://nodejs.org/api/child_process.html#child_process_subprocess_kill_signal"><code class="language-plaintext highlighter-rouge">child_process#kill()</code></a> except: if <code class="language-plaintext highlighter-rouge">signal</code> is <code class="language-plaintext highlighter-rouge">SIGTERM</code> (the default value) and the child process is not terminated after 5 seconds, force it by sending <code class="language-plaintext highlighter-rouge">SIGKILL</code>.</p>

<h5 id="optionsforcekillaftertimeout">options.forceKillAfterTimeout</h5>

<p>Type: <code class="language-plaintext highlighter-rouge">number | false</code><br />
Default: <code class="language-plaintext highlighter-rouge">5000</code></p>

<p>Milliseconds to wait for the child process to terminate before sending <code class="language-plaintext highlighter-rouge">SIGKILL</code>.</p>

<p>Can be disabled with <code class="language-plaintext highlighter-rouge">false</code>.</p>

<h4 id="cancel">cancel()</h4>

<p>Similar to <a href="https://nodejs.org/api/child_process.html#child_process_subprocess_kill_signal"><code class="language-plaintext highlighter-rouge">childProcess.kill()</code></a>. This is preferred when cancelling the child process execution as the error is more descriptive and <a href="#iscanceled"><code class="language-plaintext highlighter-rouge">childProcessResult.isCanceled</code></a> is set to <code class="language-plaintext highlighter-rouge">true</code>.</p>

<h4 id="all">all</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">ReadableStream | undefined</code></p>

<p>Stream combining/interleaving <a href="https://nodejs.org/api/child_process.html#child_process_subprocess_stdout"><code class="language-plaintext highlighter-rouge">stdout</code></a> and <a href="https://nodejs.org/api/child_process.html#child_process_subprocess_stderr"><code class="language-plaintext highlighter-rouge">stderr</code></a>.</p>

<p>This is <code class="language-plaintext highlighter-rouge">undefined</code> if either:</p>
<ul>
  <li>the <a href="#all-2"><code class="language-plaintext highlighter-rouge">all</code> option</a> is <code class="language-plaintext highlighter-rouge">false</code> (the default value)</li>
  <li>both <a href="#stdout-1"><code class="language-plaintext highlighter-rouge">stdout</code></a> and <a href="#stderr-1"><code class="language-plaintext highlighter-rouge">stderr</code></a> options are set to <a href="https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio"><code class="language-plaintext highlighter-rouge">'inherit'</code>, <code class="language-plaintext highlighter-rouge">'ipc'</code>, <code class="language-plaintext highlighter-rouge">Stream</code> or <code class="language-plaintext highlighter-rouge">integer</code></a></li>
</ul>

<h3 id="execasyncfile-arguments-options">execa.sync(file, arguments?, options?)</h3>

<p>Execute a file synchronously.</p>

<p>Returns or throws a <a href="#childProcessResult"><code class="language-plaintext highlighter-rouge">childProcessResult</code></a>.</p>

<h3 id="execacommandcommand-options">execa.command(command, options?)</h3>

<p>Same as <a href="#execafile-arguments-options"><code class="language-plaintext highlighter-rouge">execa()</code></a> except both file and arguments are specified in a single <code class="language-plaintext highlighter-rouge">command</code> string. For example, <code class="language-plaintext highlighter-rouge">execa('echo', ['unicorns'])</code> is the same as <code class="language-plaintext highlighter-rouge">execa.command('echo unicorns')</code>.</p>

<p>If the file or an argument contains spaces, they must be escaped with backslashes. This matters especially if <code class="language-plaintext highlighter-rouge">command</code> is not a constant but a variable, for example with <code class="language-plaintext highlighter-rouge">__dirname</code> or <code class="language-plaintext highlighter-rouge">process.cwd()</code>. Except for spaces, no escaping/quoting is needed.</p>

<p>The <a href="#shell"><code class="language-plaintext highlighter-rouge">shell</code> option</a> must be used if the <code class="language-plaintext highlighter-rouge">command</code> uses shell-specific features (for example, <code class="language-plaintext highlighter-rouge">&amp;&amp;</code> or <code class="language-plaintext highlighter-rouge">||</code>), as opposed to being a simple <code class="language-plaintext highlighter-rouge">file</code> followed by its <code class="language-plaintext highlighter-rouge">arguments</code>.</p>

<h3 id="execacommandsynccommand-options">execa.commandSync(command, options?)</h3>

<p>Same as <a href="#execacommand-command-options"><code class="language-plaintext highlighter-rouge">execa.command()</code></a> but synchronous.</p>

<p>Returns or throws a <a href="#childProcessResult"><code class="language-plaintext highlighter-rouge">childProcessResult</code></a>.</p>

<h3 id="execanodescriptpath-arguments-options">execa.node(scriptPath, arguments?, options?)</h3>

<p>Execute a Node.js script as a child process.</p>

<p>Same as <code class="language-plaintext highlighter-rouge">execa('node', [scriptPath, ...arguments], options)</code> except (like <a href="https://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options"><code class="language-plaintext highlighter-rouge">child_process#fork()</code></a>):</p>
<ul>
  <li>the current Node version and options are used. This can be overridden using the <a href="#nodepath-for-node-only"><code class="language-plaintext highlighter-rouge">nodePath</code></a> and <a href="#nodeoptions-for-node-only"><code class="language-plaintext highlighter-rouge">nodeOptions</code></a> options.</li>
  <li>the <a href="#shell"><code class="language-plaintext highlighter-rouge">shell</code></a> option cannot be used</li>
  <li>an extra channel <a href="https://nodejs.org/api/child_process.html#child_process_options_stdio"><code class="language-plaintext highlighter-rouge">ipc</code></a> is passed to <a href="#stdio"><code class="language-plaintext highlighter-rouge">stdio</code></a></li>
</ul>

<h3 id="childprocessresult">childProcessResult</h3>

<p>Type: <code class="language-plaintext highlighter-rouge">object</code></p>

<p>Result of a child process execution. On success this is a plain object. On failure this is also an <code class="language-plaintext highlighter-rouge">Error</code> instance.</p>

<p>The child process <a href="#failed">fails</a> when:</p>
<ul>
  <li>its <a href="#exitcode">exit code</a> is not <code class="language-plaintext highlighter-rouge">0</code></li>
  <li>it was <a href="#killed">killed</a> with a <a href="#signal">signal</a></li>
  <li><a href="#timedout">timing out</a></li>
  <li><a href="#iscanceled">being canceled</a></li>
  <li>there’s not enough memory or there are already too many child processes</li>
</ul>

<h4 id="command">command</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string</code></p>

<p>The file and arguments that were run, for logging purposes.</p>

<p>This is not escaped and should not be executed directly as a process, including using <a href="#execafile-arguments-options"><code class="language-plaintext highlighter-rouge">execa()</code></a> or <a href="#execacommandcommand-options"><code class="language-plaintext highlighter-rouge">execa.command()</code></a>.</p>

<h4 id="escapedcommand">escapedCommand</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string</code></p>

<p>Same as <a href="#command"><code class="language-plaintext highlighter-rouge">command</code></a> but escaped.</p>

<p>This is meant to be copy and pasted into a shell, for debugging purposes.
Since the escaping is fairly basic, this should not be executed directly as a process, including using <a href="#execafile-arguments-options"><code class="language-plaintext highlighter-rouge">execa()</code></a> or <a href="#execacommandcommand-options"><code class="language-plaintext highlighter-rouge">execa.command()</code></a>.</p>

<h4 id="exitcode">exitCode</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">number</code></p>

<p>The numeric exit code of the process that was run.</p>

<h4 id="stdout">stdout</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string | Buffer</code></p>

<p>The output of the process on stdout.</p>

<h4 id="stderr">stderr</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string | Buffer</code></p>

<p>The output of the process on stderr.</p>

<h4 id="all-1">all</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string | Buffer | undefined</code></p>

<p>The output of the process with <code class="language-plaintext highlighter-rouge">stdout</code> and <code class="language-plaintext highlighter-rouge">stderr</code> interleaved.</p>

<p>This is <code class="language-plaintext highlighter-rouge">undefined</code> if either:</p>
<ul>
  <li>the <a href="#all-2"><code class="language-plaintext highlighter-rouge">all</code> option</a> is <code class="language-plaintext highlighter-rouge">false</code> (the default value)</li>
  <li><code class="language-plaintext highlighter-rouge">execa.sync()</code> was used</li>
</ul>

<h4 id="failed">failed</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">boolean</code></p>

<p>Whether the process failed to run.</p>

<h4 id="timedout">timedOut</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">boolean</code></p>

<p>Whether the process timed out.</p>

<h4 id="iscanceled">isCanceled</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">boolean</code></p>

<p>Whether the process was canceled.</p>

<h4 id="killed">killed</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">boolean</code></p>

<p>Whether the process was killed.</p>

<h4 id="signal">signal</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string | undefined</code></p>

<p>The name of the signal that was used to terminate the process. For example, <code class="language-plaintext highlighter-rouge">SIGFPE</code>.</p>

<p>If a signal terminated the process, this property is defined and included in the error message. Otherwise it is <code class="language-plaintext highlighter-rouge">undefined</code>.</p>

<h4 id="signaldescription">signalDescription</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string | undefined</code></p>

<p>A human-friendly description of the signal that was used to terminate the process. For example, <code class="language-plaintext highlighter-rouge">Floating point arithmetic error</code>.</p>

<p>If a signal terminated the process, this property is defined and included in the error message. Otherwise it is <code class="language-plaintext highlighter-rouge">undefined</code>. It is also <code class="language-plaintext highlighter-rouge">undefined</code> when the signal is very uncommon which should seldomly happen.</p>

<h4 id="message">message</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string</code></p>

<p>Error message when the child process failed to run. In addition to the <a href="#originalMessage">underlying error message</a>, it also contains some information related to why the child process errored.</p>

<p>The child process <a href="#stderr">stderr</a> then <a href="#stdout">stdout</a> are appended to the end, separated with newlines and not interleaved.</p>

<h4 id="shortmessage">shortMessage</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string</code></p>

<p>This is the same as the <a href="#message"><code class="language-plaintext highlighter-rouge">message</code> property</a> except it does not include the child process stdout/stderr.</p>

<h4 id="originalmessage">originalMessage</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string | undefined</code></p>

<p>Original error message. This is the same as the <code class="language-plaintext highlighter-rouge">message</code> property except it includes neither the child process stdout/stderr nor some additional information added by Execa.</p>

<p>This is <code class="language-plaintext highlighter-rouge">undefined</code> unless the child process exited due to an <code class="language-plaintext highlighter-rouge">error</code> event or a timeout.</p>

<h3 id="options">options</h3>

<p>Type: <code class="language-plaintext highlighter-rouge">object</code></p>

<h4 id="cleanup">cleanup</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">boolean</code><br />
Default: <code class="language-plaintext highlighter-rouge">true</code></p>

<p>Kill the spawned process when the parent process exits unless either:
	- the spawned process is <a href="https://nodejs.org/api/child_process.html#child_process_options_detached"><code class="language-plaintext highlighter-rouge">detached</code></a>
	- the parent process is terminated abruptly, for example, with <code class="language-plaintext highlighter-rouge">SIGKILL</code> as opposed to <code class="language-plaintext highlighter-rouge">SIGTERM</code> or a normal exit</p>

<h4 id="preferlocal">preferLocal</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">boolean</code><br />
Default: <code class="language-plaintext highlighter-rouge">false</code></p>

<p>Prefer locally installed binaries when looking for a binary to execute.<br />
If you <code class="language-plaintext highlighter-rouge">$ npm install foo</code>, you can then <code class="language-plaintext highlighter-rouge">execa('foo')</code>.</p>

<h4 id="localdir">localDir</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string</code><br />
Default: <code class="language-plaintext highlighter-rouge">process.cwd()</code></p>

<p>Preferred path to find locally installed binaries in (use with <code class="language-plaintext highlighter-rouge">preferLocal</code>).</p>

<h4 id="execpath">execPath</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string</code><br />
Default: <code class="language-plaintext highlighter-rouge">process.execPath</code> (Current Node.js executable)</p>

<p>Path to the Node.js executable to use in child processes.</p>

<p>This can be either an absolute path or a path relative to the <a href="#cwd"><code class="language-plaintext highlighter-rouge">cwd</code> option</a>.</p>

<p>Requires <a href="#preferlocal"><code class="language-plaintext highlighter-rouge">preferLocal</code></a> to be <code class="language-plaintext highlighter-rouge">true</code>.</p>

<p>For example, this can be used together with <a href="https://github.com/ehmicky/get-node"><code class="language-plaintext highlighter-rouge">get-node</code></a> to run a specific Node.js version in a child process.</p>

<h4 id="buffer">buffer</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">boolean</code><br />
Default: <code class="language-plaintext highlighter-rouge">true</code></p>

<p>Buffer the output from the spawned process. When set to <code class="language-plaintext highlighter-rouge">false</code>, you must read the output of <a href="#stdout-1"><code class="language-plaintext highlighter-rouge">stdout</code></a> and <a href="#stderr-1"><code class="language-plaintext highlighter-rouge">stderr</code></a> (or <a href="#all"><code class="language-plaintext highlighter-rouge">all</code></a> if the <a href="#all-2"><code class="language-plaintext highlighter-rouge">all</code></a> option is <code class="language-plaintext highlighter-rouge">true</code>). Otherwise the returned promise will not be resolved/rejected.</p>

<p>If the spawned process fails, <a href="#stdout"><code class="language-plaintext highlighter-rouge">error.stdout</code></a>, <a href="#stderr"><code class="language-plaintext highlighter-rouge">error.stderr</code></a>, and <a href="#all"><code class="language-plaintext highlighter-rouge">error.all</code></a> will contain the buffered data.</p>

<h4 id="input">input</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string | Buffer | stream.Readable</code></p>

<p>Write some input to the <code class="language-plaintext highlighter-rouge">stdin</code> of your binary.<br />
Streams are not allowed when using the synchronous methods.</p>

<h4 id="stdin">stdin</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string | number | Stream | undefined</code><br />
Default: <code class="language-plaintext highlighter-rouge">pipe</code></p>

<p>Same options as <a href="https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio"><code class="language-plaintext highlighter-rouge">stdio</code></a>.</p>

<h4 id="stdout-1">stdout</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string | number | Stream | undefined</code><br />
Default: <code class="language-plaintext highlighter-rouge">pipe</code></p>

<p>Same options as <a href="https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio"><code class="language-plaintext highlighter-rouge">stdio</code></a>.</p>

<h4 id="stderr-1">stderr</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string | number | Stream | undefined</code><br />
Default: <code class="language-plaintext highlighter-rouge">pipe</code></p>

<p>Same options as <a href="https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio"><code class="language-plaintext highlighter-rouge">stdio</code></a>.</p>

<h4 id="all-2">all</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">boolean</code><br />
Default: <code class="language-plaintext highlighter-rouge">false</code></p>

<p>Add an <code class="language-plaintext highlighter-rouge">.all</code> property on the <a href="#all">promise</a> and the <a href="#all-1">resolved value</a>. The property contains the output of the process with <code class="language-plaintext highlighter-rouge">stdout</code> and <code class="language-plaintext highlighter-rouge">stderr</code> interleaved.</p>

<h4 id="reject">reject</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">boolean</code><br />
Default: <code class="language-plaintext highlighter-rouge">true</code></p>

<p>Setting this to <code class="language-plaintext highlighter-rouge">false</code> resolves the promise with the error instead of rejecting it.</p>

<h4 id="stripfinalnewline">stripFinalNewline</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">boolean</code><br />
Default: <code class="language-plaintext highlighter-rouge">true</code></p>

<p>Strip the final <a href="https://en.wikipedia.org/wiki/Newline">newline character</a> from the output.</p>

<h4 id="extendenv">extendEnv</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">boolean</code><br />
Default: <code class="language-plaintext highlighter-rouge">true</code></p>

<p>Set to <code class="language-plaintext highlighter-rouge">false</code> if you don’t want to extend the environment variables when providing the <code class="language-plaintext highlighter-rouge">env</code> property.</p>

<hr />

<p>Execa also accepts the below options which are the same as the options for <a href="https://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options"><code class="language-plaintext highlighter-rouge">child_process#spawn()</code></a>/<a href="https://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback"><code class="language-plaintext highlighter-rouge">child_process#exec()</code></a></p>

<h4 id="cwd">cwd</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string</code><br />
Default: <code class="language-plaintext highlighter-rouge">process.cwd()</code></p>

<p>Current working directory of the child process.</p>

<h4 id="env">env</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">object</code><br />
Default: <code class="language-plaintext highlighter-rouge">process.env</code></p>

<p>Environment key-value pairs. Extends automatically from <code class="language-plaintext highlighter-rouge">process.env</code>. Set <a href="#extendenv"><code class="language-plaintext highlighter-rouge">extendEnv</code></a> to <code class="language-plaintext highlighter-rouge">false</code> if you don’t want this.</p>

<h4 id="argv0">argv0</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string</code></p>

<p>Explicitly set the value of <code class="language-plaintext highlighter-rouge">argv[0]</code> sent to the child process. This will be set to <code class="language-plaintext highlighter-rouge">file</code> if not specified.</p>

<h4 id="stdio">stdio</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string | string[]</code><br />
Default: <code class="language-plaintext highlighter-rouge">pipe</code></p>

<p>Child’s <a href="https://nodejs.org/api/child_process.html#child_process_options_stdio">stdio</a> configuration.</p>

<h4 id="serialization">serialization</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string</code><br />
Default: <code class="language-plaintext highlighter-rouge">'json'</code></p>

<p>Specify the kind of serialization used for sending messages between processes when using the <a href="#stdio"><code class="language-plaintext highlighter-rouge">stdio: 'ipc'</code></a> option or <a href="#execanodescriptpath-arguments-options"><code class="language-plaintext highlighter-rouge">execa.node()</code></a>:
	- <code class="language-plaintext highlighter-rouge">json</code>: Uses <code class="language-plaintext highlighter-rouge">JSON.stringify()</code> and <code class="language-plaintext highlighter-rouge">JSON.parse()</code>.
	- <code class="language-plaintext highlighter-rouge">advanced</code>: Uses <a href="https://nodejs.org/api/v8.html#v8_v8_serialize_value"><code class="language-plaintext highlighter-rouge">v8.serialize()</code></a></p>

<p>Requires Node.js <code class="language-plaintext highlighter-rouge">13.2.0</code> or later.</p>

<p><a href="https://nodejs.org/api/child_process.html#child_process_advanced_serialization">More info.</a></p>

<h4 id="detached">detached</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">boolean</code></p>

<p>Prepare child to run independently of its parent process. Specific behavior <a href="https://nodejs.org/api/child_process.html#child_process_options_detached">depends on the platform</a>.</p>

<h4 id="uid">uid</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">number</code></p>

<p>Sets the user identity of the process.</p>

<h4 id="gid">gid</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">number</code></p>

<p>Sets the group identity of the process.</p>

<h4 id="shell">shell</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">boolean | string</code><br />
Default: <code class="language-plaintext highlighter-rouge">false</code></p>

<p>If <code class="language-plaintext highlighter-rouge">true</code>, runs <code class="language-plaintext highlighter-rouge">file</code> inside of a shell. Uses <code class="language-plaintext highlighter-rouge">/bin/sh</code> on UNIX and <code class="language-plaintext highlighter-rouge">cmd.exe</code> on Windows. A different shell can be specified as a string. The shell should understand the <code class="language-plaintext highlighter-rouge">-c</code> switch on UNIX or <code class="language-plaintext highlighter-rouge">/d /s /c</code> on Windows.</p>

<p>We recommend against using this option since it is:</p>
<ul>
  <li>not cross-platform, encouraging shell-specific syntax.</li>
  <li>slower, because of the additional shell interpretation.</li>
  <li>unsafe, potentially allowing command injection.</li>
</ul>

<h4 id="encoding">encoding</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string | null</code><br />
Default: <code class="language-plaintext highlighter-rouge">utf8</code></p>

<p>Specify the character encoding used to decode the <code class="language-plaintext highlighter-rouge">stdout</code> and <code class="language-plaintext highlighter-rouge">stderr</code> output. If set to <code class="language-plaintext highlighter-rouge">null</code>, then <code class="language-plaintext highlighter-rouge">stdout</code> and <code class="language-plaintext highlighter-rouge">stderr</code> will be a <code class="language-plaintext highlighter-rouge">Buffer</code> instead of a string.</p>

<h4 id="timeout">timeout</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">number</code><br />
Default: <code class="language-plaintext highlighter-rouge">0</code></p>

<p>If timeout is greater than <code class="language-plaintext highlighter-rouge">0</code>, the parent will send the signal identified by the <code class="language-plaintext highlighter-rouge">killSignal</code> property (the default is <code class="language-plaintext highlighter-rouge">SIGTERM</code>) if the child runs longer than timeout milliseconds.</p>

<h4 id="maxbuffer">maxBuffer</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">number</code><br />
Default: <code class="language-plaintext highlighter-rouge">100_000_000</code> (100 MB)</p>

<p>Largest amount of data in bytes allowed on <code class="language-plaintext highlighter-rouge">stdout</code> or <code class="language-plaintext highlighter-rouge">stderr</code>.</p>

<h4 id="killsignal">killSignal</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string | number</code><br />
Default: <code class="language-plaintext highlighter-rouge">SIGTERM</code></p>

<p>Signal value to be used when the spawned process will be killed.</p>

<h4 id="windowsverbatimarguments">windowsVerbatimArguments</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">boolean</code><br />
Default: <code class="language-plaintext highlighter-rouge">false</code></p>

<p>If <code class="language-plaintext highlighter-rouge">true</code>, no quoting or escaping of arguments is done on Windows. Ignored on other platforms. This is set to <code class="language-plaintext highlighter-rouge">true</code> automatically when the <code class="language-plaintext highlighter-rouge">shell</code> option is <code class="language-plaintext highlighter-rouge">true</code>.</p>

<h4 id="windowshide">windowsHide</h4>

<p>Type: <code class="language-plaintext highlighter-rouge">boolean</code><br />
Default: <code class="language-plaintext highlighter-rouge">true</code></p>

<p>On Windows, do not create a new console window. Please note this also prevents <code class="language-plaintext highlighter-rouge">CTRL-C</code> <a href="https://github.com/nodejs/node/issues/29837">from working</a> on Windows.</p>

<h4 id="nodepath-for-node-only">nodePath <em>(For <code class="language-plaintext highlighter-rouge">.node()</code> only)</em></h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string</code><br />
Default: <a href="https://nodejs.org/api/process.html#process_process_execpath"><code class="language-plaintext highlighter-rouge">process.execPath</code></a></p>

<p>Node.js executable used to create the child process.</p>

<h4 id="nodeoptions-for-node-only">nodeOptions <em>(For <code class="language-plaintext highlighter-rouge">.node()</code> only)</em></h4>

<p>Type: <code class="language-plaintext highlighter-rouge">string[]</code><br />
Default: <a href="https://nodejs.org/api/process.html#process_process_execargv"><code class="language-plaintext highlighter-rouge">process.execArgv</code></a></p>

<p>List of <a href="https://nodejs.org/api/cli.html#cli_options">CLI options</a> passed to the Node.js executable.</p>

<h2 id="tips">Tips</h2>

<h3 id="retry-on-error">Retry on error</h3>

<p>Gracefully handle failures by using automatic retries and exponential backoff with the <a href="https://github.com/sindresorhus/p-retry"><code class="language-plaintext highlighter-rouge">p-retry</code></a> package:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">pRetry</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">p-retry</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">run</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">execa</span><span class="p">(</span><span class="dl">'</span><span class="s1">curl</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">-sSL</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">https://sindresorhus.com/unicorn</span><span class="dl">'</span><span class="p">]);</span>
	<span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
<span class="p">};</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">await</span> <span class="nx">pRetry</span><span class="p">(</span><span class="nx">run</span><span class="p">,</span> <span class="p">{</span><span class="na">retries</span><span class="p">:</span> <span class="mi">5</span><span class="p">}));</span>
<span class="p">})();</span>
</code></pre></div></div>

<h3 id="save-and-pipe-output-from-a-child-process">Save and pipe output from a child process</h3>

<p>Let’s say you want to show the output of a child process in real-time while also saving it to a variable.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">execa</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">execa</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">subprocess</span> <span class="o">=</span> <span class="nx">execa</span><span class="p">(</span><span class="dl">'</span><span class="s1">echo</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">foo</span><span class="dl">'</span><span class="p">]);</span>
<span class="nx">subprocess</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">);</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="kd">const</span> <span class="p">{</span><span class="nx">stdout</span><span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">subprocess</span><span class="p">;</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">child output:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">stdout</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div></div>

<h3 id="redirect-output-to-a-file">Redirect output to a file</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">execa</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">execa</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">subprocess</span> <span class="o">=</span> <span class="nx">execa</span><span class="p">(</span><span class="dl">'</span><span class="s1">echo</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">foo</span><span class="dl">'</span><span class="p">])</span>
<span class="nx">subprocess</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="dl">'</span><span class="s1">stdout.txt</span><span class="dl">'</span><span class="p">))</span>
</code></pre></div></div>

<h3 id="redirect-input-from-a-file">Redirect input from a file</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">execa</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">execa</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">subprocess</span> <span class="o">=</span> <span class="nx">execa</span><span class="p">(</span><span class="dl">'</span><span class="s1">cat</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="dl">'</span><span class="s1">stdin.txt</span><span class="dl">'</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">subprocess</span><span class="p">.</span><span class="nx">stdin</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="execute-the-current-packages-binary">Execute the current package’s binary</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">getBinPathSync</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">get-bin-path</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">binPath</span> <span class="o">=</span> <span class="nx">getBinPathSync</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">subprocess</span> <span class="o">=</span> <span class="nx">execa</span><span class="p">(</span><span class="nx">binPath</span><span class="p">);</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">execa</code> can be combined with <a href="https://github.com/ehmicky/get-bin-path"><code class="language-plaintext highlighter-rouge">get-bin-path</code></a> to test the current package’s binary. As opposed to hard-coding the path to the binary, this validates that the <code class="language-plaintext highlighter-rouge">package.json</code> <code class="language-plaintext highlighter-rouge">bin</code> field is correctly set up.</p>

<h2 id="related">Related</h2>

<ul>
  <li><a href="https://github.com/ehmicky/gulp-execa">gulp-execa</a> - Gulp plugin for <code class="language-plaintext highlighter-rouge">execa</code></li>
  <li><a href="https://github.com/ehmicky/nvexeca">nvexeca</a> - Run <code class="language-plaintext highlighter-rouge">execa</code> using any Node.js version</li>
  <li><a href="https://github.com/jorangreef/sudo-prompt">sudo-prompt</a> - Run commands with elevated privileges.</li>
</ul>

<h2 id="maintainers">Maintainers</h2>

<ul>
  <li><a href="https://github.com/sindresorhus">Sindre Sorhus</a></li>
  <li><a href="https://github.com/ehmicky">@ehmicky</a></li>
</ul>

<hr />

<div align="center">
	<b>
		<a href="https://tidelift.com/subscription/pkg/npm-execa?utm_source=npm-execa&amp;utm_medium=referral&amp;utm_campaign=readme">Get professional support for this package with a Tidelift subscription</a>
	</b>
	<br />
	<sub>
		Tidelift helps make open source sustainable for maintainers while giving companies<br />assurances about security, maintenance, and licensing for their dependencies.
	</sub>
</div>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
