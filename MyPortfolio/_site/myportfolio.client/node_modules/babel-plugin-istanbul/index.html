<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>babel-plugin-istanbul | portfolio</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="babel-plugin-istanbul" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/myportfolio.client/node_modules/babel-plugin-istanbul/" />
<meta property="og:url" content="http://localhost:4000/myportfolio.client/node_modules/babel-plugin-istanbul/" />
<meta property="og:site_name" content="portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="babel-plugin-istanbul" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"babel-plugin-istanbul","url":"http://localhost:4000/myportfolio.client/node_modules/babel-plugin-istanbul/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=00c08f3bd19ad2390c706d50e4f8968f8b47944c">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">portfolio</a></h1>
      

      <h1 id="babel-plugin-istanbul">babel-plugin-istanbul</h1>

<p><a href="https://coveralls.io/github/istanbuljs/babel-plugin-istanbul?branch=master"><img src="https://coveralls.io/repos/github/istanbuljs/babel-plugin-istanbul/badge.svg?branch=master" alt="Coverage Status" /></a>
<a href="https://conventionalcommits.org"><img src="https://img.shields.io/badge/Conventional%20Commits-1.0.0-yellow.svg" alt="Conventional Commits" /></a>
<a href="http://devtoolscommunity.herokuapp.com"><img src="http://devtoolscommunity.herokuapp.com/badge.svg" alt="community slack" /></a></p>

<p><em>Having problems? want to contribute? join our <a href="http://devtoolscommunity.herokuapp.com">community slack</a></em>.</p>

<p>A Babel plugin that instruments your code with Istanbul coverage.
It can instantly be used with <a href="https://github.com/karma-runner/karma-coverage">karma-coverage</a> and mocha on Node.js (through <a href="https://github.com/bcoe/nyc">nyc</a>).</p>

<p><strong>Note:</strong> This plugin does not generate any report or save any data to any file;
it only adds instrumenting code to your JavaScript source code.
To integrate with testing tools, please see the <a href="#integrations">Integrations</a> section.</p>

<h2 id="usage">Usage</h2>

<p>Install it:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install --save-dev babel-plugin-istanbul
</code></pre></div></div>

<p>Add it to <code class="language-plaintext highlighter-rouge">.babelrc</code> in test mode:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">env</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">test</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">plugins</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span> <span class="dl">"</span><span class="s2">istanbul</span><span class="dl">"</span> <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Optionally, use <a href="https://www.npmjs.com/package/cross-env">cross-env</a> to set
<code class="language-plaintext highlighter-rouge">NODE_ENV=test</code>:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cross-env NODE_ENV=test nyc --reporter=lcov --reporter=text mocha test/*.js"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="integrations">Integrations</h2>

<h3 id="karma">karma</h3>

<p>It <em>just works</em> with Karma. First, make sure that the code is already transpiled by Babel (either using <code class="language-plaintext highlighter-rouge">karma-babel-preprocessor</code>, <code class="language-plaintext highlighter-rouge">karma-webpack</code>, or <code class="language-plaintext highlighter-rouge">karma-browserify</code>). Then, simply set up <a href="https://github.com/karma-runner/karma-coverage">karma-coverage</a> according to the docs, but <strong>don’t add the <code class="language-plaintext highlighter-rouge">coverage</code> preprocessor.</strong> This plugin has already instrumented your code, and Karma should pick it up automatically.</p>

<p>It has been tested with <a href="https://codecov.io/github/bemusic/bemuse">bemusic/bemuse</a> project, which contains ~2400 statements.</p>

<h3 id="mocha-on-nodejs-through-nyc">mocha on node.js (through nyc)</h3>

<p>Configure Mocha to transpile JavaScript code using Babel, then you can run your tests with <a href="https://github.com/bcoe/nyc"><code class="language-plaintext highlighter-rouge">nyc</code></a>, which will collect all the coverage report.</p>

<p>babel-plugin-istanbul respects the <code class="language-plaintext highlighter-rouge">include</code>/<code class="language-plaintext highlighter-rouge">exclude</code> configuration options from nyc,
but you also need to <strong>configure NYC not to instrument your code</strong> by adding these settings in your <code class="language-plaintext highlighter-rouge">package.json</code>:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="dl">"</span><span class="s2">nyc</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">sourceMap</span><span class="dl">"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">instrument</span><span class="dl">"</span><span class="p">:</span> <span class="kc">false</span>
  <span class="p">},</span>
</code></pre></div></div>

<h2 id="ignoring-files">Ignoring files</h2>

<p>You don’t want to cover your test files as this will skew your coverage results. You can configure this by providing plugin options matching nyc’s <a href="https://github.com/bcoe/nyc#excluding-files"><code class="language-plaintext highlighter-rouge">exclude</code>/<code class="language-plaintext highlighter-rouge">include</code> rules</a>:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"plugins"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">[</span><span class="s2">"istanbul"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"exclude"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"**/*.spec.js"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}]</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>If you don’t provide options in your Babel config, the plugin will look for <code class="language-plaintext highlighter-rouge">exclude</code>/<code class="language-plaintext highlighter-rouge">include</code> config under an <code class="language-plaintext highlighter-rouge">"nyc"</code> key in <code class="language-plaintext highlighter-rouge">package.json</code>.</p>

<p>You can also use <a href="https://github.com/gotwarlost/istanbul/blob/master/ignoring-code-for-coverage.md#ignoring-code-for-coverage-purposes">istanbul’s ignore hints</a> to specify specific lines of code to skip instrumenting.</p>

<h2 id="source-maps">Source Maps</h2>

<p>By default, this plugin will pick up inline source maps and attach them to the instrumented code such that code coverage can be remapped back to the original source, even for multi-step build processes. This can be memory intensive. Set <code class="language-plaintext highlighter-rouge">useInlineSourceMaps</code> to prevent this behavior.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"plugins"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">[</span><span class="s2">"istanbul"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"useInlineSourceMaps"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">}]</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>If you’re instrumenting code programatically, you can pass a source map explicitly.</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">babelPluginIstanbul</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">babel-plugin-istanbul</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">instrument</span><span class="p">(</span><span class="nx">sourceCode</span><span class="p">,</span> <span class="nx">sourceMap</span><span class="p">,</span> <span class="nx">fileName</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">babel</span><span class="p">.</span><span class="nx">transform</span><span class="p">(</span><span class="nx">sourceCode</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">filename</span><span class="p">,</span>
    <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">[</span><span class="nx">babelPluginIstanbul</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">inputSourceMap</span><span class="p">:</span> <span class="nx">sourceMap</span>
      <span class="p">}]</span>
    <span class="p">]</span>
  <span class="p">})</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="credit-where-credit-is-due">Credit where credit is due</h2>

<p>The approach used in <code class="language-plaintext highlighter-rouge">babel-plugin-istanbul</code> was inspired by <a href="https://github.com/dtinth">Thai Pangsakulyanont</a>’s original library <a href="https://github.com/dtinth/babel-plugin-__coverage__"><code class="language-plaintext highlighter-rouge">babel-plugin-__coverage__</code></a>.</p>

<h2 id="babel-plugin-istanbul-for-enterprise"><code class="language-plaintext highlighter-rouge">babel-plugin-istanbul</code> for enterprise</h2>

<p>Available as part of the Tidelift Subscription.</p>

<p>The maintainers of <code class="language-plaintext highlighter-rouge">babel-plugin-istanbul</code> and thousands of other packages are working with Tidelift to deliver commercial support and maintenance for the open source dependencies you use to build your applications. Save time, reduce risk, and improve code health, while paying the maintainers of the exact dependencies you use. <a href="https://tidelift.com/subscription/pkg/npm-babel-plugin-istanbul?utm_source=npm-babel-plugin-istanbul&amp;utm_medium=referral&amp;utm_campaign=enterprise&amp;utm_term=repo">Learn more.</a></p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
