<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>portfolio</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="portfolio" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/myportfolio.client/node_modules/emittery/" />
<meta property="og:url" content="http://localhost:4000/myportfolio.client/node_modules/emittery/" />
<meta property="og:site_name" content="portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="portfolio" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"portfolio","url":"http://localhost:4000/myportfolio.client/node_modules/emittery/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=059dd2210d8f0fb8d42af0cbb5c1b29e59b98886">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">portfolio</a></h1>
      

      <h1><img src="media/header.png" width="1000" /></h1>

<blockquote>
  <p>Simple and modern async event emitter</p>
</blockquote>

<p><a href="https://codecov.io/gh/sindresorhus/emittery"><img src="https://codecov.io/gh/sindresorhus/emittery/branch/master/graph/badge.svg" alt="Coverage Status" /></a>
<a href="https://bundlephobia.com/result?p=emittery"><img src="https://badgen.net/bundlephobia/minzip/emittery" alt="" /></a></p>

<p>It works in Node.js and the browser (using a bundler).</p>

<p>Emitting events asynchronously is important for production code where you want the least amount of synchronous operations. Since JavaScript is single-threaded, no other code can run while doing synchronous operations. For Node.js, that means it will block other requests, defeating the strength of the platform, which is scalability through async. In the browser, a synchronous operation could potentially cause lags and block user interaction.</p>

<h2 id="install">Install</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm install emittery
</code></pre></div></div>

<h2 id="usage">Usage</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Emittery</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">emittery</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">emitter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Emittery</span><span class="p">();</span>

<span class="nx">emitter</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">myUnicorn</span> <span class="o">=</span> <span class="nb">Symbol</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">emitter</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">myUnicorn</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Unicorns love </span><span class="p">${</span><span class="nx">data</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🌈</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Will trigger printing '🌈'</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="nx">myUnicorn</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🦋</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">// Will trigger printing 'Unicorns love 🦋'</span>
</code></pre></div></div>

<h2 id="api">API</h2>

<h3 id="eventname">eventName</h3>

<p>Emittery accepts strings and symbols as event names.</p>

<p>Symbol event names can be used to avoid name collisions when your classes are extended, especially for internal events.</p>

<h3 id="emitter--new-emittery">emitter = new Emittery()</h3>

<h4 id="oneventname--eventname-listener">on(eventName | eventName[], listener)</h4>

<p>Subscribe to one or more events.</p>

<p>Returns an unsubscribe method.</p>

<p>Using the same listener multiple times for the same event will result in only one method call per emitted event.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Emittery</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">emittery</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">emitter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Emittery</span><span class="p">();</span>

<span class="nx">emitter</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">on</span><span class="p">([</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🐶</span><span class="dl">'</span><span class="p">],</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🌈</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// log =&gt; '🌈' x2</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🐶</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🍖</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// log =&gt; '🍖'</span>
</code></pre></div></div>

<h5 id="custom-subscribable-events">Custom subscribable events</h5>

<p>Emittery exports some symbols which represent custom events that can be passed to <code class="language-plaintext highlighter-rouge">Emitter.on</code> and similar methods.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Emittery.listenerAdded</code> - Fires when an event listener was added.</li>
  <li><code class="language-plaintext highlighter-rouge">Emittery.listenerRemoved</code> - Fires when an event listener was removed.</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Emittery</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">emittery</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">emitter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Emittery</span><span class="p">();</span>

<span class="nx">emitter</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">Emittery</span><span class="p">.</span><span class="nx">listenerAdded</span><span class="p">,</span> <span class="p">({</span><span class="nx">listener</span><span class="p">,</span> <span class="nx">eventName</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">listener</span><span class="p">);</span>
	<span class="c1">//=&gt; data =&gt; {}</span>

	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">eventName</span><span class="p">);</span>
	<span class="c1">//=&gt; '🦄'</span>
<span class="p">});</span>

<span class="nx">emitter</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="c1">// Handle data</span>
<span class="p">});</span>
</code></pre></div></div>

<h6 id="listener-data">Listener data</h6>

<ul>
  <li><code class="language-plaintext highlighter-rouge">listener</code> - The listener that was added.</li>
  <li><code class="language-plaintext highlighter-rouge">eventName</code> - The name of the event that was added or removed if <code class="language-plaintext highlighter-rouge">.on()</code> or <code class="language-plaintext highlighter-rouge">.off()</code> was used, or <code class="language-plaintext highlighter-rouge">undefined</code> if <code class="language-plaintext highlighter-rouge">.onAny()</code> or <code class="language-plaintext highlighter-rouge">.offAny()</code> was used.</li>
</ul>

<p>Only events that are not of this type are able to trigger these events.</p>

<h5 id="listenerdata">listener(data)</h5>

<h4 id="offeventname--eventname-listener">off(eventName | eventName[], listener)</h4>

<p>Remove one or more event subscriptions.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Emittery</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">emittery</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">emitter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Emittery</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">listener</span> <span class="o">=</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">emitter</span><span class="p">.</span><span class="nx">on</span><span class="p">([</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🐶</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🦊</span><span class="dl">'</span><span class="p">],</span> <span class="nx">listener</span><span class="p">);</span>
	<span class="k">await</span> <span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">);</span>
	<span class="k">await</span> <span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🐶</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">);</span>
	<span class="k">await</span> <span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦊</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">);</span>
	<span class="nx">emitter</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
	<span class="nx">emitter</span><span class="p">.</span><span class="nx">off</span><span class="p">([</span><span class="dl">'</span><span class="s1">🐶</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🦊</span><span class="dl">'</span><span class="p">],</span> <span class="nx">listener</span><span class="p">);</span>
	<span class="k">await</span> <span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Nothing happens</span>
	<span class="k">await</span> <span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🐶</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Nothing happens</span>
	<span class="k">await</span> <span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦊</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Nothing happens</span>
<span class="p">})();</span>
</code></pre></div></div>

<h5 id="listenerdata-1">listener(data)</h5>

<h4 id="onceeventname--eventname">once(eventName | eventName[])</h4>

<p>Subscribe to one or more events only once. It will be unsubscribed after the first event.</p>

<p>Returns a promise for the event data when <code class="language-plaintext highlighter-rouge">eventName</code> is emitted.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Emittery</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">emittery</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">emitter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Emittery</span><span class="p">();</span>

<span class="nx">emitter</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
	<span class="c1">//=&gt; '🌈'</span>
<span class="p">});</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">once</span><span class="p">([</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🐶</span><span class="dl">'</span><span class="p">]).</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🌈</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Log =&gt; '🌈' x2</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🐶</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🍖</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Nothing happens</span>
</code></pre></div></div>

<h4 id="eventseventname">events(eventName)</h4>

<p>Get an async iterator which buffers data each time an event is emitted.</p>

<p>Call <code class="language-plaintext highlighter-rouge">return()</code> on the iterator to remove the subscription.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Emittery</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">emittery</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">emitter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Emittery</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">iterator</span> <span class="o">=</span> <span class="nx">emitter</span><span class="p">.</span><span class="nx">events</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🌈1</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Buffered</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🌈2</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Buffered</span>

<span class="nx">iterator</span>
	<span class="p">.</span><span class="nx">next</span><span class="p">()</span>
	<span class="p">.</span><span class="nx">then</span><span class="p">(({</span><span class="nx">value</span><span class="p">,</span> <span class="nx">done</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="c1">// done === false</span>
		<span class="c1">// value === '🌈1'</span>
		<span class="k">return</span> <span class="nx">iterator</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
	<span class="p">})</span>
	<span class="p">.</span><span class="nx">then</span><span class="p">(({</span><span class="nx">value</span><span class="p">,</span> <span class="nx">done</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="c1">// done === false</span>
		<span class="c1">// value === '🌈2'</span>
		<span class="c1">// Revoke subscription</span>
		<span class="k">return</span> <span class="nx">iterator</span><span class="p">.</span><span class="k">return</span><span class="p">();</span>
	<span class="p">})</span>
	<span class="p">.</span><span class="nx">then</span><span class="p">(({</span><span class="nx">done</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="c1">// done === true</span>
	<span class="p">});</span>
</code></pre></div></div>

<p>In practice, you would usually consume the events using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for-await...of">for await</a> statement. In that case, to revoke the subscription simply break the loop.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Emittery</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">emittery</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">emitter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Emittery</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">iterator</span> <span class="o">=</span> <span class="nx">emitter</span><span class="p">.</span><span class="nx">events</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🌈1</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Buffered</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🌈2</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Buffered</span>

<span class="c1">// In an async context.</span>
<span class="k">for</span> <span class="k">await</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">data</span> <span class="k">of</span> <span class="nx">iterator</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="nx">data</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">🌈2</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">break</span><span class="p">;</span> <span class="c1">// Revoke the subscription when we see the value '🌈2'.</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>It accepts multiple event names.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Emittery</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">emittery</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">emitter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Emittery</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">iterator</span> <span class="o">=</span> <span class="nx">emitter</span><span class="p">.</span><span class="nx">events</span><span class="p">([</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🦊</span><span class="dl">'</span><span class="p">]);</span>

<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🌈1</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Buffered</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦊</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🌈2</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Buffered</span>

<span class="nx">iterator</span>
	<span class="p">.</span><span class="nx">next</span><span class="p">()</span>
	<span class="p">.</span><span class="nx">then</span><span class="p">(({</span><span class="nx">value</span><span class="p">,</span> <span class="nx">done</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="c1">// done === false</span>
		<span class="c1">// value === '🌈1'</span>
		<span class="k">return</span> <span class="nx">iterator</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
	<span class="p">})</span>
	<span class="p">.</span><span class="nx">then</span><span class="p">(({</span><span class="nx">value</span><span class="p">,</span> <span class="nx">done</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="c1">// done === false</span>
		<span class="c1">// value === '🌈2'</span>
		<span class="c1">// Revoke subscription</span>
		<span class="k">return</span> <span class="nx">iterator</span><span class="p">.</span><span class="k">return</span><span class="p">();</span>
	<span class="p">})</span>
	<span class="p">.</span><span class="nx">then</span><span class="p">(({</span><span class="nx">done</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="c1">// done === true</span>
	<span class="p">});</span>
</code></pre></div></div>

<h4 id="emiteventname-data">emit(eventName, data?)</h4>

<p>Trigger an event asynchronously, optionally with some data. Listeners are called in the order they were added, but executed concurrently.</p>

<p>Returns a promise that resolves when all the event listeners are done. <em>Done</em> meaning executed if synchronous or resolved when an async/promise-returning function. You usually wouldn’t want to wait for this, but you could for example catch possible errors. If any of the listeners throw/reject, the returned promise will be rejected with the error, but the other listeners will not be affected.</p>

<h4 id="emitserialeventname-data">emitSerial(eventName, data?)</h4>

<p>Same as above, but it waits for each listener to resolve before triggering the next one. This can be useful if your events depend on each other. Although ideally they should not. Prefer <code class="language-plaintext highlighter-rouge">emit()</code> whenever possible.</p>

<p>If any of the listeners throw/reject, the returned promise will be rejected with the error and the remaining listeners will <em>not</em> be called.</p>

<h4 id="onanylistener">onAny(listener)</h4>

<p>Subscribe to be notified about any event.</p>

<p>Returns a method to unsubscribe.</p>

<h5 id="listenereventname-data">listener(eventName, data)</h5>

<h4 id="offanylistener">offAny(listener)</h4>

<p>Remove an <code class="language-plaintext highlighter-rouge">onAny</code> subscription.</p>

<h4 id="anyevent">anyEvent()</h4>

<p>Get an async iterator which buffers a tuple of an event name and data each time an event is emitted.</p>

<p>Call <code class="language-plaintext highlighter-rouge">return()</code> on the iterator to remove the subscription.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Emittery</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">emittery</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">emitter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Emittery</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">iterator</span> <span class="o">=</span> <span class="nx">emitter</span><span class="p">.</span><span class="nx">anyEvent</span><span class="p">();</span>

<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🌈1</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Buffered</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🌟</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">🌈2</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Buffered</span>

<span class="nx">iterator</span><span class="p">.</span><span class="nx">next</span><span class="p">()</span>
	<span class="p">.</span><span class="nx">then</span><span class="p">(({</span><span class="nx">value</span><span class="p">,</span> <span class="nx">done</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="c1">// done === false</span>
		<span class="c1">// value is ['🦄', '🌈1']</span>
		<span class="k">return</span> <span class="nx">iterator</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
	<span class="p">})</span>
	<span class="p">.</span><span class="nx">then</span><span class="p">(({</span><span class="nx">value</span><span class="p">,</span> <span class="nx">done</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="c1">// done === false</span>
		<span class="c1">// value is ['🌟', '🌈2']</span>
		<span class="c1">// Revoke subscription</span>
		<span class="k">return</span> <span class="nx">iterator</span><span class="p">.</span><span class="k">return</span><span class="p">();</span>
	<span class="p">})</span>
	<span class="p">.</span><span class="nx">then</span><span class="p">(({</span><span class="nx">done</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="c1">// done === true</span>
	<span class="p">});</span>
</code></pre></div></div>

<p>In the same way as for <code class="language-plaintext highlighter-rouge">events</code>, you can subscribe by using the <code class="language-plaintext highlighter-rouge">for await</code> statement</p>

<h4 id="clearlistenerseventnames">clearListeners(eventNames?)</h4>

<p>Clear all event listeners on the instance.</p>

<p>If <code class="language-plaintext highlighter-rouge">eventNames</code> is given, only the listeners for that events are cleared.</p>

<h4 id="listenercounteventnames">listenerCount(eventNames?)</h4>

<p>The number of listeners for the <code class="language-plaintext highlighter-rouge">eventNames</code> or all events if not specified.</p>

<h4 id="bindmethodstarget-methodnames">bindMethods(target, methodNames?)</h4>

<p>Bind the given <code class="language-plaintext highlighter-rouge">methodNames</code>, or all <code class="language-plaintext highlighter-rouge">Emittery</code> methods if <code class="language-plaintext highlighter-rouge">methodNames</code> is not defined, into the <code class="language-plaintext highlighter-rouge">target</code> object.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Emittery</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">emittery</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">object</span> <span class="o">=</span> <span class="p">{};</span>

<span class="k">new</span> <span class="nx">Emittery</span><span class="p">().</span><span class="nx">bindMethods</span><span class="p">(</span><span class="nx">object</span><span class="p">);</span>

<span class="nx">object</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">event</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="typescript">TypeScript</h2>

<p>The default <code class="language-plaintext highlighter-rouge">Emittery</code> class has generic types that can be provided by TypeScript users to strongly type the list of events and the data passed to their event listeners.</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Emittery</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">emittery</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">emitter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Emittery</span><span class="o">&lt;</span>
	<span class="c1">// Pass `{[eventName]: undefined | &lt;eventArg&gt;}` as the first type argument for events that pass data to their listeners.</span>
	<span class="c1">// A value of `undefined` in this map means the event listeners should expect no data, and a type other than `undefined` means the listeners will receive one argument of that type.</span>
	<span class="p">{</span>
		<span class="na">open</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
		<span class="na">close</span><span class="p">:</span> <span class="kc">undefined</span>
	<span class="p">}</span>
<span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// Typechecks just fine because the data type for the `open` event is `string`.</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">foo</span><span class="se">\n</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Typechecks just fine because `close` is present but points to undefined in the event data type map.</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// TS compilation error because `1` isn't assignable to `string`.</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="c1">// TS compilation error because `other` isn't defined in the event data type map.</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">other</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="emitterymixinemitterypropertyname-methodnames">Emittery.mixin(emitteryPropertyName, methodNames?)</h3>

<p>A decorator which mixins <code class="language-plaintext highlighter-rouge">Emittery</code> as property <code class="language-plaintext highlighter-rouge">emitteryPropertyName</code> and <code class="language-plaintext highlighter-rouge">methodNames</code>, or all <code class="language-plaintext highlighter-rouge">Emittery</code> methods if <code class="language-plaintext highlighter-rouge">methodNames</code> is not defined, into the target class.</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Emittery</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">emittery</span><span class="dl">'</span><span class="p">);</span>

<span class="p">@</span><span class="nd">Emittery</span><span class="p">.</span><span class="nx">mixin</span><span class="p">(</span><span class="dl">'</span><span class="s1">emittery</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">class</span> <span class="nx">MyClass</span> <span class="p">{}</span>

<span class="kd">const</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">event</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="scheduling-details">Scheduling details</h2>

<p>Listeners are not invoked for events emitted <em>before</em> the listener was added. Removing a listener will prevent that listener from being invoked, even if events are in the process of being (asynchronously!) emitted. This also applies to <code class="language-plaintext highlighter-rouge">.clearListeners()</code>, which removes all listeners. Listeners will be called in the order they were added. So-called <em>any</em> listeners are called <em>after</em> event-specific listeners.</p>

<p>Note that when using <code class="language-plaintext highlighter-rouge">.emitSerial()</code>, a slow listener will delay invocation of subsequent listeners. It’s possible for newer events to overtake older ones.</p>

<h2 id="faq">FAQ</h2>

<h3 id="how-is-this-different-than-the-built-in-eventemitter-in-nodejs">How is this different than the built-in <code class="language-plaintext highlighter-rouge">EventEmitter</code> in Node.js?</h3>

<p>There are many things to not like about <code class="language-plaintext highlighter-rouge">EventEmitter</code>: its huge API surface, synchronous event emitting, magic error event, flawed memory leak detection. Emittery has none of that.</p>

<h3 id="isnt-eventemitter-synchronous-for-a-reason">Isn’t <code class="language-plaintext highlighter-rouge">EventEmitter</code> synchronous for a reason?</h3>

<p>Mostly backwards compatibility reasons. The Node.js team can’t break the whole ecosystem.</p>

<p>It also allows silly code like this:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">unicorn</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="nx">emitter</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">unicorn</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">});</span>

<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">unicorn</span><span class="p">);</span>
<span class="c1">//=&gt; true</span>
</code></pre></div></div>

<p>But I would argue doing that shows a deeper lack of Node.js and async comprehension and is not something we should optimize for. The benefit of async emitting is much greater.</p>

<h3 id="can-you-support-multiple-arguments-for-emit">Can you support multiple arguments for <code class="language-plaintext highlighter-rouge">emit()</code>?</h3>

<p>No, just use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">destructuring</a>:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">emitter</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="p">([</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">])</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">🦄</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">]);</span>
</code></pre></div></div>

<h2 id="related">Related</h2>

<ul>
  <li><a href="https://github.com/sindresorhus/p-event">p-event</a> - Promisify an event by waiting for it to be emitted</li>
</ul>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
