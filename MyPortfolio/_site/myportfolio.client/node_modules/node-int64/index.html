<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>portfolio</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="portfolio" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/myportfolio.client/node_modules/node-int64/" />
<meta property="og:url" content="http://localhost:4000/myportfolio.client/node_modules/node-int64/" />
<meta property="og:site_name" content="portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="portfolio" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"portfolio","url":"http://localhost:4000/myportfolio.client/node_modules/node-int64/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=059dd2210d8f0fb8d42af0cbb5c1b29e59b98886">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">portfolio</a></h1>
      

      <p>JavaScript Numbers are represented as <a href="http://steve.hollasch.net/cgindex/coding/ieeefloat.html">IEEE 754 double-precision floats</a>.  Unfortunately, this means they lose integer precision for values beyond +/- 2^^53.  For projects that need to accurately handle 64-bit ints, such as <a href="https://github.com/wadey/node-thrift">node-thrift</a>, a performant, Number-like class is needed.  Int64 is that class.</p>

<p>Int64 instances look and feel much like JS-native Numbers.  By way of example â€¦</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// First, let's illustrate the problem ...</span>
<span class="o">&gt;</span> <span class="p">(</span><span class="mh">0x123456789</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="dl">'</span><span class="s1">123456789</span><span class="dl">'</span> <span class="c1">// &lt;- what we expect.</span>
<span class="o">&gt;</span> <span class="p">(</span><span class="mh">0x123456789abcdef0</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="dl">'</span><span class="s1">123456789abcdf00</span><span class="dl">'</span> <span class="c1">// &lt;- Ugh!  JS doesn't do big ints. :(</span>

<span class="c1">// So let's create a couple Int64s using the above values ...</span>

<span class="c1">// Require, of course</span>
<span class="o">&gt;</span> <span class="nx">Int64</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">node-int64</span><span class="dl">'</span><span class="p">)</span>

<span class="c1">// x's value is what we expect (the decimal value of 0x123456789)</span>
<span class="o">&gt;</span> <span class="nx">x</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Int64</span><span class="p">(</span><span class="mh">0x123456789</span><span class="p">)</span>
<span class="p">[</span><span class="nx">Int64</span> <span class="nx">value</span><span class="p">:</span><span class="mi">4886718345</span> <span class="nx">octets</span><span class="p">:</span><span class="mi">00</span> <span class="mi">00</span> <span class="mi">00</span> <span class="mi">01</span> <span class="mi">23</span> <span class="mi">45</span> <span class="mi">67</span> <span class="mi">89</span><span class="p">]</span>

<span class="c1">// y's value is Infinity because it's outside the range of integer</span>
<span class="c1">// precision.  But that's okay - it's still useful because it's internal</span>
<span class="c1">// representation (octets) is what we passed in</span>
<span class="o">&gt;</span> <span class="nx">y</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Int64</span><span class="p">(</span><span class="dl">'</span><span class="s1">123456789abcdef0</span><span class="dl">'</span><span class="p">)</span>
<span class="p">[</span><span class="nx">Int64</span> <span class="nx">value</span><span class="p">:</span><span class="kc">Infinity</span> <span class="nx">octets</span><span class="p">:</span><span class="mi">12</span> <span class="mi">34</span> <span class="mi">56</span> <span class="mi">78</span> <span class="mi">9</span><span class="nx">a</span> <span class="nx">bc</span> <span class="nx">de</span> <span class="nx">f0</span><span class="p">]</span>

<span class="c1">// Let's do some math.  Int64's behave like Numbers.  (Sorry, Int64 isn't</span>
<span class="c1">// for doing 64-bit integer arithmetic (yet) - it's just for carrying</span>
<span class="c1">// around int64 values</span>
<span class="o">&gt;</span> <span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span>
<span class="mi">4886718346</span>
<span class="o">&gt;</span> <span class="nx">y</span> <span class="o">+</span> <span class="mi">1</span>
<span class="kc">Infinity</span>

<span class="c1">// Int64 string operations ...</span>
<span class="o">&gt;</span> <span class="dl">'</span><span class="s1">value: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">x</span>
<span class="dl">'</span><span class="s1">value: 4886718345</span><span class="dl">'</span>
<span class="o">&gt;</span> <span class="dl">'</span><span class="s1">value: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">y</span>
<span class="dl">'</span><span class="s1">value: Infinity</span><span class="dl">'</span>
<span class="o">&gt;</span> <span class="nx">x</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="dl">'</span><span class="s1">100100011010001010110011110001001</span><span class="dl">'</span>
<span class="o">&gt;</span> <span class="nx">y</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="dl">'</span><span class="s1">Infinity</span><span class="dl">'</span>

<span class="c1">// Use JS's isFinite() method to see if the Int64 value is in the</span>
<span class="c1">// integer-precise range of JS values</span>
<span class="o">&gt;</span> <span class="nb">isFinite</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
<span class="kc">true</span>
<span class="o">&gt;</span> <span class="nb">isFinite</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span>
<span class="kc">false</span>

<span class="c1">// Get an octet string representation.  (Yay, y is what we put in!)</span>
<span class="o">&gt;</span> <span class="nx">x</span><span class="p">.</span><span class="nx">toOctetString</span><span class="p">()</span>
<span class="dl">'</span><span class="s1">0000000123456789</span><span class="dl">'</span>
<span class="o">&gt;</span> <span class="nx">y</span><span class="p">.</span><span class="nx">toOctetString</span><span class="p">()</span>
<span class="dl">'</span><span class="s1">123456789abcdef0</span><span class="dl">'</span>

<span class="c1">// Finally, some other ways to create Int64s ...</span>

<span class="c1">// Pass hi/lo words</span>
<span class="o">&gt;</span> <span class="k">new</span> <span class="nx">Int64</span><span class="p">(</span><span class="mh">0x12345678</span><span class="p">,</span> <span class="mh">0x9abcdef0</span><span class="p">)</span>
<span class="p">[</span><span class="nx">Int64</span> <span class="nx">value</span><span class="p">:</span><span class="kc">Infinity</span> <span class="nx">octets</span><span class="p">:</span><span class="mi">12</span> <span class="mi">34</span> <span class="mi">56</span> <span class="mi">78</span> <span class="mi">9</span><span class="nx">a</span> <span class="nx">bc</span> <span class="nx">de</span> <span class="nx">f0</span><span class="p">]</span>

<span class="c1">// Pass a Buffer</span>
<span class="o">&gt;</span> <span class="k">new</span> <span class="nx">Int64</span><span class="p">(</span><span class="k">new</span> <span class="nx">Buffer</span><span class="p">([</span><span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0x56</span><span class="p">,</span> <span class="mh">0x78</span><span class="p">,</span> <span class="mh">0x9a</span><span class="p">,</span> <span class="mh">0xbc</span><span class="p">,</span> <span class="mh">0xde</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">]))</span>
<span class="p">[</span><span class="nx">Int64</span> <span class="nx">value</span><span class="p">:</span><span class="kc">Infinity</span> <span class="nx">octets</span><span class="p">:</span><span class="mi">12</span> <span class="mi">34</span> <span class="mi">56</span> <span class="mi">78</span> <span class="mi">9</span><span class="nx">a</span> <span class="nx">bc</span> <span class="nx">de</span> <span class="nx">f0</span><span class="p">]</span>

<span class="c1">// Pass a Buffer and offset</span>
<span class="o">&gt;</span> <span class="k">new</span> <span class="nx">Int64</span><span class="p">(</span><span class="k">new</span> <span class="nx">Buffer</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0x56</span><span class="p">,</span> <span class="mh">0x78</span><span class="p">,</span> <span class="mh">0x9a</span><span class="p">,</span> <span class="mh">0xbc</span><span class="p">,</span> <span class="mh">0xde</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">]),</span> <span class="mi">4</span><span class="p">)</span>
<span class="p">[</span><span class="nx">Int64</span> <span class="nx">value</span><span class="p">:</span><span class="kc">Infinity</span> <span class="nx">octets</span><span class="p">:</span><span class="mi">12</span> <span class="mi">34</span> <span class="mi">56</span> <span class="mi">78</span> <span class="mi">9</span><span class="nx">a</span> <span class="nx">bc</span> <span class="nx">de</span> <span class="nx">f0</span><span class="p">]</span>

<span class="c1">// Pull out into a buffer</span>
<span class="o">&gt;</span> <span class="k">new</span> <span class="nx">Int64</span><span class="p">(</span><span class="k">new</span> <span class="nx">Buffer</span><span class="p">([</span><span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0x56</span><span class="p">,</span> <span class="mh">0x78</span><span class="p">,</span> <span class="mh">0x9a</span><span class="p">,</span> <span class="mh">0xbc</span><span class="p">,</span> <span class="mh">0xde</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">])).</span><span class="nx">toBuffer</span><span class="p">()</span>
<span class="o">&lt;</span><span class="nx">Buffer</span> <span class="mi">12</span> <span class="mi">34</span> <span class="mi">56</span> <span class="mi">78</span> <span class="mi">9</span><span class="nx">a</span> <span class="nx">bc</span> <span class="nx">de</span> <span class="nx">f0</span><span class="o">&gt;</span>

<span class="c1">// Or copy into an existing one (at an offset)</span>
<span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="mi">1024</span><span class="p">);</span>
<span class="o">&gt;</span> <span class="k">new</span> <span class="nx">Int64</span><span class="p">(</span><span class="k">new</span> <span class="nx">Buffer</span><span class="p">([</span><span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0x56</span><span class="p">,</span> <span class="mh">0x78</span><span class="p">,</span> <span class="mh">0x9a</span><span class="p">,</span> <span class="mh">0xbc</span><span class="p">,</span> <span class="mh">0xde</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">])).</span><span class="nx">copy</span><span class="p">(</span><span class="nx">buf</span><span class="p">,</span> <span class="mi">512</span><span class="p">);</span>
</code></pre></div></div>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
