<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>disallow large snapshots (no-large-snapshots) | portfolio</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="disallow large snapshots (no-large-snapshots)" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/myportfolio.client/node_modules/eslint-plugin-jest/docs/rules/no-large-snapshots.html" />
<meta property="og:url" content="http://localhost:4000/myportfolio.client/node_modules/eslint-plugin-jest/docs/rules/no-large-snapshots.html" />
<meta property="og:site_name" content="portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="disallow large snapshots (no-large-snapshots)" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"disallow large snapshots (no-large-snapshots)","url":"http://localhost:4000/myportfolio.client/node_modules/eslint-plugin-jest/docs/rules/no-large-snapshots.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=059dd2210d8f0fb8d42af0cbb5c1b29e59b98886">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">portfolio</a></h1>
      

      <h1 id="disallow-large-snapshots-no-large-snapshots">disallow large snapshots (<code class="language-plaintext highlighter-rouge">no-large-snapshots</code>)</h1>

<p>When using Jestâ€™s snapshot capability one should be mindful of the size of
created snapshots. As a general best practice snapshots should be limited in
size in order to be more manageable and reviewable. A stored snapshot is only as
good as its review and as such keeping it short, sweet, and readable is
important to allow for thorough reviews.</p>

<h2 id="usage">Usage</h2>

<p>Because Jest snapshots are written with back-ticks (` `) which are only valid
with
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">ES2015 onwards</a>
you should set <code class="language-plaintext highlighter-rouge">parserOptions</code> in your config to at least allow ES2015 in order
to use this rule:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">parserOptions</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">ecmaVersion</span><span class="p">:</span> <span class="mi">2015</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="rule-details">Rule Details</h2>

<p>This rule looks at all Jest inline and external snapshots (files with <code class="language-plaintext highlighter-rouge">.snap</code>
extension) and validates that each stored snapshot within those files does not
exceed 50 lines (by default, this is configurable as explained in <code class="language-plaintext highlighter-rouge">Options</code>
section below).</p>

<p>Example of <strong>incorrect</strong> code for this rule:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">exports</span><span class="p">[</span><span class="s2">`a large snapshot 1`</span><span class="p">]</span> <span class="o">=</span> <span class="s2">`
line 1
line 2
line 3
line 4
line 5
line 6
line 7
line 8
line 9
line 10
line 11
line 12
line 13
line 14
line 15
line 16
line 17
line 18
line 19
line 20
line 21
line 22
line 23
line 24
line 25
line 26
line 27
line 28
line 29
line 30
line 31
line 32
line 33
line 34
line 35
line 36
line 37
line 38
line 39
line 40
line 41
line 42
line 43
line 44
line 45
line 46
line 47
line 48
line 49
line 50
line 51
`</span><span class="p">;</span>
</code></pre></div></div>

<p>Example of <strong>correct</strong> code for this rule:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">exports</span><span class="p">[</span><span class="s2">`a more manageable and readable snapshot 1`</span><span class="p">]</span> <span class="o">=</span> <span class="s2">`
line 1
line 2
line 3
line 4
`</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="options">Options</h2>

<p>This rule has options for modifying the max number of lines allowed for a
snapshot:</p>

<p>In an <code class="language-plaintext highlighter-rouge">eslintrc</code> file:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"jest/no-large-snapshots"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"warn"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"maxSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="nl">"inlineMaxSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="p">}]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Max number of lines allowed could be defined by snapshot type (Inline and
External). Use <code class="language-plaintext highlighter-rouge">inlineMaxSize</code> for
<a href="https://jestjs.io/docs/en/snapshot-testing#inline-snapshots">Inline Snapshots</a>
size and <code class="language-plaintext highlighter-rouge">maxSize</code> for
<a href="https://jestjs.io/docs/en/snapshot-testing#snapshot-testing-with-jest">External Snapshots</a>.
If only <code class="language-plaintext highlighter-rouge">maxSize</code> is provided on options, the value of <code class="language-plaintext highlighter-rouge">maxSize</code> will be used to
both snapshot types (Inline and External).</p>

<p>Since <code class="language-plaintext highlighter-rouge">eslint-disable</code> comments are not preserved by Jest when updating
snapshots, you can use the <code class="language-plaintext highlighter-rouge">allowedSnapshots</code> option to have specific snapshots
allowed regardless of their size.</p>

<p>This option takes a map, with the key being the absolute filepath to a snapshot
file, and the value an array of values made up of strings and regular
expressions to compare to the names of the snapshots in the <code class="language-plaintext highlighter-rouge">.snap</code> file when
checking if the snapshots size should be allowed.</p>

<p>Note that regular expressions can only be passed in via <code class="language-plaintext highlighter-rouge">.eslintrc.js</code> as
instances of <code class="language-plaintext highlighter-rouge">RegExp</code>.</p>

<p>In an <code class="language-plaintext highlighter-rouge">.eslintrc.js</code> file:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">jest/no-large-snapshots</span><span class="dl">'</span><span class="p">:</span> <span class="p">[</span>
      <span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span>
      <span class="p">{</span>
        <span class="na">allowedSnapshots</span><span class="p">:</span> <span class="p">{</span>
          <span class="dl">'</span><span class="s1">/path/to/file.js.snap</span><span class="dl">'</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">snapshot name 1</span><span class="dl">'</span><span class="p">,</span> <span class="sr">/a big snapshot </span><span class="se">\d</span><span class="sr">+/</span><span class="p">],</span>
        <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">],</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Since absolute paths are typically not very portable, you can use the builtin
<code class="language-plaintext highlighter-rouge">path.resolve</code> function to expand relative paths into absolutes like so:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">rules</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">jest/no-large-snapshots</span><span class="dl">'</span><span class="p">:</span> <span class="p">[</span>
      <span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span>
      <span class="p">{</span>
        <span class="na">allowedSnapshots</span><span class="p">:</span> <span class="p">{</span>
          <span class="p">[</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="dl">'</span><span class="s1">test/__snapshots__/get.js.snap</span><span class="dl">'</span><span class="p">)]:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">full request</span><span class="dl">'</span><span class="p">],</span>
          <span class="p">[</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="dl">'</span><span class="s1">test/__snapshots__/put.js.snap</span><span class="dl">'</span><span class="p">)]:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">full request</span><span class="dl">'</span><span class="p">],</span>
        <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">],</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
